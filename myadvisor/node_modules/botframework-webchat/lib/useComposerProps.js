"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useComposerProps;

var _botframeworkWebchatComponent = require("botframework-webchat-component");

var _react = require("react");

var _createAdaptiveCardsAttachmentForScreenReaderMiddleware = _interopRequireDefault(require("./adaptiveCards/createAdaptiveCardsAttachmentForScreenReaderMiddleware"));

var _createAdaptiveCardsAttachmentMiddleware = _interopRequireDefault(require("./adaptiveCards/createAdaptiveCardsAttachmentMiddleware"));

var _createAdaptiveCardsStyleSet = _interopRequireDefault(require("./adaptiveCards/Styles/createAdaptiveCardsStyleSet"));

var _renderMarkdown = _interopRequireDefault(require("./renderMarkdown"));

function useComposerProps(_ref) {
  var attachmentForScreenReaderMiddleware = _ref.attachmentForScreenReaderMiddleware,
      attachmentMiddleware = _ref.attachmentMiddleware,
      renderMarkdown = _ref.renderMarkdown,
      styleOptions = _ref.styleOptions,
      styleSet = _ref.styleSet;
  var patchedAttachmentMiddleware = (0, _react.useMemo)(function () {
    return (0, _botframeworkWebchatComponent.concatMiddleware)(attachmentMiddleware, (0, _createAdaptiveCardsAttachmentMiddleware.default)());
  }, [attachmentMiddleware]);
  var patchedAttachmentForScreenReaderMiddleware = (0, _react.useMemo)(function () {
    return (0, _botframeworkWebchatComponent.concatMiddleware)(attachmentForScreenReaderMiddleware, (0, _createAdaptiveCardsAttachmentForScreenReaderMiddleware.default)());
  }, [attachmentForScreenReaderMiddleware]); // When styleSet is not specified, the styleOptions will be used to create Adaptive Cards styleSet and merged into useStyleSet.

  var extraStyleSet = (0, _react.useMemo)(function () {
    return styleSet ? undefined : (0, _createAdaptiveCardsStyleSet.default)(styleOptions);
  }, [styleOptions, styleSet]);
  var patchedRenderMarkdown = (0, _react.useMemo)(function () {
    return typeof renderMarkdown === 'undefined' ? function () {
      return _renderMarkdown.default.apply(void 0, arguments);
    } : renderMarkdown;
  }, [renderMarkdown]);
  return {
    attachmentMiddleware: patchedAttachmentMiddleware,
    attachmentForScreenReaderMiddleware: patchedAttachmentForScreenReaderMiddleware,
    extraStyleSet: extraStyleSet,
    renderMarkdown: patchedRenderMarkdown
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91c2VDb21wb3NlclByb3BzLmpzIl0sIm5hbWVzIjpbInVzZUNvbXBvc2VyUHJvcHMiLCJhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSIsImF0dGFjaG1lbnRNaWRkbGV3YXJlIiwicmVuZGVyTWFya2Rvd24iLCJzdHlsZU9wdGlvbnMiLCJzdHlsZVNldCIsInBhdGNoZWRBdHRhY2htZW50TWlkZGxld2FyZSIsInBhdGNoZWRBdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSIsImV4dHJhU3R5bGVTZXQiLCJ1bmRlZmluZWQiLCJwYXRjaGVkUmVuZGVyTWFya2Rvd24iLCJkZWZhdWx0UmVuZGVyTWFya2Rvd24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUVlLFNBQVNBLGdCQUFULE9BTVo7QUFBQSxNQUxEQyxtQ0FLQyxRQUxEQSxtQ0FLQztBQUFBLE1BSkRDLG9CQUlDLFFBSkRBLG9CQUlDO0FBQUEsTUFIREMsY0FHQyxRQUhEQSxjQUdDO0FBQUEsTUFGREMsWUFFQyxRQUZEQSxZQUVDO0FBQUEsTUFEREMsUUFDQyxRQUREQSxRQUNDO0FBQ0QsTUFBTUMsMkJBQTJCLEdBQUcsb0JBQ2xDO0FBQUEsV0FBTSxvREFBaUJKLG9CQUFqQixFQUF1Qyx1REFBdkMsQ0FBTjtBQUFBLEdBRGtDLEVBRWxDLENBQUNBLG9CQUFELENBRmtDLENBQXBDO0FBS0EsTUFBTUssMENBQTBDLEdBQUcsb0JBQ2pEO0FBQUEsV0FDRSxvREFBaUJOLG1DQUFqQixFQUFzRCxzRUFBdEQsQ0FERjtBQUFBLEdBRGlELEVBR2pELENBQUNBLG1DQUFELENBSGlELENBQW5ELENBTkMsQ0FZRDs7QUFDQSxNQUFNTyxhQUFhLEdBQUcsb0JBQVE7QUFBQSxXQUFPSCxRQUFRLEdBQUdJLFNBQUgsR0FBZSwwQ0FBNEJMLFlBQTVCLENBQTlCO0FBQUEsR0FBUixFQUFrRixDQUN0R0EsWUFEc0csRUFFdEdDLFFBRnNHLENBQWxGLENBQXRCO0FBS0EsTUFBTUsscUJBQXFCLEdBQUcsb0JBQzVCO0FBQUEsV0FBTyxPQUFPUCxjQUFQLEtBQTBCLFdBQTFCLEdBQXdDO0FBQUEsYUFBYVEsZ0RBQWI7QUFBQSxLQUF4QyxHQUFzRlIsY0FBN0Y7QUFBQSxHQUQ0QixFQUU1QixDQUFDQSxjQUFELENBRjRCLENBQTlCO0FBS0EsU0FBTztBQUNMRCxJQUFBQSxvQkFBb0IsRUFBRUksMkJBRGpCO0FBRUxMLElBQUFBLG1DQUFtQyxFQUFFTSwwQ0FGaEM7QUFHTEMsSUFBQUEsYUFBYSxFQUFiQSxhQUhLO0FBSUxMLElBQUFBLGNBQWMsRUFBRU87QUFKWCxHQUFQO0FBTUQiLCJzb3VyY2VSb290IjoiYnVuZGxlOi8vLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbmNhdE1pZGRsZXdhcmUgfSBmcm9tICdib3RmcmFtZXdvcmstd2ViY2hhdC1jb21wb25lbnQnO1xuaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IGNyZWF0ZUFkYXB0aXZlQ2FyZHNBdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSBmcm9tICcuL2FkYXB0aXZlQ2FyZHMvY3JlYXRlQWRhcHRpdmVDYXJkc0F0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlJztcbmltcG9ydCBjcmVhdGVBZGFwdGl2ZUNhcmRzQXR0YWNobWVudE1pZGRsZXdhcmUgZnJvbSAnLi9hZGFwdGl2ZUNhcmRzL2NyZWF0ZUFkYXB0aXZlQ2FyZHNBdHRhY2htZW50TWlkZGxld2FyZSc7XG5pbXBvcnQgY3JlYXRlQWRhcHRpdmVDYXJkc1N0eWxlU2V0IGZyb20gJy4vYWRhcHRpdmVDYXJkcy9TdHlsZXMvY3JlYXRlQWRhcHRpdmVDYXJkc1N0eWxlU2V0JztcbmltcG9ydCBkZWZhdWx0UmVuZGVyTWFya2Rvd24gZnJvbSAnLi9yZW5kZXJNYXJrZG93bic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUNvbXBvc2VyUHJvcHMoe1xuICBhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSxcbiAgYXR0YWNobWVudE1pZGRsZXdhcmUsXG4gIHJlbmRlck1hcmtkb3duLFxuICBzdHlsZU9wdGlvbnMsXG4gIHN0eWxlU2V0XG59KSB7XG4gIGNvbnN0IHBhdGNoZWRBdHRhY2htZW50TWlkZGxld2FyZSA9IHVzZU1lbW8oXG4gICAgKCkgPT4gY29uY2F0TWlkZGxld2FyZShhdHRhY2htZW50TWlkZGxld2FyZSwgY3JlYXRlQWRhcHRpdmVDYXJkc0F0dGFjaG1lbnRNaWRkbGV3YXJlKCkpLFxuICAgIFthdHRhY2htZW50TWlkZGxld2FyZV1cbiAgKTtcblxuICBjb25zdCBwYXRjaGVkQXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmUgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBjb25jYXRNaWRkbGV3YXJlKGF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlLCBjcmVhdGVBZGFwdGl2ZUNhcmRzQXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmUoKSksXG4gICAgW2F0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlXVxuICApO1xuXG4gIC8vIFdoZW4gc3R5bGVTZXQgaXMgbm90IHNwZWNpZmllZCwgdGhlIHN0eWxlT3B0aW9ucyB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIEFkYXB0aXZlIENhcmRzIHN0eWxlU2V0IGFuZCBtZXJnZWQgaW50byB1c2VTdHlsZVNldC5cbiAgY29uc3QgZXh0cmFTdHlsZVNldCA9IHVzZU1lbW8oKCkgPT4gKHN0eWxlU2V0ID8gdW5kZWZpbmVkIDogY3JlYXRlQWRhcHRpdmVDYXJkc1N0eWxlU2V0KHN0eWxlT3B0aW9ucykpLCBbXG4gICAgc3R5bGVPcHRpb25zLFxuICAgIHN0eWxlU2V0XG4gIF0pO1xuXG4gIGNvbnN0IHBhdGNoZWRSZW5kZXJNYXJrZG93biA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHR5cGVvZiByZW5kZXJNYXJrZG93biA9PT0gJ3VuZGVmaW5lZCcgPyAoLi4uYXJncykgPT4gZGVmYXVsdFJlbmRlck1hcmtkb3duKC4uLmFyZ3MpIDogcmVuZGVyTWFya2Rvd24pLFxuICAgIFtyZW5kZXJNYXJrZG93bl1cbiAgKTtcblxuICByZXR1cm4ge1xuICAgIGF0dGFjaG1lbnRNaWRkbGV3YXJlOiBwYXRjaGVkQXR0YWNobWVudE1pZGRsZXdhcmUsXG4gICAgYXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmU6IHBhdGNoZWRBdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSxcbiAgICBleHRyYVN0eWxlU2V0LFxuICAgIHJlbmRlck1hcmtkb3duOiBwYXRjaGVkUmVuZGVyTWFya2Rvd25cbiAgfTtcbn1cbiJdfQ==