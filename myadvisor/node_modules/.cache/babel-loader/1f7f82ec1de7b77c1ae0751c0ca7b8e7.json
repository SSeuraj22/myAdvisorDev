{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CardObject = exports.ValidationResults = void 0; // Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nvar Enums = require(\"./enums\");\n\nvar strings_1 = require(\"./strings\");\n\nvar shared_1 = require(\"./shared\");\n\nvar host_capabilities_1 = require(\"./host-capabilities\");\n\nvar serialization_1 = require(\"./serialization\");\n\nvar ValidationResults =\n/** @class */\nfunction () {\n  function ValidationResults() {\n    this.allIds = {};\n    this.validationEvents = [];\n  }\n\n  ValidationResults.prototype.addFailure = function (cardObject, event, message) {\n    this.validationEvents.push({\n      phase: Enums.ValidationPhase.Validation,\n      source: cardObject,\n      event: event,\n      message: message\n    });\n  };\n\n  return ValidationResults;\n}();\n\nexports.ValidationResults = ValidationResults;\n\nvar CardObject =\n/** @class */\nfunction (_super) {\n  __extends(CardObject, _super);\n\n  function CardObject() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this; //#endregion\n\n\n    _this._shouldFallback = false;\n    return _this;\n  }\n\n  CardObject.prototype.getSchemaKey = function () {\n    return this.getJsonTypeName();\n  };\n\n  Object.defineProperty(CardObject.prototype, \"requires\", {\n    get: function () {\n      return this.getValue(CardObject.requiresProperty);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  CardObject.prototype.preProcessPropertyValue = function (property, propertyValue) {\n    var value = propertyValue === undefined ? this.getValue(property) : propertyValue;\n\n    if (shared_1.GlobalSettings.allowPreProcessingPropertyValues) {\n      var currentObject = this;\n\n      while (currentObject && !currentObject.onPreProcessPropertyValue) {\n        currentObject = currentObject.parent;\n      }\n\n      if (currentObject && currentObject.onPreProcessPropertyValue) {\n        return currentObject.onPreProcessPropertyValue(this, property, value);\n      }\n    }\n\n    return value;\n  };\n\n  CardObject.prototype.setParent = function (value) {\n    this._parent = value;\n  };\n\n  CardObject.prototype.setShouldFallback = function (value) {\n    this._shouldFallback = value;\n  };\n\n  CardObject.prototype.shouldFallback = function () {\n    return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);\n  };\n\n  CardObject.prototype.getRootObject = function () {\n    var rootObject = this;\n\n    while (rootObject.parent) {\n      rootObject = rootObject.parent;\n    }\n\n    return rootObject;\n  };\n\n  CardObject.prototype.internalValidateProperties = function (context) {\n    if (this.id) {\n      if (context.allIds.hasOwnProperty(this.id)) {\n        if (context.allIds[this.id] == 1) {\n          context.addFailure(this, Enums.ValidationEvent.DuplicateId, strings_1.Strings.errors.duplicateId(this.id));\n        }\n\n        context.allIds[this.id] += 1;\n      } else {\n        context.allIds[this.id] = 1;\n      }\n    }\n  };\n\n  CardObject.prototype.validateProperties = function () {\n    var result = new ValidationResults();\n    this.internalValidateProperties(result);\n    return result;\n  };\n\n  Object.defineProperty(CardObject.prototype, \"parent\", {\n    get: function () {\n      return this._parent;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardObject.prototype, \"renderedElement\", {\n    get: function () {\n      return this._renderedElement;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  CardObject.typeNameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"type\", undefined, undefined, undefined, function (sender) {\n    return sender.getJsonTypeName();\n  });\n  CardObject.idProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"id\");\n  CardObject.requiresProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_2, \"requires\", host_capabilities_1.HostCapabilities, new host_capabilities_1.HostCapabilities());\n\n  __decorate([serialization_1.property(CardObject.idProperty)], CardObject.prototype, \"id\", void 0);\n\n  __decorate([serialization_1.property(CardObject.requiresProperty)], CardObject.prototype, \"requires\", null);\n\n  return CardObject;\n}(serialization_1.SerializableObject);\n\nexports.CardObject = CardObject;","map":{"version":3,"sources":["../src/card-object.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CardObject = exports.ValidationResults = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar Enums = require(\"./enums\");\r\nvar strings_1 = require(\"./strings\");\r\nvar shared_1 = require(\"./shared\");\r\nvar host_capabilities_1 = require(\"./host-capabilities\");\r\nvar serialization_1 = require(\"./serialization\");\r\nvar ValidationResults = /** @class */ (function () {\r\n    function ValidationResults() {\r\n        this.allIds = {};\r\n        this.validationEvents = [];\r\n    }\r\n    ValidationResults.prototype.addFailure = function (cardObject, event, message) {\r\n        this.validationEvents.push({\r\n            phase: Enums.ValidationPhase.Validation,\r\n            source: cardObject,\r\n            event: event,\r\n            message: message\r\n        });\r\n    };\r\n    return ValidationResults;\r\n}());\r\nexports.ValidationResults = ValidationResults;\r\nvar CardObject = /** @class */ (function (_super) {\r\n    __extends(CardObject, _super);\r\n    function CardObject() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        //#endregion\r\n        _this._shouldFallback = false;\r\n        return _this;\r\n    }\r\n    CardObject.prototype.getSchemaKey = function () {\r\n        return this.getJsonTypeName();\r\n    };\r\n    Object.defineProperty(CardObject.prototype, \"requires\", {\r\n        get: function () {\r\n            return this.getValue(CardObject.requiresProperty);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CardObject.prototype.preProcessPropertyValue = function (property, propertyValue) {\r\n        var value = propertyValue === undefined ? this.getValue(property) : propertyValue;\r\n        if (shared_1.GlobalSettings.allowPreProcessingPropertyValues) {\r\n            var currentObject = this;\r\n            while (currentObject && !currentObject.onPreProcessPropertyValue) {\r\n                currentObject = currentObject.parent;\r\n            }\r\n            if (currentObject && currentObject.onPreProcessPropertyValue) {\r\n                return currentObject.onPreProcessPropertyValue(this, property, value);\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    CardObject.prototype.setParent = function (value) {\r\n        this._parent = value;\r\n    };\r\n    CardObject.prototype.setShouldFallback = function (value) {\r\n        this._shouldFallback = value;\r\n    };\r\n    CardObject.prototype.shouldFallback = function () {\r\n        return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);\r\n    };\r\n    CardObject.prototype.getRootObject = function () {\r\n        var rootObject = this;\r\n        while (rootObject.parent) {\r\n            rootObject = rootObject.parent;\r\n        }\r\n        return rootObject;\r\n    };\r\n    CardObject.prototype.internalValidateProperties = function (context) {\r\n        if (this.id) {\r\n            if (context.allIds.hasOwnProperty(this.id)) {\r\n                if (context.allIds[this.id] == 1) {\r\n                    context.addFailure(this, Enums.ValidationEvent.DuplicateId, strings_1.Strings.errors.duplicateId(this.id));\r\n                }\r\n                context.allIds[this.id] += 1;\r\n            }\r\n            else {\r\n                context.allIds[this.id] = 1;\r\n            }\r\n        }\r\n    };\r\n    CardObject.prototype.validateProperties = function () {\r\n        var result = new ValidationResults();\r\n        this.internalValidateProperties(result);\r\n        return result;\r\n    };\r\n    Object.defineProperty(CardObject.prototype, \"parent\", {\r\n        get: function () {\r\n            return this._parent;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardObject.prototype, \"renderedElement\", {\r\n        get: function () {\r\n            return this._renderedElement;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CardObject.typeNameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"type\", undefined, undefined, undefined, function (sender) {\r\n        return sender.getJsonTypeName();\r\n    });\r\n    CardObject.idProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"id\");\r\n    CardObject.requiresProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_2, \"requires\", host_capabilities_1.HostCapabilities, new host_capabilities_1.HostCapabilities());\r\n    __decorate([\r\n        serialization_1.property(CardObject.idProperty)\r\n    ], CardObject.prototype, \"id\", void 0);\r\n    __decorate([\r\n        serialization_1.property(CardObject.requiresProperty)\r\n    ], CardObject.prototype, \"requires\", null);\r\n    return CardObject;\r\n}(serialization_1.SerializableObject));\r\nexports.CardObject = CardObject;\r\n//# sourceMappingURL=card-object.js.map"]},"metadata":{},"sourceType":"script"}