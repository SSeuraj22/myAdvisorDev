{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SerializationContext = exports.GlobalRegistry = exports.AdaptiveCard = exports.ContainerWithActions = exports.ColumnSet = exports.Column = exports.Container = exports.BackgroundImage = exports.StylableCardElementContainer = exports.ActionSet = exports.ShowCardAction = exports.HttpAction = exports.HttpHeader = exports.ToggleVisibilityAction = exports.OpenUrlAction = exports.SubmitAction = exports.Action = exports.TimeInput = exports.TimeProperty = exports.DateInput = exports.NumberInput = exports.ChoiceSetInput = exports.Choice = exports.ToggleInput = exports.TextInput = exports.Input = exports.Media = exports.MediaSource = exports.ImageSet = exports.CardElementContainer = exports.Image = exports.FactSet = exports.Fact = exports.RichTextBlock = exports.TextRun = exports.TextBlock = exports.BaseTextBlock = exports.ActionProperty = exports.CardElement = void 0; // Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\nvar Enums = require(\"./enums\");\n\nvar shared_1 = require(\"./shared\");\n\nvar Utils = require(\"./utils\");\n\nvar host_config_1 = require(\"./host-config\");\n\nvar TextFormatters = require(\"./text-formatters\");\n\nvar card_object_1 = require(\"./card-object\");\n\nvar serialization_1 = require(\"./serialization\");\n\nvar registry_1 = require(\"./registry\");\n\nvar strings_1 = require(\"./strings\");\n\nvar CardElement =\n/** @class */\nfunction (_super) {\n  __extends(CardElement, _super);\n\n  function CardElement() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._truncatedDueToOverflow = false;\n    return _this;\n  }\n\n  Object.defineProperty(CardElement.prototype, \"lang\", {\n    get: function () {\n      var lang = this.getValue(CardElement.langProperty);\n\n      if (lang) {\n        return lang;\n      } else {\n        if (this.parent) {\n          return this.parent.lang;\n        } else {\n          return undefined;\n        }\n      }\n    },\n    set: function (value) {\n      this.setValue(CardElement.langProperty, value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isVisible\", {\n    get: function () {\n      return this.getValue(CardElement.isVisibleProperty);\n    },\n    set: function (value) {\n      // If the element is going to be hidden, reset any changes that were due\n      // to overflow truncation (this ensures that if the element is later\n      // un-hidden it has the right content)\n      if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && !value) {\n        this.undoOverflowTruncation();\n      }\n\n      if (this.isVisible !== value) {\n        this.setValue(CardElement.isVisibleProperty, value);\n        this.updateRenderedElementVisibility();\n\n        if (this._renderedElement) {\n          raiseElementVisibilityChangedEvent(this);\n        }\n      }\n\n      if (this._renderedElement) {\n        this._renderedElement.setAttribute(\"aria-expanded\", value.toString());\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  CardElement.prototype.internalRenderSeparator = function () {\n    var renderedSeparator = Utils.renderSeparation(this.hostConfig, {\n      spacing: this.hostConfig.getEffectiveSpacing(this.spacing),\n      lineThickness: this.separator ? this.hostConfig.separator.lineThickness : undefined,\n      lineColor: this.separator ? this.hostConfig.separator.lineColor : undefined\n    }, this.separatorOrientation);\n\n    if (shared_1.GlobalSettings.alwaysBleedSeparators && renderedSeparator && this.separatorOrientation == Enums.Orientation.Horizontal) {\n      // Adjust separator's margins if the option to always bleed separators is turned on\n      var parentContainer = this.getParentContainer();\n\n      if (parentContainer && parentContainer.getEffectivePadding()) {\n        var parentPhysicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(parentContainer.getEffectivePadding());\n        renderedSeparator.style.marginLeft = \"-\" + parentPhysicalPadding.left + \"px\";\n        renderedSeparator.style.marginRight = \"-\" + parentPhysicalPadding.right + \"px\";\n      }\n    }\n\n    return renderedSeparator;\n  };\n\n  CardElement.prototype.updateRenderedElementVisibility = function () {\n    var displayMode = this.isDesignMode() || this.isVisible ? this._defaultRenderedElementDisplayMode : \"none\";\n\n    if (this._renderedElement) {\n      if (displayMode) {\n        this._renderedElement.style.display = displayMode;\n      } else {\n        this._renderedElement.style.removeProperty(\"display\");\n      }\n    }\n\n    if (this._separatorElement) {\n      if (this.parent && this.parent.isFirstElement(this)) {\n        this._separatorElement.style.display = \"none\";\n      } else {\n        if (displayMode) {\n          this._separatorElement.style.display = displayMode;\n        } else {\n          this._separatorElement.style.removeProperty(\"display\");\n        }\n      }\n    }\n  };\n\n  CardElement.prototype.hideElementDueToOverflow = function () {\n    if (this._renderedElement && this.isVisible) {\n      this._renderedElement.style.visibility = \"hidden\";\n      this.isVisible = false;\n      raiseElementVisibilityChangedEvent(this, false);\n    }\n  };\n\n  CardElement.prototype.showElementHiddenDueToOverflow = function () {\n    if (this._renderedElement && !this.isVisible) {\n      this._renderedElement.style.removeProperty(\"visibility\");\n\n      this.isVisible = true;\n      raiseElementVisibilityChangedEvent(this, false);\n    }\n  }; // Marked private to emulate internal access\n\n\n  CardElement.prototype.handleOverflow = function (maxHeight) {\n    if (this.isVisible || this.isHiddenDueToOverflow()) {\n      var handled = this.truncateOverflow(maxHeight); // Even if we were unable to truncate the element to fit this time,\n      // it still could have been previously truncated\n\n      this._truncatedDueToOverflow = handled || this._truncatedDueToOverflow;\n\n      if (!handled) {\n        this.hideElementDueToOverflow();\n      } else if (handled && !this.isVisible) {\n        this.showElementHiddenDueToOverflow();\n      }\n    }\n  }; // Marked private to emulate internal access\n\n\n  CardElement.prototype.resetOverflow = function () {\n    var sizeChanged = false;\n\n    if (this._truncatedDueToOverflow) {\n      this.undoOverflowTruncation();\n      this._truncatedDueToOverflow = false;\n      sizeChanged = true;\n    }\n\n    if (this.isHiddenDueToOverflow()) {\n      this.showElementHiddenDueToOverflow();\n    }\n\n    return sizeChanged;\n  };\n\n  CardElement.prototype.getDefaultSerializationContext = function () {\n    return new SerializationContext();\n  };\n\n  CardElement.prototype.createPlaceholderElement = function () {\n    var styleDefinition = this.getEffectiveStyleDefinition();\n    var foregroundCssColor = Utils.stringToCssColor(styleDefinition.foregroundColors.default.subtle);\n    var element = document.createElement(\"div\");\n    element.style.border = \"1px dashed \" + foregroundCssColor;\n    element.style.padding = \"4px\";\n    element.style.minHeight = \"32px\";\n    element.style.fontSize = \"10px\";\n    element.style.color = foregroundCssColor;\n    element.innerText = \"Empty \" + this.getJsonTypeName();\n    return element;\n  };\n\n  CardElement.prototype.adjustRenderedElementSize = function (renderedElement) {\n    if (this.height === \"auto\") {\n      renderedElement.style.flex = \"0 0 auto\";\n    } else {\n      renderedElement.style.flex = \"1 1 auto\";\n    }\n  };\n\n  CardElement.prototype.isDisplayed = function () {\n    return this._renderedElement !== undefined && this.isVisible && this._renderedElement.offsetHeight > 0;\n  };\n\n  CardElement.prototype.overrideInternalRender = function () {\n    return this.internalRender();\n  };\n\n  CardElement.prototype.applyPadding = function () {\n    if (this.separatorElement) {\n      if (shared_1.GlobalSettings.alwaysBleedSeparators && this.separatorOrientation == Enums.Orientation.Horizontal && !this.isBleeding()) {\n        var padding = new shared_1.PaddingDefinition();\n        this.getImmediateSurroundingPadding(padding);\n        var physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\n        this.separatorElement.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\n        this.separatorElement.style.marginRight = \"-\" + physicalPadding.right + \"px\";\n      } else {\n        this.separatorElement.style.marginRight = \"0\";\n        this.separatorElement.style.marginLeft = \"0\";\n      }\n    }\n  };\n  /*\r\n   * Called when this element overflows the bottom of the card.\r\n   * maxHeight will be the amount of space still available on the card (0 if\r\n   * the element is fully off the card).\r\n   */\n\n\n  CardElement.prototype.truncateOverflow = function (maxHeight) {\n    // Child implementations should return true if the element handled\n    // the truncation request such that its content fits within maxHeight,\n    // false if the element should fall back to being hidden\n    return false;\n  };\n  /*\r\n   * This should reverse any changes performed in truncateOverflow().\r\n   */\n\n\n  CardElement.prototype.undoOverflowTruncation = function () {};\n\n  CardElement.prototype.getDefaultPadding = function () {\n    return new shared_1.PaddingDefinition();\n  };\n\n  CardElement.prototype.getHasBackground = function () {\n    return false;\n  };\n\n  CardElement.prototype.getPadding = function () {\n    return this._padding;\n  };\n\n  CardElement.prototype.setPadding = function (value) {\n    this._padding = value;\n  };\n\n  CardElement.prototype.shouldSerialize = function (context) {\n    return context.elementRegistry.findByName(this.getJsonTypeName()) !== undefined;\n  };\n\n  Object.defineProperty(CardElement.prototype, \"useDefaultSizing\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"allowCustomPadding\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"separatorOrientation\", {\n    get: function () {\n      return Enums.Orientation.Horizontal;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"defaultStyle\", {\n    get: function () {\n      return Enums.ContainerStyle.Default;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  CardElement.prototype.parse = function (source, context) {\n    _super.prototype.parse.call(this, source, context ? context : new SerializationContext());\n  };\n\n  CardElement.prototype.asString = function () {\n    return \"\";\n  };\n\n  CardElement.prototype.isBleeding = function () {\n    return false;\n  };\n\n  CardElement.prototype.getEffectiveStyle = function () {\n    if (this.parent) {\n      return this.parent.getEffectiveStyle();\n    }\n\n    return this.defaultStyle;\n  };\n\n  CardElement.prototype.getEffectiveStyleDefinition = function () {\n    return this.hostConfig.containerStyles.getStyleByName(this.getEffectiveStyle());\n  };\n\n  CardElement.prototype.getForbiddenActionTypes = function () {\n    return [];\n  };\n\n  CardElement.prototype.getImmediateSurroundingPadding = function (result, processTop, processRight, processBottom, processLeft) {\n    if (processTop === void 0) {\n      processTop = true;\n    }\n\n    if (processRight === void 0) {\n      processRight = true;\n    }\n\n    if (processBottom === void 0) {\n      processBottom = true;\n    }\n\n    if (processLeft === void 0) {\n      processLeft = true;\n    }\n\n    if (this.parent) {\n      var doProcessTop = processTop && this.parent.isTopElement(this);\n      var doProcessRight = processRight && this.parent.isRightMostElement(this);\n      var doProcessBottom = processBottom && this.parent.isBottomElement(this);\n      var doProcessLeft = processLeft && this.parent.isLeftMostElement(this);\n      var effectivePadding = this.parent.getEffectivePadding();\n\n      if (effectivePadding) {\n        if (doProcessTop && effectivePadding.top != Enums.Spacing.None) {\n          result.top = effectivePadding.top;\n          doProcessTop = false;\n        }\n\n        if (doProcessRight && effectivePadding.right != Enums.Spacing.None) {\n          result.right = effectivePadding.right;\n          doProcessRight = false;\n        }\n\n        if (doProcessBottom && effectivePadding.bottom != Enums.Spacing.None) {\n          result.bottom = effectivePadding.bottom;\n          doProcessBottom = false;\n        }\n\n        if (doProcessLeft && effectivePadding.left != Enums.Spacing.None) {\n          result.left = effectivePadding.left;\n          doProcessLeft = false;\n        }\n      }\n\n      if (doProcessTop || doProcessRight || doProcessBottom || doProcessLeft) {\n        this.parent.getImmediateSurroundingPadding(result, doProcessTop, doProcessRight, doProcessBottom, doProcessLeft);\n      }\n    }\n  };\n\n  CardElement.prototype.getActionCount = function () {\n    return 0;\n  };\n\n  CardElement.prototype.getActionAt = function (index) {\n    throw new Error(strings_1.Strings.errors.indexOutOfRange(index));\n  };\n\n  CardElement.prototype.remove = function () {\n    if (this.parent && this.parent instanceof CardElementContainer) {\n      return this.parent.removeItem(this);\n    }\n\n    return false;\n  };\n\n  CardElement.prototype.render = function () {\n    this._renderedElement = this.overrideInternalRender();\n    this._separatorElement = this.internalRenderSeparator();\n\n    if (this._renderedElement) {\n      if (this.id) {\n        this._renderedElement.id = this.id;\n      }\n\n      if (this.customCssSelector) {\n        this._renderedElement.classList.add(this.customCssSelector);\n      }\n\n      this._renderedElement.style.boxSizing = \"border-box\";\n      this._defaultRenderedElementDisplayMode = this._renderedElement.style.display ? this._renderedElement.style.display : undefined;\n      this.adjustRenderedElementSize(this._renderedElement);\n      this.updateLayout(false);\n    } else if (this.isDesignMode()) {\n      this._renderedElement = this.createPlaceholderElement();\n    }\n\n    return this._renderedElement;\n  };\n\n  CardElement.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = true;\n    }\n\n    this.updateRenderedElementVisibility();\n    this.applyPadding();\n  };\n\n  CardElement.prototype.indexOf = function (cardElement) {\n    return -1;\n  };\n\n  CardElement.prototype.isDesignMode = function () {\n    var rootElement = this.getRootElement();\n    return rootElement instanceof AdaptiveCard && rootElement.designMode;\n  };\n\n  CardElement.prototype.isFirstElement = function (element) {\n    return true;\n  };\n\n  CardElement.prototype.isLastElement = function (element) {\n    return true;\n  };\n\n  CardElement.prototype.isAtTheVeryLeft = function () {\n    return this.parent ? this.parent.isLeftMostElement(this) && this.parent.isAtTheVeryLeft() : true;\n  };\n\n  CardElement.prototype.isAtTheVeryRight = function () {\n    return this.parent ? this.parent.isRightMostElement(this) && this.parent.isAtTheVeryRight() : true;\n  };\n\n  CardElement.prototype.isAtTheVeryTop = function () {\n    return this.parent ? this.parent.isFirstElement(this) && this.parent.isAtTheVeryTop() : true;\n  };\n\n  CardElement.prototype.isAtTheVeryBottom = function () {\n    return this.parent ? this.parent.isLastElement(this) && this.parent.isAtTheVeryBottom() : true;\n  };\n\n  CardElement.prototype.isBleedingAtTop = function () {\n    return false;\n  };\n\n  CardElement.prototype.isBleedingAtBottom = function () {\n    return false;\n  };\n\n  CardElement.prototype.isLeftMostElement = function (element) {\n    return true;\n  };\n\n  CardElement.prototype.isRightMostElement = function (element) {\n    return true;\n  };\n\n  CardElement.prototype.isTopElement = function (element) {\n    return this.isFirstElement(element);\n  };\n\n  CardElement.prototype.isBottomElement = function (element) {\n    return this.isLastElement(element);\n  };\n\n  CardElement.prototype.isHiddenDueToOverflow = function () {\n    return this._renderedElement !== undefined && this._renderedElement.style.visibility == 'hidden';\n  };\n\n  CardElement.prototype.getRootElement = function () {\n    return this.getRootObject();\n  };\n\n  CardElement.prototype.getParentContainer = function () {\n    var currentElement = this.parent;\n\n    while (currentElement) {\n      if (currentElement instanceof Container) {\n        return currentElement;\n      }\n\n      currentElement = currentElement.parent;\n    }\n\n    return undefined;\n  };\n\n  CardElement.prototype.getAllInputs = function (processActions) {\n    if (processActions === void 0) {\n      processActions = true;\n    }\n\n    return [];\n  };\n\n  CardElement.prototype.getResourceInformation = function () {\n    return [];\n  };\n\n  CardElement.prototype.getElementById = function (id) {\n    return this.id === id ? this : undefined;\n  };\n\n  CardElement.prototype.getActionById = function (id) {\n    return undefined;\n  };\n\n  CardElement.prototype.getEffectivePadding = function () {\n    var padding = this.getPadding();\n    return padding && this.allowCustomPadding ? padding : this.getDefaultPadding();\n  };\n\n  Object.defineProperty(CardElement.prototype, \"hostConfig\", {\n    get: function () {\n      if (this._hostConfig) {\n        return this._hostConfig;\n      } else {\n        if (this.parent) {\n          return this.parent.hostConfig;\n        } else {\n          return host_config_1.defaultHostConfig;\n        }\n      }\n    },\n    set: function (value) {\n      this._hostConfig = value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"index\", {\n    get: function () {\n      if (this.parent) {\n        return this.parent.indexOf(this);\n      } else {\n        return 0;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isInteractive\", {\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isStandalone\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"isInline\", {\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"hasVisibleSeparator\", {\n    get: function () {\n      if (this.parent && this.separatorElement) {\n        return !this.parent.isFirstElement(this) && (this.isVisible || this.isDesignMode());\n      } else {\n        return false;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"separatorElement\", {\n    get: function () {\n      return this._separatorElement;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CardElement.prototype, \"parent\", {\n    get: function () {\n      return this._parent;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  CardElement.langProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"lang\", true, /^[a-z]{2,3}$/ig);\n  CardElement.isVisibleProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"isVisible\", true);\n  CardElement.separatorProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"separator\", false);\n  CardElement.heightProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_1, \"height\", [{\n    value: \"auto\"\n  }, {\n    value: \"stretch\"\n  }], \"auto\");\n  CardElement.horizontalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"horizontalAlignment\", Enums.HorizontalAlignment, Enums.HorizontalAlignment.Left);\n  CardElement.spacingProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"spacing\", Enums.Spacing, Enums.Spacing.Default);\n\n  __decorate([serialization_1.property(CardElement.horizontalAlignmentProperty)], CardElement.prototype, \"horizontalAlignment\", void 0);\n\n  __decorate([serialization_1.property(CardElement.spacingProperty)], CardElement.prototype, \"spacing\", void 0);\n\n  __decorate([serialization_1.property(CardElement.separatorProperty)], CardElement.prototype, \"separator\", void 0);\n\n  __decorate([serialization_1.property(CardElement.heightProperty)], CardElement.prototype, \"height\", void 0);\n\n  __decorate([serialization_1.property(CardElement.langProperty)], CardElement.prototype, \"lang\", null);\n\n  __decorate([serialization_1.property(CardElement.isVisibleProperty)], CardElement.prototype, \"isVisible\", null);\n\n  return CardElement;\n}(card_object_1.CardObject);\n\nexports.CardElement = CardElement;\n\nvar ActionProperty =\n/** @class */\nfunction (_super) {\n  __extends(ActionProperty, _super);\n\n  function ActionProperty(targetVersion, name, forbiddenActionTypes) {\n    if (forbiddenActionTypes === void 0) {\n      forbiddenActionTypes = [];\n    }\n\n    var _this = _super.call(this, targetVersion, name, undefined) || this;\n\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    _this.forbiddenActionTypes = forbiddenActionTypes;\n    return _this;\n  }\n\n  ActionProperty.prototype.parse = function (sender, source, context) {\n    var parent = sender;\n    return context.parseAction(parent, source[this.name], this.forbiddenActionTypes, parent.isDesignMode());\n  };\n\n  ActionProperty.prototype.toJSON = function (sender, target, value, context) {\n    context.serializeValue(target, this.name, value ? value.toJSON(context) : undefined);\n  };\n\n  return ActionProperty;\n}(serialization_1.PropertyDefinition);\n\nexports.ActionProperty = ActionProperty;\n\nvar BaseTextBlock =\n/** @class */\nfunction (_super) {\n  __extends(BaseTextBlock, _super);\n\n  function BaseTextBlock(text) {\n    var _this = _super.call(this) || this;\n\n    _this.size = Enums.TextSize.Default;\n    _this.weight = Enums.TextWeight.Default;\n    _this.color = Enums.TextColor.Default;\n    _this.isSubtle = false;\n    _this.ariaHidden = false;\n\n    if (text) {\n      _this.text = text;\n    }\n\n    return _this;\n  }\n\n  BaseTextBlock.prototype.populateSchema = function (schema) {\n    _super.prototype.populateSchema.call(this, schema); // selectAction is declared on BaseTextBlock but is only exposed on TextRun,\n    // so the property is removed from the BaseTextBlock schema.\n\n\n    schema.remove(BaseTextBlock.selectActionProperty);\n  };\n\n  Object.defineProperty(BaseTextBlock.prototype, \"text\", {\n    get: function () {\n      return this.getValue(BaseTextBlock.textProperty);\n    },\n    set: function (value) {\n      this.setText(value);\n    },\n    enumerable: false,\n    configurable: true\n  }); //#endregion\n\n  BaseTextBlock.prototype.getFontSize = function (fontType) {\n    switch (this.size) {\n      case Enums.TextSize.Small:\n        return fontType.fontSizes.small;\n\n      case Enums.TextSize.Medium:\n        return fontType.fontSizes.medium;\n\n      case Enums.TextSize.Large:\n        return fontType.fontSizes.large;\n\n      case Enums.TextSize.ExtraLarge:\n        return fontType.fontSizes.extraLarge;\n\n      default:\n        return fontType.fontSizes.default;\n    }\n  };\n\n  BaseTextBlock.prototype.getColorDefinition = function (colorSet, color) {\n    switch (color) {\n      case Enums.TextColor.Accent:\n        return colorSet.accent;\n\n      case Enums.TextColor.Dark:\n        return colorSet.dark;\n\n      case Enums.TextColor.Light:\n        return colorSet.light;\n\n      case Enums.TextColor.Good:\n        return colorSet.good;\n\n      case Enums.TextColor.Warning:\n        return colorSet.warning;\n\n      case Enums.TextColor.Attention:\n        return colorSet.attention;\n\n      default:\n        return colorSet.default;\n    }\n  };\n\n  BaseTextBlock.prototype.setText = function (value) {\n    this.setValue(BaseTextBlock.textProperty, value);\n  };\n\n  BaseTextBlock.prototype.init = function (textDefinition) {\n    this.size = textDefinition.size;\n    this.weight = textDefinition.weight;\n    this.color = textDefinition.color;\n    this.isSubtle = textDefinition.isSubtle;\n  };\n\n  BaseTextBlock.prototype.asString = function () {\n    return this.text;\n  };\n\n  BaseTextBlock.prototype.applyStylesTo = function (targetElement) {\n    var fontType = this.hostConfig.getFontTypeDefinition(this.fontType);\n\n    if (fontType.fontFamily) {\n      targetElement.style.fontFamily = fontType.fontFamily;\n    }\n\n    var fontSize;\n\n    switch (this.size) {\n      case Enums.TextSize.Small:\n        fontSize = fontType.fontSizes.small;\n        break;\n\n      case Enums.TextSize.Medium:\n        fontSize = fontType.fontSizes.medium;\n        break;\n\n      case Enums.TextSize.Large:\n        fontSize = fontType.fontSizes.large;\n        break;\n\n      case Enums.TextSize.ExtraLarge:\n        fontSize = fontType.fontSizes.extraLarge;\n        break;\n\n      default:\n        fontSize = fontType.fontSizes.default;\n        break;\n    }\n\n    targetElement.style.fontSize = fontSize + \"px\";\n    var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\n    targetElement.style.color = Utils.stringToCssColor(this.isSubtle ? colorDefinition.subtle : colorDefinition.default);\n    var fontWeight;\n\n    switch (this.weight) {\n      case Enums.TextWeight.Lighter:\n        fontWeight = fontType.fontWeights.lighter;\n        break;\n\n      case Enums.TextWeight.Bolder:\n        fontWeight = fontType.fontWeights.bolder;\n        break;\n\n      default:\n        fontWeight = fontType.fontWeights.default;\n        break;\n    }\n\n    targetElement.style.fontWeight = fontWeight.toString();\n\n    if (this.ariaHidden) {\n      targetElement.setAttribute(\"aria-hidden\", \"true\");\n    }\n  };\n\n  Object.defineProperty(BaseTextBlock.prototype, \"effectiveColor\", {\n    get: function () {\n      return this.color ? this.color : Enums.TextColor.Default;\n    },\n    enumerable: false,\n    configurable: true\n  }); //#region Schema\n\n  BaseTextBlock.textProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"text\", true);\n  BaseTextBlock.sizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"size\", Enums.TextSize, Enums.TextSize.Default);\n  BaseTextBlock.weightProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"weight\", Enums.TextWeight, Enums.TextWeight.Default);\n  BaseTextBlock.colorProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"color\", Enums.TextColor, Enums.TextColor.Default);\n  BaseTextBlock.isSubtleProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"isSubtle\", false);\n  BaseTextBlock.fontTypeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"fontType\", Enums.FontType);\n  BaseTextBlock.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_1, \"selectAction\", [\"Action.ShowCard\"]);\n\n  __decorate([serialization_1.property(BaseTextBlock.sizeProperty)], BaseTextBlock.prototype, \"size\", void 0);\n\n  __decorate([serialization_1.property(BaseTextBlock.weightProperty)], BaseTextBlock.prototype, \"weight\", void 0);\n\n  __decorate([serialization_1.property(BaseTextBlock.colorProperty)], BaseTextBlock.prototype, \"color\", void 0);\n\n  __decorate([serialization_1.property(BaseTextBlock.fontTypeProperty)], BaseTextBlock.prototype, \"fontType\", void 0);\n\n  __decorate([serialization_1.property(BaseTextBlock.isSubtleProperty)], BaseTextBlock.prototype, \"isSubtle\", void 0);\n\n  __decorate([serialization_1.property(BaseTextBlock.textProperty)], BaseTextBlock.prototype, \"text\", null);\n\n  __decorate([serialization_1.property(BaseTextBlock.selectActionProperty)], BaseTextBlock.prototype, \"selectAction\", void 0);\n\n  return BaseTextBlock;\n}(CardElement);\n\nexports.BaseTextBlock = BaseTextBlock;\n\nvar TextBlock =\n/** @class */\nfunction (_super) {\n  __extends(TextBlock, _super);\n\n  function TextBlock() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.wrap = false;\n    _this._treatAsPlainText = true;\n    _this.useMarkdown = true;\n    return _this;\n  }\n\n  TextBlock.prototype.restoreOriginalContent = function () {\n    if (this.renderedElement !== undefined) {\n      if (this.maxLines && this.maxLines > 0) {\n        this.renderedElement.style.maxHeight = this._computedLineHeight * this.maxLines + \"px\";\n      }\n\n      this.renderedElement.innerHTML = this._originalInnerHtml;\n    }\n  };\n\n  TextBlock.prototype.truncateIfSupported = function (maxHeight) {\n    if (this.renderedElement !== undefined) {\n      // For now, only truncate TextBlocks that contain just a single\n      // paragraph -- since the maxLines calculation doesn't take into\n      // account Markdown lists\n      var children = this.renderedElement.children;\n      var isTextOnly = !children.length;\n      var truncationSupported = isTextOnly || children.length == 1 && children[0].tagName.toLowerCase() == 'p';\n\n      if (truncationSupported) {\n        var element = isTextOnly ? this.renderedElement : children[0];\n        Utils.truncate(element, maxHeight, this._computedLineHeight);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  TextBlock.prototype.setText = function (value) {\n    _super.prototype.setText.call(this, value);\n\n    this._processedText = undefined;\n  };\n\n  TextBlock.prototype.internalRender = function () {\n    var _this = this;\n\n    this._processedText = undefined;\n\n    if (this.text) {\n      var preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);\n      var hostConfig = this.hostConfig;\n      var element = void 0;\n\n      if (this.forElementId) {\n        var labelElement = document.createElement(\"label\");\n        labelElement.htmlFor = this.forElementId;\n        element = labelElement;\n      } else {\n        element = document.createElement(\"div\");\n      }\n\n      element.classList.add(hostConfig.makeCssClassName(\"ac-textBlock\"));\n      element.style.overflow = \"hidden\";\n      this.applyStylesTo(element);\n\n      if (this.selectAction) {\n        element.onclick = function (e) {\n          e.preventDefault();\n          e.cancelBubble = true;\n\n          if (_this.selectAction) {\n            _this.selectAction.execute();\n          }\n        };\n\n        if (hostConfig.supportsInteractivity) {\n          element.tabIndex = 0;\n          element.setAttribute(\"role\", this.selectAction.getAriaRole());\n\n          if (this.selectAction.title) {\n            element.setAttribute(\"aria-label\", this.selectAction.title);\n            element.title = this.selectAction.title;\n          }\n\n          element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\n        }\n      }\n\n      if (!this._processedText) {\n        this._treatAsPlainText = true;\n        var formattedText = TextFormatters.formatText(this.lang, preProcessedText);\n\n        if (this.useMarkdown && formattedText) {\n          if (shared_1.GlobalSettings.allowMarkForTextHighlighting) {\n            formattedText = formattedText.replace(/<mark>/g, \"===\").replace(/<\\/mark>/g, \"/==/\");\n          }\n\n          var markdownProcessingResult = AdaptiveCard.applyMarkdown(formattedText);\n\n          if (markdownProcessingResult.didProcess && markdownProcessingResult.outputHtml) {\n            this._processedText = markdownProcessingResult.outputHtml;\n            this._treatAsPlainText = false; // Only process <mark> tag if markdown processing was applied because\n            // markdown processing is also responsible for sanitizing the input string\n\n            if (shared_1.GlobalSettings.allowMarkForTextHighlighting && this._processedText) {\n              var markStyle = \"\";\n              var effectiveStyle = this.getEffectiveStyleDefinition();\n\n              if (effectiveStyle.highlightBackgroundColor) {\n                markStyle += \"background-color: \" + effectiveStyle.highlightBackgroundColor + \";\";\n              }\n\n              if (effectiveStyle.highlightForegroundColor) {\n                markStyle += \"color: \" + effectiveStyle.highlightForegroundColor + \";\";\n              }\n\n              if (markStyle) {\n                markStyle = 'style=\"' + markStyle + '\"';\n              }\n\n              this._processedText = this._processedText.replace(/===/g, \"<mark \" + markStyle + \">\").replace(/\\/==\\//g, \"</mark>\");\n            }\n          } else {\n            this._processedText = formattedText;\n            this._treatAsPlainText = true;\n          }\n        } else {\n          this._processedText = formattedText;\n          this._treatAsPlainText = true;\n        }\n      }\n\n      if (!this._processedText) {\n        this._processedText = \"\";\n      }\n\n      if (this._treatAsPlainText) {\n        element.innerText = this._processedText;\n      } else {\n        element.innerHTML = this._processedText;\n      }\n\n      if (element.firstElementChild instanceof HTMLElement) {\n        var firstElementChild = element.firstElementChild;\n        firstElementChild.style.marginTop = \"0px\";\n        firstElementChild.style.width = \"100%\";\n\n        if (!this.wrap) {\n          firstElementChild.style.overflow = \"hidden\";\n          firstElementChild.style.textOverflow = \"ellipsis\";\n        }\n      }\n\n      if (element.lastElementChild instanceof HTMLElement) {\n        element.lastElementChild.style.marginBottom = \"0px\";\n      }\n\n      var anchors = element.getElementsByTagName(\"a\");\n\n      for (var i = 0; i < anchors.length; i++) {\n        var anchor = anchors[i];\n        anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\n        anchor.target = \"_blank\";\n\n        anchor.onclick = function (e) {\n          if (raiseAnchorClickedEvent(_this, e.target)) {\n            e.preventDefault();\n            e.cancelBubble = true;\n          }\n        };\n      }\n\n      if (this.wrap) {\n        element.style.wordWrap = \"break-word\";\n\n        if (this.maxLines && this.maxLines > 0) {\n          element.style.maxHeight = this._computedLineHeight * this.maxLines + \"px\";\n          element.style.overflow = \"hidden\";\n        }\n      } else {\n        element.style.whiteSpace = \"nowrap\";\n        element.style.textOverflow = \"ellipsis\";\n      }\n\n      if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation || shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {\n        this._originalInnerHtml = element.innerHTML;\n      }\n\n      return element;\n    } else {\n      return undefined;\n    }\n  };\n\n  TextBlock.prototype.truncateOverflow = function (maxHeight) {\n    if (maxHeight >= this._computedLineHeight) {\n      return this.truncateIfSupported(maxHeight);\n    }\n\n    return false;\n  };\n\n  TextBlock.prototype.undoOverflowTruncation = function () {\n    this.restoreOriginalContent();\n\n    if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines) {\n      var maxHeight = this._computedLineHeight * this.maxLines;\n      this.truncateIfSupported(maxHeight);\n    }\n  };\n\n  TextBlock.prototype.applyStylesTo = function (targetElement) {\n    _super.prototype.applyStylesTo.call(this, targetElement);\n\n    var parentContainer = this.getParentContainer();\n    var isRtl = parentContainer ? parentContainer.isRtl() : false;\n\n    switch (this.horizontalAlignment) {\n      case Enums.HorizontalAlignment.Center:\n        targetElement.style.textAlign = \"center\";\n        break;\n\n      case Enums.HorizontalAlignment.Right:\n        targetElement.style.textAlign = isRtl ? \"left\" : \"right\";\n        break;\n\n      default:\n        targetElement.style.textAlign = isRtl ? \"right\" : \"left\";\n        break;\n    }\n\n    var lineHeights = this.hostConfig.lineHeights;\n\n    if (lineHeights) {\n      switch (this.size) {\n        case Enums.TextSize.Small:\n          this._computedLineHeight = lineHeights.small;\n          break;\n\n        case Enums.TextSize.Medium:\n          this._computedLineHeight = lineHeights.medium;\n          break;\n\n        case Enums.TextSize.Large:\n          this._computedLineHeight = lineHeights.large;\n          break;\n\n        case Enums.TextSize.ExtraLarge:\n          this._computedLineHeight = lineHeights.extraLarge;\n          break;\n\n        default:\n          this._computedLineHeight = lineHeights.default;\n          break;\n      }\n    } else {\n      // Looks like 1.33 is the magic number to compute line-height\n      // from font size.\n      this._computedLineHeight = this.getFontSize(this.hostConfig.getFontTypeDefinition(this.fontType)) * 1.33;\n    }\n\n    targetElement.style.lineHeight = this._computedLineHeight + \"px\";\n  };\n\n  TextBlock.prototype.getJsonTypeName = function () {\n    return \"TextBlock\";\n  };\n\n  TextBlock.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = false;\n    }\n\n    _super.prototype.updateLayout.call(this, processChildren);\n\n    if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines && this.isDisplayed()) {\n      // Reset the element's innerHTML in case the available room for\n      // content has increased\n      this.restoreOriginalContent();\n      this.truncateIfSupported(this._computedLineHeight * this.maxLines);\n    }\n  };\n\n  TextBlock.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"wrap\", false);\n  TextBlock.maxLinesProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"maxLines\");\n\n  __decorate([serialization_1.property(TextBlock.wrapProperty)], TextBlock.prototype, \"wrap\", void 0);\n\n  __decorate([serialization_1.property(TextBlock.maxLinesProperty)], TextBlock.prototype, \"maxLines\", void 0);\n\n  return TextBlock;\n}(BaseTextBlock);\n\nexports.TextBlock = TextBlock;\n\nvar TextRun =\n/** @class */\nfunction (_super) {\n  __extends(TextRun, _super);\n\n  function TextRun() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.italic = false;\n    _this.strikethrough = false;\n    _this.highlight = false;\n    _this.underline = false;\n    return _this;\n  }\n\n  TextRun.prototype.populateSchema = function (schema) {\n    _super.prototype.populateSchema.call(this, schema);\n\n    schema.add(BaseTextBlock.selectActionProperty);\n  }; //#endregion\n\n\n  TextRun.prototype.internalRender = function () {\n    var _this = this;\n\n    if (this.text) {\n      var preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);\n      var hostConfig = this.hostConfig;\n      var formattedText = TextFormatters.formatText(this.lang, preProcessedText);\n\n      if (!formattedText) {\n        formattedText = \"\";\n      }\n\n      var element = document.createElement(\"span\");\n      element.classList.add(hostConfig.makeCssClassName(\"ac-textRun\"));\n      this.applyStylesTo(element);\n\n      if (this.selectAction && hostConfig.supportsInteractivity) {\n        var anchor = document.createElement(\"a\");\n        anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\n        var href = this.selectAction.getHref();\n        anchor.href = href ? href : \"\";\n        anchor.target = \"_blank\";\n\n        anchor.onclick = function (e) {\n          e.preventDefault();\n          e.cancelBubble = true;\n\n          if (_this.selectAction) {\n            _this.selectAction.execute();\n          }\n        };\n\n        if (this.selectAction.title) {\n          anchor.setAttribute(\"aria-label\", this.selectAction.title);\n          anchor.title = this.selectAction.title;\n        }\n\n        anchor.innerText = formattedText;\n        element.appendChild(anchor);\n      } else {\n        element.innerText = formattedText;\n      }\n\n      return element;\n    } else {\n      return undefined;\n    }\n  };\n\n  TextRun.prototype.applyStylesTo = function (targetElement) {\n    _super.prototype.applyStylesTo.call(this, targetElement);\n\n    if (this.italic) {\n      targetElement.style.fontStyle = \"italic\";\n    }\n\n    if (this.strikethrough) {\n      targetElement.style.textDecoration = \"line-through\";\n    }\n\n    if (this.highlight) {\n      var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\n      targetElement.style.backgroundColor = Utils.stringToCssColor(this.isSubtle ? colorDefinition.highlightColors.subtle : colorDefinition.highlightColors.default);\n    }\n\n    if (this.underline) {\n      targetElement.style.textDecoration = \"underline\";\n    }\n  };\n\n  TextRun.prototype.getJsonTypeName = function () {\n    return \"TextRun\";\n  };\n\n  Object.defineProperty(TextRun.prototype, \"isStandalone\", {\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(TextRun.prototype, \"isInline\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  TextRun.italicProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"italic\", false);\n  TextRun.strikethroughProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"strikethrough\", false);\n  TextRun.highlightProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"highlight\", false);\n  TextRun.underlineProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, \"underline\", false);\n\n  __decorate([serialization_1.property(TextRun.italicProperty)], TextRun.prototype, \"italic\", void 0);\n\n  __decorate([serialization_1.property(TextRun.strikethroughProperty)], TextRun.prototype, \"strikethrough\", void 0);\n\n  __decorate([serialization_1.property(TextRun.highlightProperty)], TextRun.prototype, \"highlight\", void 0);\n\n  __decorate([serialization_1.property(TextRun.underlineProperty)], TextRun.prototype, \"underline\", void 0);\n\n  return TextRun;\n}(BaseTextBlock);\n\nexports.TextRun = TextRun;\n\nvar RichTextBlock =\n/** @class */\nfunction (_super) {\n  __extends(RichTextBlock, _super);\n\n  function RichTextBlock() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._inlines = [];\n    return _this;\n  }\n\n  RichTextBlock.prototype.internalAddInline = function (inline, forceAdd) {\n    if (forceAdd === void 0) {\n      forceAdd = false;\n    }\n\n    if (!inline.isInline) {\n      throw new Error(strings_1.Strings.errors.elementCannotBeUsedAsInline());\n    }\n\n    var doAdd = inline.parent === undefined || forceAdd;\n\n    if (!doAdd && inline.parent != this) {\n      throw new Error(strings_1.Strings.errors.inlineAlreadyParented());\n    } else {\n      inline.setParent(this);\n\n      this._inlines.push(inline);\n    }\n  };\n\n  RichTextBlock.prototype.internalParse = function (source, context) {\n    _super.prototype.internalParse.call(this, source, context);\n\n    this._inlines = [];\n\n    if (Array.isArray(source[\"inlines\"])) {\n      for (var _i = 0, _a = source[\"inlines\"]; _i < _a.length; _i++) {\n        var jsonInline = _a[_i];\n        var inline = void 0;\n\n        if (typeof jsonInline === \"string\") {\n          var textRun = new TextRun();\n          textRun.text = jsonInline;\n          inline = textRun;\n        } else {\n          // No fallback for inlines in 1.2\n          inline = context.parseElement(this, jsonInline, false);\n        }\n\n        if (inline) {\n          this.internalAddInline(inline, true);\n        }\n      }\n    }\n  };\n\n  RichTextBlock.prototype.internalToJSON = function (target, context) {\n    _super.prototype.internalToJSON.call(this, target, context);\n\n    if (this._inlines.length > 0) {\n      var jsonInlines = [];\n\n      for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\n        var inline = _a[_i];\n        jsonInlines.push(inline.toJSON(context));\n      }\n\n      context.serializeValue(target, \"inlines\", jsonInlines);\n    }\n  };\n\n  RichTextBlock.prototype.internalRender = function () {\n    if (this._inlines.length > 0) {\n      var element = void 0;\n\n      if (this.forElementId) {\n        var labelElement = document.createElement(\"label\");\n        labelElement.htmlFor = this.forElementId;\n        element = labelElement;\n      } else {\n        element = document.createElement(\"div\");\n      }\n\n      element.className = this.hostConfig.makeCssClassName(\"ac-richTextBlock\");\n      var parentContainer = this.getParentContainer();\n      var isRtl = parentContainer ? parentContainer.isRtl() : false;\n\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.style.textAlign = \"center\";\n          break;\n\n        case Enums.HorizontalAlignment.Right:\n          element.style.textAlign = isRtl ? \"left\" : \"right\";\n          break;\n\n        default:\n          element.style.textAlign = isRtl ? \"right\" : \"left\";\n          break;\n      }\n\n      var renderedInlines = 0;\n\n      for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\n        var inline = _a[_i];\n        var renderedInline = inline.render();\n\n        if (renderedInline) {\n          element.appendChild(renderedInline);\n          renderedInlines++;\n        }\n      }\n\n      if (renderedInlines > 0) {\n        return element;\n      }\n    }\n\n    return undefined;\n  };\n\n  RichTextBlock.prototype.asString = function () {\n    var result = \"\";\n\n    for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\n      var inline = _a[_i];\n      result += inline.asString();\n    }\n\n    return result;\n  };\n\n  RichTextBlock.prototype.getJsonTypeName = function () {\n    return \"RichTextBlock\";\n  };\n\n  RichTextBlock.prototype.getInlineCount = function () {\n    return this._inlines.length;\n  };\n\n  RichTextBlock.prototype.getInlineAt = function (index) {\n    if (index >= 0 && index < this._inlines.length) {\n      return this._inlines[index];\n    } else {\n      throw new Error(strings_1.Strings.errors.indexOutOfRange(index));\n    }\n  };\n\n  RichTextBlock.prototype.addInline = function (inline) {\n    if (typeof inline === \"string\") {\n      this.internalAddInline(new TextRun(inline));\n    } else {\n      this.internalAddInline(inline);\n    }\n  };\n\n  RichTextBlock.prototype.removeInline = function (inline) {\n    var index = this._inlines.indexOf(inline);\n\n    if (index >= 0) {\n      this._inlines[index].setParent(undefined);\n\n      this._inlines.splice(index, 1);\n\n      return true;\n    }\n\n    return false;\n  };\n\n  return RichTextBlock;\n}(CardElement);\n\nexports.RichTextBlock = RichTextBlock;\n\nvar Fact =\n/** @class */\nfunction (_super) {\n  __extends(Fact, _super);\n\n  function Fact(name, value) {\n    var _this = _super.call(this) || this;\n\n    _this.name = name;\n    _this.value = value;\n    return _this;\n  } //#endregion\n\n\n  Fact.prototype.getSchemaKey = function () {\n    return \"Fact\";\n  }; //#region Schema\n\n\n  Fact.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\n  Fact.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\n\n  __decorate([serialization_1.property(Fact.titleProperty)], Fact.prototype, \"name\", void 0);\n\n  __decorate([serialization_1.property(Fact.valueProperty)], Fact.prototype, \"value\", void 0);\n\n  return Fact;\n}(serialization_1.SerializableObject);\n\nexports.Fact = Fact;\n\nvar FactSet =\n/** @class */\nfunction (_super) {\n  __extends(FactSet, _super);\n\n  function FactSet() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(FactSet.prototype, \"useDefaultSizing\", {\n    //#endregion\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  FactSet.prototype.internalRender = function () {\n    var element = undefined;\n    var hostConfig = this.hostConfig;\n\n    if (this.facts.length > 0) {\n      element = document.createElement(\"table\");\n      element.style.borderWidth = \"0px\";\n      element.style.borderSpacing = \"0px\";\n      element.style.borderStyle = \"none\";\n      element.style.borderCollapse = \"collapse\";\n      element.style.display = \"block\";\n      element.style.overflow = \"hidden\";\n      element.classList.add(hostConfig.makeCssClassName(\"ac-factset\"));\n      element.setAttribute(\"role\", \"presentation\");\n\n      for (var i = 0; i < this.facts.length; i++) {\n        var trElement = document.createElement(\"tr\");\n\n        if (i > 0) {\n          trElement.style.marginTop = hostConfig.factSet.spacing + \"px\";\n        } // Title column\n\n\n        var tdElement = document.createElement(\"td\");\n        tdElement.style.padding = \"0\";\n        tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-title\"));\n\n        if (hostConfig.factSet.title.maxWidth) {\n          tdElement.style.maxWidth = hostConfig.factSet.title.maxWidth + \"px\";\n        }\n\n        tdElement.style.verticalAlign = \"top\";\n        var textBlock = new TextBlock();\n        textBlock.setParent(this);\n        textBlock.text = !this.facts[i].name && this.isDesignMode() ? \"Title\" : this.facts[i].name;\n        textBlock.size = hostConfig.factSet.title.size;\n        textBlock.color = hostConfig.factSet.title.color;\n        textBlock.isSubtle = hostConfig.factSet.title.isSubtle;\n        textBlock.weight = hostConfig.factSet.title.weight;\n        textBlock.wrap = hostConfig.factSet.title.wrap;\n        textBlock.spacing = Enums.Spacing.None;\n        Utils.appendChild(tdElement, textBlock.render());\n        Utils.appendChild(trElement, tdElement); // Spacer column\n\n        tdElement = document.createElement(\"td\");\n        tdElement.style.width = \"10px\";\n        Utils.appendChild(trElement, tdElement); // Value column\n\n        tdElement = document.createElement(\"td\");\n        tdElement.style.padding = \"0\";\n        tdElement.style.verticalAlign = \"top\";\n        tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-value\"));\n        textBlock = new TextBlock();\n        textBlock.setParent(this);\n        textBlock.text = this.facts[i].value;\n        textBlock.size = hostConfig.factSet.value.size;\n        textBlock.color = hostConfig.factSet.value.color;\n        textBlock.isSubtle = hostConfig.factSet.value.isSubtle;\n        textBlock.weight = hostConfig.factSet.value.weight;\n        textBlock.wrap = hostConfig.factSet.value.wrap;\n        textBlock.spacing = Enums.Spacing.None;\n        Utils.appendChild(tdElement, textBlock.render());\n        Utils.appendChild(trElement, tdElement);\n        Utils.appendChild(element, trElement);\n      }\n    }\n\n    return element;\n  };\n\n  FactSet.prototype.getJsonTypeName = function () {\n    return \"FactSet\";\n  }; //#region Schema\n\n\n  FactSet.factsProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"facts\", Fact);\n\n  __decorate([serialization_1.property(FactSet.factsProperty)], FactSet.prototype, \"facts\", void 0);\n\n  return FactSet;\n}(CardElement);\n\nexports.FactSet = FactSet;\n\nvar ImageDimensionProperty =\n/** @class */\nfunction (_super) {\n  __extends(ImageDimensionProperty, _super);\n\n  function ImageDimensionProperty(targetVersion, name, internalName, fallbackProperty) {\n    var _this = _super.call(this, targetVersion, name) || this;\n\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    _this.internalName = internalName;\n    _this.fallbackProperty = fallbackProperty;\n    return _this;\n  }\n\n  ImageDimensionProperty.prototype.getInternalName = function () {\n    return this.internalName;\n  };\n\n  ImageDimensionProperty.prototype.parse = function (sender, source, context) {\n    var result = undefined;\n    var sourceValue = source[this.name];\n\n    if (sourceValue === undefined) {\n      return this.defaultValue;\n    }\n\n    var isValid = false;\n\n    if (typeof sourceValue === \"string\") {\n      try {\n        var size = shared_1.SizeAndUnit.parse(sourceValue, true);\n\n        if (size.unit == Enums.SizeUnit.Pixel) {\n          result = size.physicalSize;\n          isValid = true;\n        }\n      } catch (_a) {// Swallow the exception\n      } // If the source value isn't valid per this property definition,\n      // check its validity per the fallback property, if specified\n\n\n      if (!isValid && this.fallbackProperty) {\n        isValid = this.fallbackProperty.isValidValue(sourceValue, context);\n      }\n    }\n\n    if (!isValid) {\n      context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(sourceValue, this.name));\n    }\n\n    return result;\n  };\n\n  ImageDimensionProperty.prototype.toJSON = function (sender, target, value, context) {\n    context.serializeValue(target, this.name, typeof value === \"number\" && !isNaN(value) ? value + \"px\" : undefined);\n  };\n\n  return ImageDimensionProperty;\n}(serialization_1.PropertyDefinition);\n\nvar Image =\n/** @class */\nfunction (_super) {\n  __extends(Image, _super);\n\n  function Image() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.size = Enums.Size.Auto;\n    _this.style = Enums.ImageStyle.Default;\n    return _this;\n  }\n\n  Image.prototype.populateSchema = function (schema) {\n    _super.prototype.populateSchema.call(this, schema);\n\n    schema.remove(CardElement.heightProperty);\n  }; //#endregion\n\n\n  Image.prototype.applySize = function (element) {\n    if (this.pixelWidth || this.pixelHeight) {\n      if (this.pixelWidth) {\n        element.style.width = this.pixelWidth + \"px\";\n      }\n\n      if (this.pixelHeight) {\n        element.style.height = this.pixelHeight + \"px\";\n      }\n    } else {\n      if (this.maxHeight) {\n        // If the image is constrained in height, we set its height property and\n        // auto and stretch are ignored (default to medium). THis is necessary for\n        // ImageSet which uses a maximum image height as opposed to the cards width\n        // as a constraining dimension\n        switch (this.size) {\n          case Enums.Size.Small:\n            element.style.height = this.hostConfig.imageSizes.small + \"px\";\n            break;\n\n          case Enums.Size.Large:\n            element.style.height = this.hostConfig.imageSizes.large + \"px\";\n            break;\n\n          default:\n            element.style.height = this.hostConfig.imageSizes.medium + \"px\";\n            break;\n        }\n\n        element.style.maxHeight = this.maxHeight + \"px\";\n      } else {\n        switch (this.size) {\n          case Enums.Size.Stretch:\n            element.style.width = \"100%\";\n            break;\n\n          case Enums.Size.Auto:\n            element.style.maxWidth = \"100%\";\n            break;\n\n          case Enums.Size.Small:\n            element.style.width = this.hostConfig.imageSizes.small + \"px\";\n            break;\n\n          case Enums.Size.Large:\n            element.style.width = this.hostConfig.imageSizes.large + \"px\";\n            break;\n\n          case Enums.Size.Medium:\n            element.style.width = this.hostConfig.imageSizes.medium + \"px\";\n            break;\n        }\n\n        element.style.maxHeight = \"100%\";\n      }\n    }\n  };\n\n  Object.defineProperty(Image.prototype, \"useDefaultSizing\", {\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Image.prototype.internalRender = function () {\n    var _this = this;\n\n    var element = undefined;\n\n    if (this.url) {\n      element = document.createElement(\"div\");\n      element.style.display = \"flex\";\n      element.style.alignItems = \"flex-start\";\n\n      element.onkeypress = function (e) {\n        if (_this.selectAction && (e.keyCode == 13 || e.keyCode == 32)) {\n          // enter or space pressed\n          e.preventDefault();\n          e.cancelBubble = true;\n\n          _this.selectAction.execute();\n        }\n      };\n\n      element.onclick = function (e) {\n        if (_this.selectAction) {\n          e.preventDefault();\n          e.cancelBubble = true;\n\n          _this.selectAction.execute();\n        }\n      };\n\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.style.justifyContent = \"center\";\n          break;\n\n        case Enums.HorizontalAlignment.Right:\n          element.style.justifyContent = \"flex-end\";\n          break;\n\n        default:\n          element.style.justifyContent = \"flex-start\";\n          break;\n      } // Cache hostConfig to avoid walking the parent hierarchy multiple times\n\n\n      var hostConfig = this.hostConfig;\n      var imageElement = document.createElement(\"img\");\n\n      imageElement.onload = function (e) {\n        raiseImageLoadedEvent(_this);\n      };\n\n      imageElement.onerror = function (e) {\n        if (_this.renderedElement) {\n          var card = _this.getRootElement();\n\n          _this.renderedElement.innerHTML = \"\";\n\n          if (card && card.designMode) {\n            var errorElement = document.createElement(\"div\");\n            errorElement.style.display = \"flex\";\n            errorElement.style.alignItems = \"center\";\n            errorElement.style.justifyContent = \"center\";\n            errorElement.style.backgroundColor = \"#EEEEEE\";\n            errorElement.style.color = \"black\";\n            errorElement.innerText = \":-(\";\n            errorElement.style.padding = \"10px\";\n\n            _this.applySize(errorElement);\n\n            _this.renderedElement.appendChild(errorElement);\n          }\n        }\n\n        raiseImageLoadedEvent(_this);\n      };\n\n      imageElement.style.minWidth = \"0\";\n      imageElement.classList.add(hostConfig.makeCssClassName(\"ac-image\"));\n\n      if (this.selectAction !== undefined && hostConfig.supportsInteractivity) {\n        imageElement.tabIndex = 0;\n        imageElement.setAttribute(\"role\", this.selectAction.getAriaRole());\n\n        if (this.selectAction.title) {\n          imageElement.setAttribute(\"aria-label\", this.selectAction.title);\n          imageElement.title = this.selectAction.title;\n        }\n\n        imageElement.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\n      }\n\n      this.applySize(imageElement);\n\n      if (this.style === Enums.ImageStyle.Person) {\n        imageElement.style.borderRadius = \"50%\";\n        imageElement.style.backgroundPosition = \"50% 50%\";\n        imageElement.style.backgroundRepeat = \"no-repeat\";\n      }\n\n      imageElement.style.backgroundColor = Utils.stringToCssColor(this.backgroundColor);\n      imageElement.src = this.preProcessPropertyValue(Image.urlProperty);\n      var altTextProperty = this.preProcessPropertyValue(Image.altTextProperty);\n\n      if (altTextProperty) {\n        imageElement.alt = altTextProperty;\n      }\n\n      element.appendChild(imageElement);\n    }\n\n    return element;\n  };\n\n  Image.prototype.getJsonTypeName = function () {\n    return \"Image\";\n  };\n\n  Image.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n\n    if (!result && this.selectAction) {\n      result = this.selectAction.getActionById(id);\n    }\n\n    return result;\n  };\n\n  Image.prototype.getResourceInformation = function () {\n    return this.url ? [{\n      url: this.url,\n      mimeType: \"image\"\n    }] : [];\n  };\n\n  Image.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"url\");\n  Image.altTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"altText\");\n  Image.backgroundColorProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"backgroundColor\");\n  Image.styleProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"style\", Enums.ImageStyle, Enums.ImageStyle.Default);\n  Image.sizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"size\", Enums.Size, Enums.Size.Auto);\n  Image.pixelWidthProperty = new ImageDimensionProperty(serialization_1.Versions.v1_1, \"width\", \"pixelWidth\");\n  Image.pixelHeightProperty = new ImageDimensionProperty(serialization_1.Versions.v1_1, \"height\", \"pixelHeight\", CardElement.heightProperty);\n  Image.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_1, \"selectAction\", [\"Action.ShowCard\"]);\n\n  __decorate([serialization_1.property(Image.urlProperty)], Image.prototype, \"url\", void 0);\n\n  __decorate([serialization_1.property(Image.altTextProperty)], Image.prototype, \"altText\", void 0);\n\n  __decorate([serialization_1.property(Image.backgroundColorProperty)], Image.prototype, \"backgroundColor\", void 0);\n\n  __decorate([serialization_1.property(Image.sizeProperty)], Image.prototype, \"size\", void 0);\n\n  __decorate([serialization_1.property(Image.styleProperty)], Image.prototype, \"style\", void 0);\n\n  __decorate([serialization_1.property(Image.pixelWidthProperty)], Image.prototype, \"pixelWidth\", void 0);\n\n  __decorate([serialization_1.property(Image.pixelHeightProperty)], Image.prototype, \"pixelHeight\", void 0);\n\n  __decorate([serialization_1.property(Image.selectActionProperty)], Image.prototype, \"selectAction\", void 0);\n\n  return Image;\n}(CardElement);\n\nexports.Image = Image;\n\nvar CardElementContainer =\n/** @class */\nfunction (_super) {\n  __extends(CardElementContainer, _super);\n\n  function CardElementContainer() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allowVerticalOverflow = false;\n    return _this;\n  }\n\n  CardElementContainer.prototype.populateSchema = function (schema) {\n    _super.prototype.populateSchema.call(this, schema);\n\n    if (!this.isSelectable) {\n      schema.remove(CardElementContainer.selectActionProperty);\n    }\n  }; //#endregion\n\n\n  CardElementContainer.prototype.isElementAllowed = function (element) {\n    return this.hostConfig.supportsInteractivity || !element.isInteractive;\n  };\n\n  CardElementContainer.prototype.applyPadding = function () {\n    _super.prototype.applyPadding.call(this);\n\n    if (!this.renderedElement) {\n      return;\n    }\n\n    var physicalPadding = new shared_1.SpacingDefinition();\n\n    if (this.getEffectivePadding()) {\n      physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\n    }\n\n    this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\n    this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\n    this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\n    this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\n    this.renderedElement.style.marginRight = \"0\";\n    this.renderedElement.style.marginLeft = \"0\";\n  };\n\n  Object.defineProperty(CardElementContainer.prototype, \"isSelectable\", {\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  CardElementContainer.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    for (var i = 0; i < this.getItemCount(); i++) {\n      var item = this.getItemAt(i);\n\n      if (!this.hostConfig.supportsInteractivity && item.isInteractive) {\n        context.addFailure(this, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.interactivityNotAllowed());\n      }\n\n      if (!this.isElementAllowed(item)) {\n        context.addFailure(this, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(item.getJsonTypeName()));\n      }\n\n      item.internalValidateProperties(context);\n    }\n\n    if (this._selectAction) {\n      this._selectAction.internalValidateProperties(context);\n    }\n  };\n\n  CardElementContainer.prototype.render = function () {\n    var _this = this;\n\n    var element = _super.prototype.render.call(this);\n\n    if (element) {\n      var hostConfig = this.hostConfig;\n\n      if (this.allowVerticalOverflow) {\n        element.style.overflowX = \"hidden\";\n        element.style.overflowY = \"auto\";\n      }\n\n      if (element && this.isSelectable && this._selectAction && hostConfig.supportsInteractivity) {\n        element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\n        element.tabIndex = 0;\n        element.setAttribute(\"role\", this._selectAction.getAriaRole());\n\n        if (this._selectAction.title) {\n          element.setAttribute(\"aria-label\", this._selectAction.title);\n          element.title = this._selectAction.title;\n        }\n\n        element.onclick = function (e) {\n          if (_this._selectAction !== undefined) {\n            e.preventDefault();\n            e.cancelBubble = true;\n\n            _this._selectAction.execute();\n          }\n        };\n\n        element.onkeypress = function (e) {\n          if (_this._selectAction !== undefined && (e.keyCode == 13 || e.keyCode == 32)) {\n            // Enter or space pressed\n            e.preventDefault();\n            e.cancelBubble = true;\n\n            _this._selectAction.execute();\n          }\n        };\n      }\n    }\n\n    return element;\n  };\n\n  CardElementContainer.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = true;\n    }\n\n    _super.prototype.updateLayout.call(this, processChildren);\n\n    if (processChildren) {\n      for (var i = 0; i < this.getItemCount(); i++) {\n        this.getItemAt(i).updateLayout();\n      }\n    }\n  };\n\n  CardElementContainer.prototype.getAllInputs = function (processActions) {\n    if (processActions === void 0) {\n      processActions = true;\n    }\n\n    var result = [];\n\n    for (var i = 0; i < this.getItemCount(); i++) {\n      result = result.concat(this.getItemAt(i).getAllInputs(processActions));\n    }\n\n    return result;\n  };\n\n  CardElementContainer.prototype.getResourceInformation = function () {\n    var result = [];\n\n    for (var i = 0; i < this.getItemCount(); i++) {\n      result = result.concat(this.getItemAt(i).getResourceInformation());\n    }\n\n    return result;\n  };\n\n  CardElementContainer.prototype.getElementById = function (id) {\n    var result = _super.prototype.getElementById.call(this, id);\n\n    if (!result) {\n      for (var i = 0; i < this.getItemCount(); i++) {\n        result = this.getItemAt(i).getElementById(id);\n\n        if (result) {\n          break;\n        }\n      }\n    }\n\n    return result;\n  };\n\n  CardElementContainer.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_1, \"selectAction\", [\"Action.ShowCard\"]);\n\n  __decorate([serialization_1.property(CardElementContainer.selectActionProperty)], CardElementContainer.prototype, \"_selectAction\", void 0);\n\n  return CardElementContainer;\n}(CardElement);\n\nexports.CardElementContainer = CardElementContainer;\n\nvar ImageSet =\n/** @class */\nfunction (_super) {\n  __extends(ImageSet, _super);\n\n  function ImageSet() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._images = [];\n    _this.imageSize = Enums.ImageSize.Medium;\n    return _this;\n  } //#endregion\n\n\n  ImageSet.prototype.internalRender = function () {\n    var element = undefined;\n\n    if (this._images.length > 0) {\n      element = document.createElement(\"div\");\n      element.style.display = \"flex\";\n      element.style.flexWrap = \"wrap\";\n\n      for (var _i = 0, _a = this._images; _i < _a.length; _i++) {\n        var image = _a[_i];\n\n        switch (this.imageSize) {\n          case Enums.ImageSize.Small:\n            image.size = Enums.Size.Small;\n            break;\n\n          case Enums.ImageSize.Large:\n            image.size = Enums.Size.Large;\n            break;\n\n          default:\n            image.size = Enums.Size.Medium;\n            break;\n        }\n\n        image.maxHeight = this.hostConfig.imageSet.maxImageHeight;\n        var renderedImage = image.render();\n\n        if (renderedImage) {\n          renderedImage.style.display = \"inline-flex\";\n          renderedImage.style.margin = \"0px\";\n          renderedImage.style.marginRight = \"10px\";\n          Utils.appendChild(element, renderedImage);\n        }\n      }\n    }\n\n    return element;\n  };\n\n  ImageSet.prototype.getItemCount = function () {\n    return this._images.length;\n  };\n\n  ImageSet.prototype.getItemAt = function (index) {\n    return this._images[index];\n  };\n\n  ImageSet.prototype.getFirstVisibleRenderedItem = function () {\n    return this._images && this._images.length > 0 ? this._images[0] : undefined;\n  };\n\n  ImageSet.prototype.getLastVisibleRenderedItem = function () {\n    return this._images && this._images.length > 0 ? this._images[this._images.length - 1] : undefined;\n  };\n\n  ImageSet.prototype.removeItem = function (item) {\n    if (item instanceof Image) {\n      var itemIndex = this._images.indexOf(item);\n\n      if (itemIndex >= 0) {\n        this._images.splice(itemIndex, 1);\n\n        item.setParent(undefined);\n        this.updateLayout();\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ImageSet.prototype.getJsonTypeName = function () {\n    return \"ImageSet\";\n  };\n\n  ImageSet.prototype.addImage = function (image) {\n    if (!image.parent) {\n      this._images.push(image);\n\n      image.setParent(this);\n    } else {\n      throw new Error(\"This image already belongs to another ImageSet\");\n    }\n  };\n\n  ImageSet.prototype.indexOf = function (cardElement) {\n    return cardElement instanceof Image ? this._images.indexOf(cardElement) : -1;\n  };\n\n  ImageSet.imagesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"images\", Image, function (sender, item) {\n    item.setParent(sender);\n  });\n  ImageSet.imageSizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"imageSize\", Enums.ImageSize, Enums.ImageSize.Medium);\n\n  __decorate([serialization_1.property(ImageSet.imagesProperty)], ImageSet.prototype, \"_images\", void 0);\n\n  __decorate([serialization_1.property(ImageSet.imageSizeProperty)], ImageSet.prototype, \"imageSize\", void 0);\n\n  return ImageSet;\n}(CardElementContainer);\n\nexports.ImageSet = ImageSet;\n\nvar MediaSource =\n/** @class */\nfunction (_super) {\n  __extends(MediaSource, _super);\n\n  function MediaSource(url, mimeType) {\n    var _this = _super.call(this) || this;\n\n    _this.url = url;\n    _this.mimeType = mimeType;\n    return _this;\n  } //#endregion\n\n\n  MediaSource.prototype.getSchemaKey = function () {\n    return \"MediaSource\";\n  };\n\n  MediaSource.prototype.isValid = function () {\n    return this.mimeType && this.url ? true : false;\n  };\n\n  MediaSource.prototype.render = function () {\n    var result = undefined;\n\n    if (this.isValid()) {\n      result = document.createElement(\"source\");\n      result.src = this.url;\n      result.type = this.mimeType;\n    }\n\n    return result;\n  }; //#region Schema\n\n\n  MediaSource.mimeTypeProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"mimeType\");\n  MediaSource.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"url\");\n\n  __decorate([serialization_1.property(MediaSource.mimeTypeProperty)], MediaSource.prototype, \"mimeType\", void 0);\n\n  __decorate([serialization_1.property(MediaSource.urlProperty)], MediaSource.prototype, \"url\", void 0);\n\n  return MediaSource;\n}(serialization_1.SerializableObject);\n\nexports.MediaSource = MediaSource;\n\nvar Media =\n/** @class */\nfunction (_super) {\n  __extends(Media, _super);\n\n  function Media() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.sources = [];\n    return _this;\n  }\n\n  Media.prototype.getPosterUrl = function () {\n    return this.poster ? this.poster : this.hostConfig.media.defaultPoster;\n  };\n\n  Media.prototype.processSources = function () {\n    this._selectedSources = [];\n    this._selectedMediaType = undefined;\n\n    for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\n      var source = _a[_i];\n      var mimeComponents = source.mimeType ? source.mimeType.split('/') : [];\n\n      if (mimeComponents.length == 2) {\n        if (!this._selectedMediaType) {\n          var index = Media.supportedMediaTypes.indexOf(mimeComponents[0]);\n\n          if (index >= 0) {\n            this._selectedMediaType = Media.supportedMediaTypes[index];\n          }\n        }\n\n        if (mimeComponents[0] == this._selectedMediaType) {\n          this._selectedSources.push(source);\n        }\n      }\n    }\n  };\n\n  Media.prototype.handlePlayButtonInvoke = function (event) {\n    if (this.hostConfig.media.allowInlinePlayback) {\n      event.preventDefault();\n      event.cancelBubble = true;\n\n      if (this.renderedElement) {\n        var mediaPlayerElement = this.renderMediaPlayer();\n        this.renderedElement.innerHTML = \"\";\n        this.renderedElement.appendChild(mediaPlayerElement);\n        mediaPlayerElement.play();\n      }\n    } else {\n      if (Media.onPlay) {\n        event.preventDefault();\n        event.cancelBubble = true;\n        Media.onPlay(this);\n      }\n    }\n  };\n\n  Media.prototype.renderPoster = function () {\n    var _this = this;\n\n    var playButtonArrowWidth = 12;\n    var playButtonArrowHeight = 15;\n    var posterRootElement = document.createElement(\"div\");\n    posterRootElement.className = this.hostConfig.makeCssClassName(\"ac-media-poster\");\n    posterRootElement.setAttribute(\"role\", \"contentinfo\");\n    posterRootElement.setAttribute(\"aria-label\", this.altText ? this.altText : \"Media content\");\n    posterRootElement.style.position = \"relative\";\n    posterRootElement.style.display = \"flex\";\n    var posterUrl = this.getPosterUrl();\n\n    if (posterUrl) {\n      var posterImageElement_1 = document.createElement(\"img\");\n      posterImageElement_1.style.width = \"100%\";\n      posterImageElement_1.style.height = \"100%\";\n      posterImageElement_1.setAttribute(\"role\", \"presentation\");\n\n      posterImageElement_1.onerror = function (e) {\n        if (posterImageElement_1.parentNode) {\n          posterImageElement_1.parentNode.removeChild(posterImageElement_1);\n        }\n\n        posterRootElement.classList.add(\"empty\");\n        posterRootElement.style.minHeight = \"150px\";\n      };\n\n      posterImageElement_1.src = posterUrl;\n      posterRootElement.appendChild(posterImageElement_1);\n    } else {\n      posterRootElement.classList.add(\"empty\");\n      posterRootElement.style.minHeight = \"150px\";\n    }\n\n    if (this.hostConfig.supportsInteractivity && this._selectedSources.length > 0) {\n      var playButtonOuterElement = document.createElement(\"div\");\n      playButtonOuterElement.tabIndex = 0;\n      playButtonOuterElement.setAttribute(\"role\", \"button\");\n      playButtonOuterElement.setAttribute(\"aria-label\", \"Play media\");\n      playButtonOuterElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton\");\n      playButtonOuterElement.style.display = \"flex\";\n      playButtonOuterElement.style.alignItems = \"center\";\n      playButtonOuterElement.style.justifyContent = \"center\";\n\n      playButtonOuterElement.onclick = function (e) {\n        _this.handlePlayButtonInvoke(e);\n      };\n\n      playButtonOuterElement.onkeypress = function (e) {\n        if (e.keyCode == 13 || e.keyCode == 32) {\n          // space or enter\n          _this.handlePlayButtonInvoke(e);\n        }\n      };\n\n      var playButtonInnerElement = document.createElement(\"div\");\n      playButtonInnerElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton-arrow\");\n      playButtonInnerElement.style.width = playButtonArrowWidth + \"px\";\n      playButtonInnerElement.style.height = playButtonArrowHeight + \"px\";\n      playButtonInnerElement.style.borderTopWidth = playButtonArrowHeight / 2 + \"px\";\n      playButtonInnerElement.style.borderBottomWidth = playButtonArrowHeight / 2 + \"px\";\n      playButtonInnerElement.style.borderLeftWidth = playButtonArrowWidth + \"px\";\n      playButtonInnerElement.style.borderRightWidth = \"0\";\n      playButtonInnerElement.style.borderStyle = \"solid\";\n      playButtonInnerElement.style.borderTopColor = \"transparent\";\n      playButtonInnerElement.style.borderRightColor = \"transparent\";\n      playButtonInnerElement.style.borderBottomColor = \"transparent\";\n      playButtonInnerElement.style.transform = \"translate(\" + playButtonArrowWidth / 10 + \"px,0px)\";\n      playButtonOuterElement.appendChild(playButtonInnerElement);\n      var playButtonContainer = document.createElement(\"div\");\n      playButtonContainer.style.position = \"absolute\";\n      playButtonContainer.style.left = \"0\";\n      playButtonContainer.style.top = \"0\";\n      playButtonContainer.style.width = \"100%\";\n      playButtonContainer.style.height = \"100%\";\n      playButtonContainer.style.display = \"flex\";\n      playButtonContainer.style.justifyContent = \"center\";\n      playButtonContainer.style.alignItems = \"center\";\n      playButtonContainer.appendChild(playButtonOuterElement);\n      posterRootElement.appendChild(playButtonContainer);\n    }\n\n    return posterRootElement;\n  };\n\n  Media.prototype.renderMediaPlayer = function () {\n    var mediaElement;\n\n    if (this._selectedMediaType == \"video\") {\n      var videoPlayer = document.createElement(\"video\");\n      var posterUrl = this.getPosterUrl();\n\n      if (posterUrl) {\n        videoPlayer.poster = posterUrl;\n      }\n\n      mediaElement = videoPlayer;\n    } else {\n      mediaElement = document.createElement(\"audio\");\n    }\n\n    mediaElement.setAttribute(\"webkit-playsinline\", \"\");\n    mediaElement.setAttribute(\"playsinline\", \"\");\n    mediaElement.autoplay = true;\n    mediaElement.controls = true;\n\n    if (Utils.isMobileOS()) {\n      mediaElement.muted = true;\n    }\n\n    mediaElement.preload = \"none\";\n    mediaElement.style.width = \"100%\";\n\n    for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\n      var source = _a[_i];\n      var renderedSource = source.render();\n      Utils.appendChild(mediaElement, renderedSource);\n    }\n\n    return mediaElement;\n  };\n\n  Media.prototype.internalRender = function () {\n    var element = document.createElement(\"div\");\n    element.className = this.hostConfig.makeCssClassName(\"ac-media\");\n    this.processSources();\n    element.appendChild(this.renderPoster());\n    return element;\n  };\n\n  Media.prototype.getJsonTypeName = function () {\n    return \"Media\";\n  };\n\n  Media.prototype.getResourceInformation = function () {\n    var result = [];\n    var posterUrl = this.getPosterUrl();\n\n    if (posterUrl) {\n      result.push({\n        url: posterUrl,\n        mimeType: \"image\"\n      });\n    }\n\n    for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\n      var mediaSource = _a[_i];\n\n      if (mediaSource.isValid()) {\n        result.push({\n          url: mediaSource.url,\n          mimeType: mediaSource.mimeType\n        });\n      }\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(Media.prototype, \"selectedMediaType\", {\n    get: function () {\n      return this._selectedMediaType;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Media.sourcesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_1, \"sources\", MediaSource);\n  Media.posterProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"poster\");\n  Media.altTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"altText\"); //#endregion\n\n  Media.supportedMediaTypes = [\"audio\", \"video\"];\n\n  __decorate([serialization_1.property(Media.sourcesProperty)], Media.prototype, \"sources\", void 0);\n\n  __decorate([serialization_1.property(Media.posterProperty)], Media.prototype, \"poster\", void 0);\n\n  __decorate([serialization_1.property(Media.altTextProperty)], Media.prototype, \"altText\", void 0);\n\n  return Media;\n}(CardElement);\n\nexports.Media = Media;\n\nvar Input =\n/** @class */\nfunction (_super) {\n  __extends(Input, _super);\n\n  function Input() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Input.prototype.getAllLabelIds = function () {\n    var labelIds = [];\n\n    if (this._renderedLabelElement) {\n      labelIds.push(this._renderedLabelElement.id);\n    }\n\n    if (this._renderedErrorMessageElement) {\n      labelIds.push(this._renderedErrorMessageElement.id);\n    }\n\n    return labelIds;\n  };\n\n  Input.prototype.updateInputControlAriaLabelledBy = function () {\n    if (this._renderedInputControlElement) {\n      var labelIds = this.getAllLabelIds();\n\n      if (this._renderedLabelElement) {\n        labelIds.push(this._renderedLabelElement.id);\n      }\n\n      if (this._renderedErrorMessageElement) {\n        labelIds.push(this._renderedErrorMessageElement.id);\n      }\n\n      if (labelIds.length > 0) {\n        this._renderedInputControlElement.setAttribute(\"aria-labelledby\", labelIds.join(\" \"));\n      } else {\n        this._renderedInputControlElement.removeAttribute(\"aria-labelledby\");\n      }\n    }\n  };\n\n  Object.defineProperty(Input.prototype, \"isNullable\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Input.prototype, \"renderedInputControlElement\", {\n    get: function () {\n      return this._renderedInputControlElement;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Input.prototype, \"inputControlContainerElement\", {\n    get: function () {\n      return this._inputControlContainerElement;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Input.prototype.overrideInternalRender = function () {\n    var hostConfig = this.hostConfig;\n    this._outerContainerElement = document.createElement(\"div\");\n    this._outerContainerElement.style.display = \"flex\";\n    this._outerContainerElement.style.flexDirection = \"column\";\n    var renderedInputControlId = Utils.generateUniqueId();\n\n    if (this.label) {\n      var labelRichTextBlock = new RichTextBlock();\n      labelRichTextBlock.setParent(this);\n      labelRichTextBlock.forElementId = renderedInputControlId;\n      var labelInline = new TextRun(this.label);\n      labelRichTextBlock.addInline(labelInline);\n\n      if (this.isRequired) {\n        labelInline.init(hostConfig.inputs.label.requiredInputs);\n        var isRequiredCueInline = new TextRun(hostConfig.inputs.label.requiredInputs.suffix);\n        isRequiredCueInline.color = hostConfig.inputs.label.requiredInputs.suffixColor;\n        isRequiredCueInline.ariaHidden = true;\n        labelRichTextBlock.addInline(isRequiredCueInline);\n      } else {\n        labelInline.init(hostConfig.inputs.label.optionalInputs);\n      }\n\n      this._renderedLabelElement = labelRichTextBlock.render();\n\n      if (this._renderedLabelElement) {\n        this._renderedLabelElement.id = Utils.generateUniqueId();\n        this._renderedLabelElement.style.marginBottom = hostConfig.getEffectiveSpacing(hostConfig.inputs.label.inputSpacing) + \"px\";\n\n        this._outerContainerElement.appendChild(this._renderedLabelElement);\n      }\n    }\n\n    this._inputControlContainerElement = document.createElement(\"div\");\n    this._inputControlContainerElement.className = hostConfig.makeCssClassName(\"ac-input-container\");\n    this._inputControlContainerElement.style.display = \"flex\";\n    this._renderedInputControlElement = this.internalRender();\n\n    if (this._renderedInputControlElement) {\n      this._renderedInputControlElement.id = renderedInputControlId;\n      this._renderedInputControlElement.style.minWidth = \"0px\";\n\n      if (this.isNullable && this.isRequired) {\n        this._renderedInputControlElement.setAttribute(\"aria-required\", \"true\");\n\n        this._renderedInputControlElement.classList.add(hostConfig.makeCssClassName(\"ac-input-required\"));\n      }\n\n      this._inputControlContainerElement.appendChild(this._renderedInputControlElement);\n\n      this._outerContainerElement.appendChild(this._inputControlContainerElement);\n\n      this.updateInputControlAriaLabelledBy();\n      return this._outerContainerElement;\n    }\n\n    return undefined;\n  };\n\n  Input.prototype.valueChanged = function () {\n    if (this.isValid()) {\n      this.resetValidationFailureCue();\n    }\n\n    if (this.onValueChanged) {\n      this.onValueChanged(this);\n    }\n\n    raiseInputValueChangedEvent(this);\n  };\n\n  Input.prototype.resetValidationFailureCue = function () {\n    if (this.renderedInputControlElement) {\n      this.renderedInputControlElement.classList.remove(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\n      this.updateInputControlAriaLabelledBy();\n\n      if (this._renderedErrorMessageElement) {\n        this._outerContainerElement.removeChild(this._renderedErrorMessageElement);\n\n        this._renderedErrorMessageElement = undefined;\n      }\n    }\n  };\n\n  Input.prototype.showValidationErrorMessage = function () {\n    if (this.renderedElement && this.errorMessage && shared_1.GlobalSettings.displayInputValidationErrors) {\n      var errorMessageTextBlock = new TextBlock();\n      errorMessageTextBlock.setParent(this);\n      errorMessageTextBlock.text = this.errorMessage;\n      errorMessageTextBlock.wrap = true;\n      errorMessageTextBlock.init(this.hostConfig.inputs.errorMessage);\n      this._renderedErrorMessageElement = errorMessageTextBlock.render();\n\n      if (this._renderedErrorMessageElement) {\n        this._renderedErrorMessageElement.id = Utils.generateUniqueId();\n\n        this._outerContainerElement.appendChild(this._renderedErrorMessageElement);\n\n        this.updateInputControlAriaLabelledBy();\n      }\n    }\n  };\n\n  Input.prototype.focus = function () {\n    if (this._renderedInputControlElement) {\n      this._renderedInputControlElement.focus();\n    }\n  };\n\n  Input.prototype.isValid = function () {\n    return true;\n  };\n\n  Input.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (!this.id) {\n      context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.inputsMustHaveUniqueId());\n    }\n\n    if (this.isRequired) {\n      if (!this.label) {\n        context.addFailure(this, Enums.ValidationEvent.RequiredInputsShouldHaveLabel, \"Required inputs should have a label\");\n      }\n\n      if (!this.errorMessage) {\n        context.addFailure(this, Enums.ValidationEvent.RequiredInputsShouldHaveErrorMessage, \"Required inputs should have an error message\");\n      }\n    }\n  };\n\n  Input.prototype.validateValue = function () {\n    this.resetValidationFailureCue();\n    var result = this.isRequired ? this.isSet() && this.isValid() : this.isValid();\n\n    if (!result && this.renderedInputControlElement) {\n      this.renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\n      this.showValidationErrorMessage();\n    }\n\n    return result;\n  };\n\n  Input.prototype.getAllInputs = function (processActions) {\n    if (processActions === void 0) {\n      processActions = true;\n    }\n\n    return [this];\n  };\n\n  Object.defineProperty(Input.prototype, \"isInteractive\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  }); //#region Schema\n\n  Input.labelProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, \"label\", true);\n  Input.isRequiredProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, \"isRequired\", false);\n  Input.errorMessageProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, \"errorMessage\", true);\n\n  __decorate([serialization_1.property(Input.labelProperty)], Input.prototype, \"label\", void 0);\n\n  __decorate([serialization_1.property(Input.isRequiredProperty)], Input.prototype, \"isRequired\", void 0);\n\n  __decorate([serialization_1.property(Input.errorMessageProperty)], Input.prototype, \"errorMessage\", void 0);\n\n  return Input;\n}(CardElement);\n\nexports.Input = Input;\n\nvar TextInput =\n/** @class */\nfunction (_super) {\n  __extends(TextInput, _super);\n\n  function TextInput() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.isMultiline = false;\n    _this.style = Enums.InputTextStyle.Text;\n    return _this;\n  } //#endregion\n\n\n  TextInput.prototype.setupInput = function (input) {\n    var _this = this;\n\n    input.style.flex = \"1 1 auto\";\n    input.tabIndex = 0;\n\n    if (this.placeholder) {\n      input.placeholder = this.placeholder;\n      input.setAttribute(\"aria-label\", this.placeholder);\n    }\n\n    if (this.defaultValue) {\n      input.value = this.defaultValue;\n    }\n\n    if (this.maxLength && this.maxLength > 0) {\n      input.maxLength = this.maxLength;\n    }\n\n    input.oninput = function () {\n      _this.valueChanged();\n    };\n\n    input.onkeypress = function (e) {\n      // Ctrl+Enter pressed\n      if (e.ctrlKey && e.code === \"Enter\" && _this.inlineAction) {\n        _this.inlineAction.execute();\n      }\n    };\n  };\n\n  TextInput.prototype.internalRender = function () {\n    var result;\n\n    if (this.isMultiline) {\n      result = document.createElement(\"textarea\");\n      result.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\", \"ac-multiline\");\n    } else {\n      result = document.createElement(\"input\");\n      result.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\");\n      result.type = Enums.InputTextStyle[this.style].toLowerCase();\n    }\n\n    this.setupInput(result);\n    return result;\n  };\n\n  TextInput.prototype.overrideInternalRender = function () {\n    var _this = this;\n\n    var renderedInputControl = _super.prototype.overrideInternalRender.call(this);\n\n    if (this.inlineAction) {\n      var button_1 = document.createElement(\"button\");\n      button_1.className = this.hostConfig.makeCssClassName(\"ac-inlineActionButton\");\n\n      button_1.onclick = function (e) {\n        e.preventDefault();\n        e.cancelBubble = true;\n\n        if (_this.inlineAction) {\n          _this.inlineAction.execute();\n        }\n      };\n\n      if (this.inlineAction.iconUrl) {\n        button_1.classList.add(\"iconOnly\");\n        var icon_1 = document.createElement(\"img\");\n        icon_1.style.height = \"100%\";\n        icon_1.setAttribute(\"role\", \"presentation\"); // The below trick is necessary as a workaround in Chrome where the icon is initially displayed\n        // at its native size then resized to 100% of the button's height. This cfreates an unpleasant\n        // flicker. On top of that, Chrome's flex implementation fails to prperly re-layout the button\n        // after the image has loaded and been gicven its final size. The below trick also fixes that.\n\n        icon_1.style.display = \"none\";\n\n        icon_1.onload = function () {\n          icon_1.style.removeProperty(\"display\");\n        };\n\n        icon_1.onerror = function () {\n          button_1.removeChild(icon_1);\n          button_1.classList.remove(\"iconOnly\");\n          button_1.classList.add(\"textOnly\");\n          button_1.textContent = _this.inlineAction && _this.inlineAction.title ? _this.inlineAction.title : strings_1.Strings.defaults.inlineActionTitle();\n        };\n\n        icon_1.src = this.inlineAction.iconUrl;\n        button_1.appendChild(icon_1);\n        button_1.title = this.inlineAction.title ? this.inlineAction.title : strings_1.Strings.defaults.inlineActionTitle();\n      } else {\n        button_1.classList.add(\"textOnly\");\n        button_1.textContent = this.inlineAction.title ? this.inlineAction.title : strings_1.Strings.defaults.inlineActionTitle();\n      }\n\n      button_1.style.marginLeft = \"8px\";\n      this.inputControlContainerElement.appendChild(button_1);\n    }\n\n    return renderedInputControl;\n  };\n\n  TextInput.prototype.getJsonTypeName = function () {\n    return \"Input.Text\";\n  };\n\n  TextInput.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n\n    if (!result && this.inlineAction) {\n      result = this.inlineAction.getActionById(id);\n    }\n\n    return result;\n  };\n\n  TextInput.prototype.isSet = function () {\n    return this.value ? true : false;\n  };\n\n  TextInput.prototype.isValid = function () {\n    if (!this.value) {\n      return true;\n    }\n\n    if (this.regex) {\n      return new RegExp(this.regex, \"g\").test(this.value);\n    }\n\n    return true;\n  };\n\n  Object.defineProperty(TextInput.prototype, \"value\", {\n    get: function () {\n      if (this.renderedInputControlElement) {\n        if (this.isMultiline) {\n          return this.renderedInputControlElement.value;\n        } else {\n          return this.renderedInputControlElement.value;\n        }\n      } else {\n        return undefined;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  TextInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\n  TextInput.maxLengthProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"maxLength\");\n  TextInput.isMultilineProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"isMultiline\", false);\n  TextInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\n  TextInput.styleProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"style\", Enums.InputTextStyle, Enums.InputTextStyle.Text);\n  TextInput.inlineActionProperty = new ActionProperty(serialization_1.Versions.v1_0, \"inlineAction\", [\"Action.ShowCard\"]);\n  TextInput.regexProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, \"regex\", true);\n\n  __decorate([serialization_1.property(TextInput.valueProperty)], TextInput.prototype, \"defaultValue\", void 0);\n\n  __decorate([serialization_1.property(TextInput.maxLengthProperty)], TextInput.prototype, \"maxLength\", void 0);\n\n  __decorate([serialization_1.property(TextInput.isMultilineProperty)], TextInput.prototype, \"isMultiline\", void 0);\n\n  __decorate([serialization_1.property(TextInput.placeholderProperty)], TextInput.prototype, \"placeholder\", void 0);\n\n  __decorate([serialization_1.property(TextInput.styleProperty)], TextInput.prototype, \"style\", void 0);\n\n  __decorate([serialization_1.property(TextInput.inlineActionProperty)], TextInput.prototype, \"inlineAction\", void 0);\n\n  __decorate([serialization_1.property(TextInput.regexProperty)], TextInput.prototype, \"regex\", void 0);\n\n  return TextInput;\n}(Input);\n\nexports.TextInput = TextInput;\n\nvar ToggleInput =\n/** @class */\nfunction (_super) {\n  __extends(ToggleInput, _super);\n\n  function ToggleInput() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.valueOn = \"true\";\n    _this.valueOff = \"false\";\n    _this.wrap = false;\n    return _this;\n  }\n\n  ToggleInput.prototype.updateInputControlAriaLabelledBy = function () {\n    if (this._checkboxInputElement) {\n      var joinedLabelIds = this.getAllLabelIds().join(\" \");\n\n      if (this._checkboxInputLabelElement && this._checkboxInputLabelElement.id) {\n        joinedLabelIds += \" \" + this._checkboxInputLabelElement.id;\n      }\n\n      if (joinedLabelIds) {\n        this._checkboxInputElement.setAttribute(\"aria-labelledby\", joinedLabelIds);\n      } else {\n        this._checkboxInputElement.removeAttribute(\"aria-labelledby\");\n      }\n    }\n  };\n\n  ToggleInput.prototype.internalRender = function () {\n    var _this = this;\n\n    var element = document.createElement(\"div\");\n    element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-toggleInput\");\n    element.style.width = \"100%\";\n    element.style.display = \"flex\";\n    element.style.alignItems = \"center\";\n    this._checkboxInputElement = document.createElement(\"input\");\n    this._checkboxInputElement.id = Utils.generateUniqueId();\n    this._checkboxInputElement.type = \"checkbox\";\n    this._checkboxInputElement.style.display = \"inline-block\";\n    this._checkboxInputElement.style.verticalAlign = \"middle\";\n    this._checkboxInputElement.style.margin = \"0\";\n    this._checkboxInputElement.style.flex = \"0 0 auto\";\n\n    if (this.title) {\n      this._checkboxInputElement.setAttribute(\"aria-label\", this.title);\n    }\n\n    if (this.isRequired) {\n      this._checkboxInputElement.setAttribute(\"aria-required\", \"true\");\n    }\n\n    this._checkboxInputElement.tabIndex = 0;\n\n    if (this.defaultValue == this.valueOn) {\n      this._checkboxInputElement.checked = true;\n    }\n\n    this._checkboxInputElement.onchange = function () {\n      _this.valueChanged();\n    };\n\n    Utils.appendChild(element, this._checkboxInputElement);\n\n    if (this.title || this.isDesignMode()) {\n      var label = new TextBlock();\n      label.setParent(this);\n      label.forElementId = this._checkboxInputElement.id;\n      label.hostConfig = this.hostConfig;\n      label.text = !this.title ? this.getJsonTypeName() : this.title;\n      label.useMarkdown = shared_1.GlobalSettings.useMarkdownInRadioButtonAndCheckbox;\n      label.wrap = this.wrap;\n      this._checkboxInputLabelElement = label.render();\n\n      if (this._checkboxInputLabelElement) {\n        this._checkboxInputLabelElement.id = Utils.generateUniqueId();\n        this._checkboxInputLabelElement.style.display = \"inline-block\";\n        this._checkboxInputLabelElement.style.flex = \"1 1 auto\";\n        this._checkboxInputLabelElement.style.marginLeft = \"6px\";\n        this._checkboxInputLabelElement.style.verticalAlign = \"middle\";\n        var spacerElement = document.createElement(\"div\");\n        spacerElement.style.width = \"6px\";\n        Utils.appendChild(element, spacerElement);\n        Utils.appendChild(element, this._checkboxInputLabelElement);\n      }\n    }\n\n    return element;\n  };\n\n  Object.defineProperty(ToggleInput.prototype, \"isNullable\", {\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ToggleInput.prototype.getJsonTypeName = function () {\n    return \"Input.Toggle\";\n  };\n\n  ToggleInput.prototype.focus = function () {\n    if (this._checkboxInputElement) {\n      this._checkboxInputElement.focus();\n    }\n  };\n\n  ToggleInput.prototype.isSet = function () {\n    if (this.isRequired) {\n      return this.value === this.valueOn;\n    }\n\n    return this.value ? true : false;\n  };\n\n  Object.defineProperty(ToggleInput.prototype, \"value\", {\n    get: function () {\n      if (this._checkboxInputElement) {\n        return this._checkboxInputElement.checked ? this.valueOn : this.valueOff;\n      } else {\n        return undefined;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  ToggleInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\n  ToggleInput.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\n  ToggleInput.valueOnProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"valueOn\", true, undefined, \"true\", function (sender) {\n    return \"true\";\n  });\n  ToggleInput.valueOffProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"valueOff\", true, undefined, \"false\", function (sender) {\n    return \"false\";\n  });\n  ToggleInput.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"wrap\", false);\n\n  __decorate([serialization_1.property(ToggleInput.valueProperty)], ToggleInput.prototype, \"defaultValue\", void 0);\n\n  __decorate([serialization_1.property(ToggleInput.titleProperty)], ToggleInput.prototype, \"title\", void 0);\n\n  __decorate([serialization_1.property(ToggleInput.valueOnProperty)], ToggleInput.prototype, \"valueOn\", void 0);\n\n  __decorate([serialization_1.property(ToggleInput.valueOffProperty)], ToggleInput.prototype, \"valueOff\", void 0);\n\n  __decorate([serialization_1.property(ToggleInput.wrapProperty)], ToggleInput.prototype, \"wrap\", void 0);\n\n  return ToggleInput;\n}(Input);\n\nexports.ToggleInput = ToggleInput;\n\nvar Choice =\n/** @class */\nfunction (_super) {\n  __extends(Choice, _super);\n\n  function Choice(title, value) {\n    var _this = _super.call(this) || this;\n\n    _this.title = title;\n    _this.value = value;\n    return _this;\n  } //#endregion\n\n\n  Choice.prototype.getSchemaKey = function () {\n    return \"Choice\";\n  }; //#region Schema\n\n\n  Choice.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\n  Choice.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\n\n  __decorate([serialization_1.property(Choice.titleProperty)], Choice.prototype, \"title\", void 0);\n\n  __decorate([serialization_1.property(Choice.valueProperty)], Choice.prototype, \"value\", void 0);\n\n  return Choice;\n}(serialization_1.SerializableObject);\n\nexports.Choice = Choice;\n\nvar ChoiceSetInput =\n/** @class */\nfunction (_super) {\n  __extends(ChoiceSetInput, _super);\n\n  function ChoiceSetInput() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.isMultiSelect = false;\n    _this.wrap = false;\n    _this.choices = [];\n    return _this;\n  }\n\n  Object.defineProperty(ChoiceSetInput.prototype, \"isCompact\", {\n    get: function () {\n      return this.style !== \"expanded\";\n    },\n    set: function (value) {\n      this.style = value ? undefined : \"expanded\";\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ChoiceSetInput.getUniqueCategoryName = function () {\n    var uniqueCategoryName = \"__ac-category\" + ChoiceSetInput.uniqueCategoryCounter;\n    ChoiceSetInput.uniqueCategoryCounter++;\n    return uniqueCategoryName;\n  };\n\n  ChoiceSetInput.prototype.renderCompoundInput = function (cssClassName, type, defaultValues) {\n    var _this = this;\n\n    var element = document.createElement(\"div\");\n    element.className = this.hostConfig.makeCssClassName(\"ac-input\", cssClassName);\n    element.style.width = \"100%\";\n    this._toggleInputs = [];\n    this._labels = [];\n\n    for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\n      var choice = _a[_i];\n      var input = document.createElement(\"input\");\n      input.id = Utils.generateUniqueId();\n      input.type = type;\n      input.style.margin = \"0\";\n      input.style.display = \"inline-block\";\n      input.style.verticalAlign = \"middle\";\n      input.style.flex = \"0 0 auto\";\n      input.name = this.id ? this.id : this._uniqueCategoryName;\n\n      if (this.isRequired) {\n        input.setAttribute(\"aria-required\", \"true\");\n      }\n\n      if (choice.value) {\n        input.value = choice.value;\n      }\n\n      if (choice.title) {\n        input.setAttribute(\"aria-label\", choice.title);\n      }\n\n      if (defaultValues && choice.value) {\n        if (defaultValues.indexOf(choice.value) >= 0) {\n          input.checked = true;\n        }\n      }\n\n      input.onchange = function () {\n        _this.valueChanged();\n      };\n\n      this._toggleInputs.push(input);\n\n      var compoundInput = document.createElement(\"div\");\n      compoundInput.style.display = \"flex\";\n      compoundInput.style.alignItems = \"center\";\n      Utils.appendChild(compoundInput, input);\n      var label = new TextBlock();\n      label.setParent(this);\n      label.forElementId = input.id;\n      label.hostConfig = this.hostConfig;\n      label.text = choice.title ? choice.title : \"Choice \" + this._toggleInputs.length;\n      label.useMarkdown = shared_1.GlobalSettings.useMarkdownInRadioButtonAndCheckbox;\n      label.wrap = this.wrap;\n      var labelElement = label.render();\n\n      this._labels.push(labelElement);\n\n      if (labelElement) {\n        labelElement.id = Utils.generateUniqueId();\n        labelElement.style.display = \"inline-block\";\n        labelElement.style.flex = \"1 1 auto\";\n        labelElement.style.marginLeft = \"6px\";\n        labelElement.style.verticalAlign = \"middle\";\n        var spacerElement = document.createElement(\"div\");\n        spacerElement.style.width = \"6px\";\n        Utils.appendChild(compoundInput, spacerElement);\n        Utils.appendChild(compoundInput, labelElement);\n      }\n\n      Utils.appendChild(element, compoundInput);\n    }\n\n    return element;\n  };\n\n  ChoiceSetInput.prototype.updateInputControlAriaLabelledBy = function () {\n    if (this.isMultiSelect || this.style === \"expanded\") {\n      var labelIds = this.getAllLabelIds();\n\n      for (var i = 0; i < this._toggleInputs.length; i++) {\n        var joinedLabelIds = labelIds.join(\" \");\n        var label = this._labels[i];\n\n        if (label && label.id) {\n          joinedLabelIds += \" \" + label.id;\n        }\n\n        if (joinedLabelIds) {\n          this._toggleInputs[i].setAttribute(\"aria-labelledby\", joinedLabelIds);\n        } else {\n          this._toggleInputs[i].removeAttribute(\"aria-labelledby\");\n        }\n      }\n    } else {\n      _super.prototype.updateInputControlAriaLabelledBy.call(this);\n    }\n  }; // Make sure `aria-current` is applied to the currently-selected item\n\n\n  ChoiceSetInput.prototype.internalApplyAriaCurrent = function () {\n    var options = this._selectElement.options;\n\n    if (options) {\n      for (var i = 0; i < options.length; i++) {\n        if (options[i].selected) {\n          options[i].setAttribute(\"aria-current\", \"true\");\n        } else {\n          options[i].removeAttribute(\"aria-current\");\n        }\n      }\n    }\n  };\n\n  ChoiceSetInput.prototype.internalRender = function () {\n    var _this = this;\n\n    this._uniqueCategoryName = ChoiceSetInput.getUniqueCategoryName();\n\n    if (this.isMultiSelect) {\n      // Render as a list of toggle inputs\n      return this.renderCompoundInput(\"ac-choiceSetInput-multiSelect\", \"checkbox\", this.defaultValue ? this.defaultValue.split(this.hostConfig.choiceSetInputValueSeparator) : undefined);\n    } else {\n      if (this.style === \"expanded\") {\n        // Render as a series of radio buttons\n        return this.renderCompoundInput(\"ac-choiceSetInput-expanded\", \"radio\", this.defaultValue ? [this.defaultValue] : undefined);\n      } else {\n        // Render as a combo box\n        this._selectElement = document.createElement(\"select\");\n        this._selectElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-multichoiceInput\", \"ac-choiceSetInput-compact\");\n        this._selectElement.style.width = \"100%\";\n        var option = document.createElement(\"option\");\n        option.selected = true;\n        option.disabled = true;\n        option.hidden = true;\n        option.value = \"\";\n\n        if (this.placeholder) {\n          option.text = this.placeholder;\n        }\n\n        Utils.appendChild(this._selectElement, option);\n\n        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\n          var choice = _a[_i];\n          var option_1 = document.createElement(\"option\");\n          option_1.value = choice.value;\n          option_1.text = choice.title;\n          option_1.setAttribute(\"aria-label\", choice.title);\n\n          if (choice.value == this.defaultValue) {\n            option_1.selected = true;\n          }\n\n          Utils.appendChild(this._selectElement, option_1);\n        }\n\n        this._selectElement.onchange = function () {\n          _this.internalApplyAriaCurrent();\n\n          _this.valueChanged();\n        };\n\n        this.internalApplyAriaCurrent();\n        return this._selectElement;\n      }\n    }\n  };\n\n  ChoiceSetInput.prototype.getJsonTypeName = function () {\n    return \"Input.ChoiceSet\";\n  };\n\n  ChoiceSetInput.prototype.focus = function () {\n    if (this.isMultiSelect || this.style === \"expanded\") {\n      if (this._toggleInputs.length > 0) {\n        this._toggleInputs[0].focus();\n      }\n    } else {\n      _super.prototype.focus.call(this);\n    }\n  };\n\n  ChoiceSetInput.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (this.choices.length == 0) {\n      context.addFailure(this, Enums.ValidationEvent.CollectionCantBeEmpty, strings_1.Strings.errors.choiceSetMustHaveAtLeastOneChoice());\n    }\n\n    for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\n      var choice = _a[_i];\n\n      if (!choice.title || !choice.value) {\n        context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.choiceSetChoicesMustHaveTitleAndValue());\n      }\n    }\n  };\n\n  ChoiceSetInput.prototype.isSet = function () {\n    return this.value ? true : false;\n  };\n\n  Object.defineProperty(ChoiceSetInput.prototype, \"value\", {\n    get: function () {\n      if (!this.isMultiSelect) {\n        if (this.isCompact) {\n          if (this._selectElement) {\n            return this._selectElement.selectedIndex > 0 ? this._selectElement.value : undefined;\n          }\n\n          return undefined;\n        } else {\n          if (!this._toggleInputs || this._toggleInputs.length == 0) {\n            return undefined;\n          }\n\n          for (var _i = 0, _a = this._toggleInputs; _i < _a.length; _i++) {\n            var toggleInput = _a[_i];\n\n            if (toggleInput.checked) {\n              return toggleInput.value;\n            }\n          }\n\n          return undefined;\n        }\n      } else {\n        if (!this._toggleInputs || this._toggleInputs.length == 0) {\n          return undefined;\n        }\n\n        var result = \"\";\n\n        for (var _b = 0, _c = this._toggleInputs; _b < _c.length; _b++) {\n          var toggleInput = _c[_b];\n\n          if (toggleInput.checked) {\n            if (result != \"\") {\n              result += this.hostConfig.choiceSetInputValueSeparator;\n            }\n\n            result += toggleInput.value;\n          }\n        }\n\n        return result ? result : undefined;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  ChoiceSetInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\n  ChoiceSetInput.choicesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"choices\", Choice);\n  ChoiceSetInput.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_0, \"style\", [{\n    value: \"compact\"\n  }, {\n    value: \"expanded\"\n  }], \"compact\");\n  ChoiceSetInput.isMultiSelectProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"isMultiSelect\", false);\n  ChoiceSetInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\n  ChoiceSetInput.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"wrap\", false); //#endregion\n\n  ChoiceSetInput.uniqueCategoryCounter = 0;\n\n  __decorate([serialization_1.property(ChoiceSetInput.valueProperty)], ChoiceSetInput.prototype, \"defaultValue\", void 0);\n\n  __decorate([serialization_1.property(ChoiceSetInput.styleProperty)], ChoiceSetInput.prototype, \"style\", void 0);\n\n  __decorate([serialization_1.property(ChoiceSetInput.isMultiSelectProperty)], ChoiceSetInput.prototype, \"isMultiSelect\", void 0);\n\n  __decorate([serialization_1.property(ChoiceSetInput.placeholderProperty)], ChoiceSetInput.prototype, \"placeholder\", void 0);\n\n  __decorate([serialization_1.property(ChoiceSetInput.wrapProperty)], ChoiceSetInput.prototype, \"wrap\", void 0);\n\n  __decorate([serialization_1.property(ChoiceSetInput.choicesProperty)], ChoiceSetInput.prototype, \"choices\", void 0);\n\n  return ChoiceSetInput;\n}(Input);\n\nexports.ChoiceSetInput = ChoiceSetInput;\n\nvar NumberInput =\n/** @class */\nfunction (_super) {\n  __extends(NumberInput, _super);\n\n  function NumberInput() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  NumberInput.prototype.internalRender = function () {\n    var _this = this;\n\n    this._numberInputElement = document.createElement(\"input\");\n\n    this._numberInputElement.setAttribute(\"type\", \"number\");\n\n    if (this.min) {\n      this._numberInputElement.setAttribute(\"min\", this.min.toString());\n    }\n\n    if (this.max) {\n      this._numberInputElement.setAttribute(\"max\", this.max.toString());\n    }\n\n    this._numberInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-numberInput\");\n    this._numberInputElement.style.width = \"100%\";\n    this._numberInputElement.tabIndex = 0;\n\n    if (this.defaultValue !== undefined) {\n      this._numberInputElement.valueAsNumber = this.defaultValue;\n    }\n\n    if (this.placeholder) {\n      this._numberInputElement.placeholder = this.placeholder;\n\n      this._numberInputElement.setAttribute(\"aria-label\", this.placeholder);\n    }\n\n    this._numberInputElement.oninput = function () {\n      _this.valueChanged();\n    };\n\n    return this._numberInputElement;\n  };\n\n  NumberInput.prototype.getJsonTypeName = function () {\n    return \"Input.Number\";\n  };\n\n  NumberInput.prototype.isSet = function () {\n    return this.value !== undefined && !isNaN(this.value);\n  };\n\n  NumberInput.prototype.isValid = function () {\n    if (!this.value) {\n      return !this.isRequired;\n    }\n\n    var result = true;\n\n    if (this.min !== undefined) {\n      result = result && this.value >= this.min;\n    }\n\n    if (this.max !== undefined) {\n      result = result && this.value <= this.max;\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(NumberInput.prototype, \"value\", {\n    get: function () {\n      return this._numberInputElement ? this._numberInputElement.valueAsNumber : undefined;\n    },\n    enumerable: false,\n    configurable: true\n  }); //#region Schema\n\n  NumberInput.valueProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"value\");\n  NumberInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\n  NumberInput.minProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"min\");\n  NumberInput.maxProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"max\");\n\n  __decorate([serialization_1.property(NumberInput.valueProperty)], NumberInput.prototype, \"defaultValue\", void 0);\n\n  __decorate([serialization_1.property(NumberInput.minProperty)], NumberInput.prototype, \"min\", void 0);\n\n  __decorate([serialization_1.property(NumberInput.maxProperty)], NumberInput.prototype, \"max\", void 0);\n\n  __decorate([serialization_1.property(NumberInput.placeholderProperty)], NumberInput.prototype, \"placeholder\", void 0);\n\n  return NumberInput;\n}(Input);\n\nexports.NumberInput = NumberInput;\n\nvar DateInput =\n/** @class */\nfunction (_super) {\n  __extends(DateInput, _super);\n\n  function DateInput() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DateInput.prototype.internalRender = function () {\n    var _this = this;\n\n    this._dateInputElement = document.createElement(\"input\");\n\n    this._dateInputElement.setAttribute(\"type\", \"date\");\n\n    if (this.min) {\n      this._dateInputElement.setAttribute(\"min\", this.min);\n    }\n\n    if (this.max) {\n      this._dateInputElement.setAttribute(\"max\", this.max);\n    }\n\n    if (this.placeholder) {\n      this._dateInputElement.placeholder = this.placeholder;\n\n      this._dateInputElement.setAttribute(\"aria-label\", this.placeholder);\n    }\n\n    this._dateInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-dateInput\");\n    this._dateInputElement.style.width = \"100%\";\n\n    this._dateInputElement.oninput = function () {\n      _this.valueChanged();\n    };\n\n    if (this.defaultValue) {\n      this._dateInputElement.value = this.defaultValue;\n    }\n\n    return this._dateInputElement;\n  };\n\n  DateInput.prototype.getJsonTypeName = function () {\n    return \"Input.Date\";\n  };\n\n  DateInput.prototype.isSet = function () {\n    return this.value ? true : false;\n  };\n\n  DateInput.prototype.isValid = function () {\n    if (!this.value) {\n      return !this.isRequired;\n    }\n\n    var valueAsDate = new Date(this.value);\n    var result = true;\n\n    if (this.min) {\n      var minDate = new Date(this.min);\n      result = result && valueAsDate >= minDate;\n    }\n\n    if (this.max) {\n      var maxDate = new Date(this.max);\n      result = result && valueAsDate <= maxDate;\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(DateInput.prototype, \"value\", {\n    get: function () {\n      return this._dateInputElement ? this._dateInputElement.value : undefined;\n    },\n    enumerable: false,\n    configurable: true\n  }); //#region Schema\n\n  DateInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\n  DateInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\n  DateInput.minProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"min\");\n  DateInput.maxProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"max\");\n\n  __decorate([serialization_1.property(DateInput.valueProperty)], DateInput.prototype, \"defaultValue\", void 0);\n\n  __decorate([serialization_1.property(DateInput.minProperty)], DateInput.prototype, \"min\", void 0);\n\n  __decorate([serialization_1.property(DateInput.maxProperty)], DateInput.prototype, \"max\", void 0);\n\n  __decorate([serialization_1.property(DateInput.placeholderProperty)], DateInput.prototype, \"placeholder\", void 0);\n\n  return DateInput;\n}(Input);\n\nexports.DateInput = DateInput;\n\nvar TimeProperty =\n/** @class */\nfunction (_super) {\n  __extends(TimeProperty, _super);\n\n  function TimeProperty(targetVersion, name) {\n    var _this = _super.call(this, targetVersion, name, function (sender, property, source, context) {\n      var value = source[property.name];\n\n      if (typeof value === \"string\" && value && /^[0-9]{2}:[0-9]{2}$/.test(value)) {\n        return value;\n      }\n\n      return undefined;\n    }, function (sender, property, target, value, context) {\n      context.serializeValue(target, property.name, value);\n    }) || this;\n\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    return _this;\n  }\n\n  return TimeProperty;\n}(serialization_1.CustomProperty);\n\nexports.TimeProperty = TimeProperty;\n\nvar TimeInput =\n/** @class */\nfunction (_super) {\n  __extends(TimeInput, _super);\n\n  function TimeInput() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TimeInput.convertTimeStringToDate = function (timeString) {\n    return new Date(\"1973-09-04T\" + timeString + \":00Z\");\n  };\n\n  TimeInput.prototype.internalRender = function () {\n    var _this = this;\n\n    this._timeInputElement = document.createElement(\"input\");\n\n    this._timeInputElement.setAttribute(\"type\", \"time\");\n\n    this._timeInputElement.setAttribute(\"min\", this.min);\n\n    this._timeInputElement.setAttribute(\"max\", this.max);\n\n    this._timeInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-timeInput\");\n    this._timeInputElement.style.width = \"100%\";\n\n    this._timeInputElement.oninput = function () {\n      _this.valueChanged();\n    };\n\n    if (this.placeholder) {\n      this._timeInputElement.placeholder = this.placeholder;\n\n      this._timeInputElement.setAttribute(\"aria-label\", this.placeholder);\n    }\n\n    if (this.defaultValue) {\n      this._timeInputElement.value = this.defaultValue;\n    }\n\n    return this._timeInputElement;\n  };\n\n  TimeInput.prototype.getJsonTypeName = function () {\n    return \"Input.Time\";\n  };\n\n  TimeInput.prototype.isSet = function () {\n    return this.value ? true : false;\n  };\n\n  TimeInput.prototype.isValid = function () {\n    if (!this.value) {\n      return !this.isRequired;\n    }\n\n    var valueAsDate = TimeInput.convertTimeStringToDate(this.value);\n    var result = true;\n\n    if (this.min) {\n      var minDate = TimeInput.convertTimeStringToDate(this.min);\n      result = result && valueAsDate >= minDate;\n    }\n\n    if (this.max) {\n      var maxDate = TimeInput.convertTimeStringToDate(this.max);\n      result = result && valueAsDate <= maxDate;\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(TimeInput.prototype, \"value\", {\n    get: function () {\n      return this._timeInputElement ? this._timeInputElement.value : undefined;\n    },\n    enumerable: false,\n    configurable: true\n  }); //#region Schema\n\n  TimeInput.valueProperty = new TimeProperty(serialization_1.Versions.v1_0, \"value\");\n  TimeInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\n  TimeInput.minProperty = new TimeProperty(serialization_1.Versions.v1_0, \"min\");\n  TimeInput.maxProperty = new TimeProperty(serialization_1.Versions.v1_0, \"max\");\n\n  __decorate([serialization_1.property(TimeInput.valueProperty)], TimeInput.prototype, \"defaultValue\", void 0);\n\n  __decorate([serialization_1.property(TimeInput.minProperty)], TimeInput.prototype, \"min\", void 0);\n\n  __decorate([serialization_1.property(TimeInput.maxProperty)], TimeInput.prototype, \"max\", void 0);\n\n  __decorate([serialization_1.property(TimeInput.placeholderProperty)], TimeInput.prototype, \"placeholder\", void 0);\n\n  return TimeInput;\n}(Input);\n\nexports.TimeInput = TimeInput;\n\nvar ActionButton =\n/** @class */\nfunction () {\n  function ActionButton(action, parentContainerStyle) {\n    this._state = 0\n    /* Normal */\n    ;\n    this.action = action;\n    this._parentContainerStyle = parentContainerStyle;\n  }\n\n  ActionButton.prototype.updateCssStyle = function () {\n    var _a, _b;\n\n    if (this.action.parent && this.action.renderedElement) {\n      var hostConfig = this.action.parent.hostConfig;\n      this.action.renderedElement.className = hostConfig.makeCssClassName(\"ac-pushButton\");\n\n      if (this._parentContainerStyle) {\n        this.action.renderedElement.classList.add(\"style-\" + this._parentContainerStyle);\n      }\n\n      this.action.updateActionButtonCssStyle(this.action.renderedElement, this._state);\n      this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"expanded\"));\n      this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"subdued\"));\n\n      switch (this._state) {\n        case 1\n        /* Expanded */\n        :\n          this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"expanded\"));\n          break;\n\n        case 2\n        /* Subdued */\n        :\n          this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"subdued\"));\n          break;\n      }\n\n      if (this.action.style) {\n        if (this.action.style === Enums.ActionStyle.Positive) {\n          (_a = this.action.renderedElement.classList).add.apply(_a, hostConfig.makeCssClassNames(\"primary\", \"style-positive\"));\n        } else {\n          (_b = this.action.renderedElement.classList).add.apply(_b, hostConfig.makeCssClassNames(\"style-\" + this.action.style.toLowerCase()));\n        }\n      }\n    }\n  };\n\n  ActionButton.prototype.render = function () {\n    var _this = this;\n\n    this.action.render();\n\n    if (this.action.renderedElement) {\n      this.action.renderedElement.onclick = function (e) {\n        e.preventDefault();\n        e.cancelBubble = true;\n\n        _this.click();\n      };\n\n      this.updateCssStyle();\n    }\n  };\n\n  ActionButton.prototype.click = function () {\n    if (this.onClick !== undefined) {\n      this.onClick(this);\n    }\n  };\n\n  Object.defineProperty(ActionButton.prototype, \"state\", {\n    get: function () {\n      return this._state;\n    },\n    set: function (value) {\n      this._state = value;\n      this.updateCssStyle();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return ActionButton;\n}();\n\nvar Action =\n/** @class */\nfunction (_super) {\n  __extends(Action, _super);\n\n  function Action() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.style = Enums.ActionStyle.Default;\n    return _this;\n  }\n\n  Action.prototype.getDefaultSerializationContext = function () {\n    return new SerializationContext();\n  };\n\n  Action.prototype.addCssClasses = function (element) {// Do nothing in base implementation\n  };\n\n  Action.prototype.internalGetReferencedInputs = function () {\n    return {};\n  };\n\n  Action.prototype.internalPrepareForExecution = function (inputs) {// Do nothing in base implementation\n  };\n\n  Action.prototype.internalValidateInputs = function (referencedInputs) {\n    var result = [];\n\n    if (!this.ignoreInputValidation && referencedInputs) {\n      for (var _i = 0, _a = Object.keys(referencedInputs); _i < _a.length; _i++) {\n        var key = _a[_i];\n        var input = referencedInputs[key];\n\n        if (!input.validateValue()) {\n          result.push(input);\n        }\n      }\n    }\n\n    return result;\n  };\n\n  Action.prototype.shouldSerialize = function (context) {\n    return context.actionRegistry.findByName(this.getJsonTypeName()) !== undefined;\n  };\n\n  Action.prototype.raiseExecuteActionEvent = function () {\n    if (this.onExecute) {\n      this.onExecute(this);\n    }\n\n    raiseExecuteActionEvent(this);\n  };\n\n  Action.prototype.getHref = function () {\n    return \"\";\n  };\n\n  Action.prototype.getAriaRole = function () {\n    return \"button\";\n  };\n\n  Action.prototype.updateActionButtonCssStyle = function (actionButtonElement, buttonState) {\n    if (buttonState === void 0) {\n      buttonState = 0\n      /* Normal */\n      ;\n    } // Do nothing in base implementation\n\n  };\n\n  Action.prototype.parse = function (source, context) {\n    return _super.prototype.parse.call(this, source, context ? context : new SerializationContext());\n  };\n\n  Action.prototype.render = function (baseCssClass) {\n    if (baseCssClass === void 0) {\n      baseCssClass = \"ac-pushButton\";\n    } // Cache hostConfig for perf\n\n\n    var hostConfig = this.hostConfig;\n    var buttonElement = document.createElement(\"button\");\n    this.addCssClasses(buttonElement);\n\n    if (this.title) {\n      buttonElement.setAttribute(\"aria-label\", this.title);\n    }\n\n    buttonElement.type = \"button\";\n    buttonElement.style.display = \"flex\";\n    buttonElement.style.alignItems = \"center\";\n    buttonElement.style.justifyContent = \"center\";\n    buttonElement.setAttribute(\"role\", this.getAriaRole());\n    var titleElement = document.createElement(\"div\");\n    titleElement.style.overflow = \"hidden\";\n    titleElement.style.textOverflow = \"ellipsis\";\n\n    if (!(hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle || hostConfig.actions.allowTitleToWrap)) {\n      titleElement.style.whiteSpace = \"nowrap\";\n    }\n\n    if (this.title) {\n      titleElement.innerText = this.title;\n    }\n\n    if (!this.iconUrl) {\n      buttonElement.classList.add(\"noIcon\");\n      buttonElement.appendChild(titleElement);\n    } else {\n      var iconElement = document.createElement(\"img\");\n      iconElement.src = this.iconUrl;\n      iconElement.style.width = hostConfig.actions.iconSize + \"px\";\n      iconElement.style.height = hostConfig.actions.iconSize + \"px\";\n      iconElement.style.flex = \"0 0 auto\";\n\n      if (hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle) {\n        buttonElement.classList.add(\"iconAbove\");\n        buttonElement.style.flexDirection = \"column\";\n\n        if (this.title) {\n          iconElement.style.marginBottom = \"6px\";\n        }\n      } else {\n        buttonElement.classList.add(\"iconLeft\");\n        iconElement.style.maxHeight = \"100%\";\n\n        if (this.title) {\n          iconElement.style.marginRight = \"6px\";\n        }\n      }\n\n      buttonElement.appendChild(iconElement);\n      buttonElement.appendChild(titleElement);\n    }\n\n    this._renderedElement = buttonElement;\n  };\n\n  Action.prototype.execute = function () {\n    if (this._actionCollection) {\n      this._actionCollection.actionExecuted(this);\n    }\n\n    this.raiseExecuteActionEvent();\n  };\n\n  Action.prototype.prepareForExecution = function () {\n    var referencedInputs = this.getReferencedInputs();\n    var invalidInputs = this.internalValidateInputs(referencedInputs);\n\n    if (invalidInputs.length > 0) {\n      invalidInputs[0].focus();\n      return false;\n    }\n\n    this.internalPrepareForExecution(referencedInputs);\n    return true;\n  };\n\n  ;\n\n  Action.prototype.remove = function () {\n    if (this._actionCollection) {\n      return this._actionCollection.removeAction(this);\n    }\n\n    return false;\n  };\n\n  Action.prototype.getAllInputs = function (processActions) {\n    if (processActions === void 0) {\n      processActions = true;\n    }\n\n    return [];\n  };\n\n  Action.prototype.getResourceInformation = function () {\n    return this.iconUrl ? [{\n      url: this.iconUrl,\n      mimeType: \"image\"\n    }] : [];\n  };\n\n  Action.prototype.getActionById = function (id) {\n    return this.id === id ? this : undefined;\n  };\n\n  Action.prototype.getReferencedInputs = function () {\n    return this.internalGetReferencedInputs();\n  };\n  /**\r\n   * Validates the inputs associated with this action.\r\n   *\r\n   * @returns A list of inputs that failed validation, or an empty array if no input failed validation.\r\n   */\n\n\n  Action.prototype.validateInputs = function () {\n    return this.internalValidateInputs(this.getReferencedInputs());\n  };\n\n  Object.defineProperty(Action.prototype, \"isPrimary\", {\n    get: function () {\n      return this.style == Enums.ActionStyle.Positive;\n    },\n    set: function (value) {\n      if (value) {\n        this.style = Enums.ActionStyle.Positive;\n      } else {\n        if (this.style == Enums.ActionStyle.Positive) {\n          this.style = Enums.ActionStyle.Default;\n        }\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Action.prototype, \"ignoreInputValidation\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Action.prototype, \"hostConfig\", {\n    get: function () {\n      return this.parent ? this.parent.hostConfig : host_config_1.defaultHostConfig;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Action.prototype, \"parent\", {\n    get: function () {\n      return this._parent;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Action.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\n  Action.iconUrlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"iconUrl\");\n  Action.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_2, \"style\", [{\n    value: Enums.ActionStyle.Default\n  }, {\n    value: Enums.ActionStyle.Positive\n  }, {\n    value: Enums.ActionStyle.Destructive\n  }], Enums.ActionStyle.Default); // TODO: Revise this when finalizing input validation\n\n  Action.ignoreInputValidationProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, \"ignoreInputValidation\", false);\n\n  __decorate([serialization_1.property(Action.titleProperty)], Action.prototype, \"title\", void 0);\n\n  __decorate([serialization_1.property(Action.iconUrlProperty)], Action.prototype, \"iconUrl\", void 0);\n\n  __decorate([serialization_1.property(Action.styleProperty)], Action.prototype, \"style\", void 0);\n\n  return Action;\n}(card_object_1.CardObject);\n\nexports.Action = Action;\n\nvar SubmitAction =\n/** @class */\nfunction (_super) {\n  __extends(SubmitAction, _super);\n\n  function SubmitAction() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._ignoreInputValidation = false;\n    _this._isPrepared = false;\n    return _this;\n  }\n\n  SubmitAction.prototype.internalGetReferencedInputs = function () {\n    var result = {};\n    var current = this.parent;\n    var inputs = [];\n\n    while (current) {\n      inputs = inputs.concat(current.getAllInputs(false));\n      current = current.parent;\n    }\n\n    for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n      var input = inputs_1[_i];\n\n      if (input.id) {\n        result[input.id] = input;\n      }\n    }\n\n    return result;\n  };\n\n  SubmitAction.prototype.internalPrepareForExecution = function (inputs) {\n    if (this._originalData) {\n      this._processedData = JSON.parse(JSON.stringify(this._originalData));\n    } else {\n      this._processedData = {};\n    }\n\n    if (this._processedData && inputs) {\n      for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {\n        var key = _a[_i];\n        var input = inputs[key];\n\n        if (input.id) {\n          this._processedData[input.id] = input.value;\n        }\n      }\n    }\n\n    this._isPrepared = true;\n  };\n\n  SubmitAction.prototype.getJsonTypeName = function () {\n    return SubmitAction.JsonTypeName;\n  };\n\n  Object.defineProperty(SubmitAction.prototype, \"ignoreInputValidation\", {\n    get: function () {\n      return this._ignoreInputValidation;\n    },\n    set: function (value) {\n      this._ignoreInputValidation = value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(SubmitAction.prototype, \"data\", {\n    get: function () {\n      return this._isPrepared ? this._processedData : this._originalData;\n    },\n    set: function (value) {\n      this._originalData = value;\n      this._isPrepared = false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  SubmitAction.dataProperty = new serialization_1.PropertyDefinition(serialization_1.Versions.v1_0, \"data\"); //#endregion\n  // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n\n  SubmitAction.JsonTypeName = \"Action.Submit\";\n\n  __decorate([serialization_1.property(SubmitAction.dataProperty)], SubmitAction.prototype, \"_originalData\", void 0);\n\n  __decorate([serialization_1.property(Action.ignoreInputValidationProperty)], SubmitAction.prototype, \"_ignoreInputValidation\", void 0);\n\n  return SubmitAction;\n}(Action);\n\nexports.SubmitAction = SubmitAction;\n\nvar OpenUrlAction =\n/** @class */\nfunction (_super) {\n  __extends(OpenUrlAction, _super);\n\n  function OpenUrlAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  OpenUrlAction.prototype.getJsonTypeName = function () {\n    return OpenUrlAction.JsonTypeName;\n  };\n\n  OpenUrlAction.prototype.getAriaRole = function () {\n    return \"link\";\n  };\n\n  OpenUrlAction.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (!this.url) {\n      context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet(\"url\"));\n    }\n  };\n\n  OpenUrlAction.prototype.getHref = function () {\n    return this.url;\n  }; //#region Schema\n\n\n  OpenUrlAction.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"url\"); //#endregion\n  // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n\n  OpenUrlAction.JsonTypeName = \"Action.OpenUrl\";\n\n  __decorate([serialization_1.property(OpenUrlAction.urlProperty)], OpenUrlAction.prototype, \"url\", void 0);\n\n  return OpenUrlAction;\n}(Action);\n\nexports.OpenUrlAction = OpenUrlAction;\n\nvar ToggleVisibilityAction =\n/** @class */\nfunction (_super) {\n  __extends(ToggleVisibilityAction, _super);\n\n  function ToggleVisibilityAction() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.targetElements = {};\n    return _this;\n  }\n\n  ToggleVisibilityAction.prototype.updateAriaControlsAttribute = function () {\n    // apply aria labels to make it clear which elements this action will toggle\n    if (this.targetElements) {\n      var elementIds = Object.keys(this.targetElements);\n\n      if (this._renderedElement) {\n        if (elementIds.length > 0) {\n          this._renderedElement.setAttribute(\"aria-controls\", elementIds.join(\" \"));\n        } else {\n          this._renderedElement.removeAttribute(\"aria-controls\");\n        }\n      }\n    }\n  };\n\n  ToggleVisibilityAction.prototype.getJsonTypeName = function () {\n    return ToggleVisibilityAction.JsonTypeName;\n  };\n\n  ToggleVisibilityAction.prototype.render = function (baseCssClass) {\n    if (baseCssClass === void 0) {\n      baseCssClass = \"ac-pushButton\";\n    }\n\n    _super.prototype.render.call(this, baseCssClass);\n\n    this.updateAriaControlsAttribute();\n  };\n\n  ToggleVisibilityAction.prototype.execute = function () {\n    if (this.parent) {\n      for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {\n        var elementId = _a[_i];\n        var targetElement = this.parent.getRootElement().getElementById(elementId);\n\n        if (targetElement) {\n          if (typeof this.targetElements[elementId] === \"boolean\") {\n            targetElement.isVisible = this.targetElements[elementId];\n          } else {\n            targetElement.isVisible = !targetElement.isVisible;\n          }\n        }\n      }\n    }\n  };\n\n  ToggleVisibilityAction.prototype.addTargetElement = function (elementId, isVisible) {\n    if (isVisible === void 0) {\n      isVisible = undefined;\n    }\n\n    this.targetElements[elementId] = isVisible;\n    this.updateAriaControlsAttribute();\n  };\n\n  ToggleVisibilityAction.prototype.removeTargetElement = function (elementId) {\n    delete this.targetElements[elementId];\n    this.updateAriaControlsAttribute();\n  };\n\n  ToggleVisibilityAction.targetElementsProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_2, \"targetElements\", function (sender, property, source, context) {\n    var result = {};\n\n    if (Array.isArray(source[property.name])) {\n      for (var _i = 0, _a = source[property.name]; _i < _a.length; _i++) {\n        var item = _a[_i];\n\n        if (typeof item === \"string\") {\n          result[item] = undefined;\n        } else if (typeof item === \"object\") {\n          var elementId = item[\"elementId\"];\n\n          if (typeof elementId === \"string\") {\n            result[elementId] = Utils.parseBool(item[\"isVisible\"]);\n          }\n        }\n      }\n    }\n\n    return result;\n  }, function (sender, property, target, value, context) {\n    var targetElements = [];\n\n    for (var _i = 0, _a = Object.keys(value); _i < _a.length; _i++) {\n      var id = _a[_i];\n\n      if (typeof value[id] === \"boolean\") {\n        targetElements.push({\n          elementId: id,\n          isVisible: value[id]\n        });\n      } else {\n        targetElements.push(id);\n      }\n    }\n\n    context.serializeArray(target, property.name, targetElements);\n  }, {}, function (sender) {\n    return {};\n  }); //#endregion\n  // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n\n  ToggleVisibilityAction.JsonTypeName = \"Action.ToggleVisibility\";\n\n  __decorate([serialization_1.property(ToggleVisibilityAction.targetElementsProperty)], ToggleVisibilityAction.prototype, \"targetElements\", void 0);\n\n  return ToggleVisibilityAction;\n}(Action);\n\nexports.ToggleVisibilityAction = ToggleVisibilityAction;\n\nvar StringWithSubstitutionProperty =\n/** @class */\nfunction (_super) {\n  __extends(StringWithSubstitutionProperty, _super);\n\n  function StringWithSubstitutionProperty(targetVersion, name) {\n    var _this = _super.call(this, targetVersion, name, undefined, function () {\n      return new shared_1.StringWithSubstitutions();\n    }) || this;\n\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    return _this;\n  }\n\n  StringWithSubstitutionProperty.prototype.parse = function (sender, source, context) {\n    var result = new shared_1.StringWithSubstitutions();\n    result.set(Utils.parseString(source[this.name]));\n    return result;\n  };\n\n  StringWithSubstitutionProperty.prototype.toJSON = function (sender, target, value, context) {\n    context.serializeValue(target, this.name, value.getOriginal());\n  };\n\n  return StringWithSubstitutionProperty;\n}(serialization_1.PropertyDefinition);\n\nvar HttpHeader =\n/** @class */\nfunction (_super) {\n  __extends(HttpHeader, _super); //#endregion\n\n\n  function HttpHeader(name, value) {\n    if (name === void 0) {\n      name = \"\";\n    }\n\n    if (value === void 0) {\n      value = \"\";\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.name = name;\n    _this.value = value;\n    return _this;\n  }\n\n  HttpHeader.prototype.getSchemaKey = function () {\n    return \"HttpHeader\";\n  };\n\n  HttpHeader.prototype.getReferencedInputs = function (inputs, referencedInputs) {\n    this._value.getReferencedInputs(inputs, referencedInputs);\n  };\n\n  HttpHeader.prototype.prepareForExecution = function (inputs) {\n    this._value.substituteInputValues(inputs, shared_1.ContentTypes.applicationXWwwFormUrlencoded);\n  };\n\n  Object.defineProperty(HttpHeader.prototype, \"value\", {\n    get: function () {\n      return this._value.get();\n    },\n    set: function (newValue) {\n      this._value.set(newValue);\n    },\n    enumerable: false,\n    configurable: true\n  }); //#region Schema\n\n  HttpHeader.nameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"name\");\n  HttpHeader.valueProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, \"value\");\n\n  __decorate([serialization_1.property(HttpHeader.nameProperty)], HttpHeader.prototype, \"name\", void 0);\n\n  __decorate([serialization_1.property(HttpHeader.valueProperty)], HttpHeader.prototype, \"_value\", void 0);\n\n  return HttpHeader;\n}(serialization_1.SerializableObject);\n\nexports.HttpHeader = HttpHeader;\n\nvar HttpAction =\n/** @class */\nfunction (_super) {\n  __extends(HttpAction, _super);\n\n  function HttpAction() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._ignoreInputValidation = false;\n    return _this;\n  }\n\n  HttpAction.prototype.populateSchema = function (schema) {\n    _super.prototype.populateSchema.call(this, schema);\n\n    schema.add(Action.ignoreInputValidationProperty);\n  };\n\n  HttpAction.prototype.internalGetReferencedInputs = function () {\n    var allInputs = this.parent ? this.parent.getRootElement().getAllInputs() : [];\n    var result = {};\n\n    this._url.getReferencedInputs(allInputs, result);\n\n    for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\n      var header = _a[_i];\n      header.getReferencedInputs(allInputs, result);\n    }\n\n    this._body.getReferencedInputs(allInputs, result);\n\n    return result;\n  };\n\n  HttpAction.prototype.internalPrepareForExecution = function (inputs) {\n    if (inputs) {\n      this._url.substituteInputValues(inputs, shared_1.ContentTypes.applicationXWwwFormUrlencoded);\n\n      var contentType = shared_1.ContentTypes.applicationJson;\n\n      for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\n        var header = _a[_i];\n        header.prepareForExecution(inputs);\n\n        if (header.name && header.name.toLowerCase() == \"content-type\") {\n          contentType = header.value;\n        }\n      }\n\n      this._body.substituteInputValues(inputs, contentType);\n    }\n  };\n\n  ;\n\n  HttpAction.prototype.getJsonTypeName = function () {\n    return HttpAction.JsonTypeName;\n  };\n\n  HttpAction.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (!this.url) {\n      context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet(\"url\"));\n    }\n\n    if (this.headers.length > 0) {\n      for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\n        var header = _a[_i];\n\n        if (!header.name) {\n          context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.actionHttpHeadersMustHaveNameAndValue());\n        }\n      }\n    }\n  };\n\n  Object.defineProperty(HttpAction.prototype, \"ignoreInputValidation\", {\n    get: function () {\n      return this._ignoreInputValidation;\n    },\n    set: function (value) {\n      this._ignoreInputValidation = value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HttpAction.prototype, \"url\", {\n    get: function () {\n      return this._url.get();\n    },\n    set: function (value) {\n      this._url.set(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(HttpAction.prototype, \"body\", {\n    get: function () {\n      return this._body.get();\n    },\n    set: function (value) {\n      this._body.set(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  HttpAction.urlProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, \"url\");\n  HttpAction.bodyProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, \"body\");\n  HttpAction.methodProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"method\");\n  HttpAction.headersProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"headers\", HttpHeader); //#endregion\n  // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n\n  HttpAction.JsonTypeName = \"Action.Http\";\n\n  __decorate([serialization_1.property(HttpAction.urlProperty)], HttpAction.prototype, \"_url\", void 0);\n\n  __decorate([serialization_1.property(HttpAction.bodyProperty)], HttpAction.prototype, \"_body\", void 0);\n\n  __decorate([serialization_1.property(HttpAction.methodProperty)], HttpAction.prototype, \"method\", void 0);\n\n  __decorate([serialization_1.property(HttpAction.headersProperty)], HttpAction.prototype, \"headers\", void 0);\n\n  __decorate([serialization_1.property(Action.ignoreInputValidationProperty)], HttpAction.prototype, \"_ignoreInputValidation\", void 0);\n\n  return HttpAction;\n}(Action);\n\nexports.HttpAction = HttpAction;\n\nvar ShowCardAction =\n/** @class */\nfunction (_super) {\n  __extends(ShowCardAction, _super);\n\n  function ShowCardAction() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.card = new InlineAdaptiveCard();\n    return _this;\n  }\n\n  ShowCardAction.prototype.internalParse = function (source, context) {\n    _super.prototype.internalParse.call(this, source, context);\n\n    var jsonCard = source[\"card\"];\n\n    if (jsonCard) {\n      this.card.parse(jsonCard, context);\n    } else {\n      context.logParseEvent(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.showCardMustHaveCard());\n    }\n  };\n\n  ShowCardAction.prototype.internalToJSON = function (target, context) {\n    _super.prototype.internalToJSON.call(this, target, context);\n\n    if (this.card) {\n      context.serializeValue(target, \"card\", this.card.toJSON(context));\n    }\n  };\n\n  ShowCardAction.prototype.addCssClasses = function (element) {\n    _super.prototype.addCssClasses.call(this, element);\n\n    if (this.parent) {\n      element.classList.add(this.parent.hostConfig.makeCssClassName(\"expandable\"));\n    }\n  };\n\n  ShowCardAction.prototype.raiseExecuteActionEvent = function () {\n    if (this.hostConfig.actions.showCard.actionMode === Enums.ShowCardActionMode.Popup) {\n      // Only raise the event in Popup mode.\n      _super.prototype.raiseExecuteActionEvent.call(this);\n    }\n  };\n\n  ShowCardAction.prototype.getJsonTypeName = function () {\n    return ShowCardAction.JsonTypeName;\n  };\n\n  ShowCardAction.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    this.card.internalValidateProperties(context);\n  };\n\n  ShowCardAction.prototype.updateActionButtonCssStyle = function (actionButtonElement, buttonState) {\n    if (buttonState === void 0) {\n      buttonState = 0\n      /* Normal */\n      ;\n    }\n\n    _super.prototype.updateActionButtonCssStyle.call(this, actionButtonElement);\n\n    if (this.parent) {\n      actionButtonElement.classList.add(this.parent.hostConfig.makeCssClassName(\"expandable\"));\n      actionButtonElement.setAttribute(\"aria-expanded\", (buttonState === 1\n      /* Expanded */\n      ).toString());\n    }\n  };\n\n  ShowCardAction.prototype.setParent = function (value) {\n    _super.prototype.setParent.call(this, value);\n\n    this.card.setParent(value);\n  };\n\n  ShowCardAction.prototype.getAllInputs = function (processActions) {\n    if (processActions === void 0) {\n      processActions = true;\n    }\n\n    return this.card.getAllInputs(processActions);\n  };\n\n  ShowCardAction.prototype.getResourceInformation = function () {\n    return _super.prototype.getResourceInformation.call(this).concat(this.card.getResourceInformation());\n  };\n\n  ShowCardAction.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n\n    if (!result) {\n      result = this.card.getActionById(id);\n    }\n\n    return result;\n  }; // Note the \"weird\" way this field is declared is to work around a breaking\n  // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\n\n\n  ShowCardAction.JsonTypeName = \"Action.ShowCard\";\n  return ShowCardAction;\n}(Action);\n\nexports.ShowCardAction = ShowCardAction;\n\nvar ActionCollection =\n/** @class */\nfunction () {\n  function ActionCollection(owner) {\n    this._renderedActionCount = 0;\n    this.items = [];\n    this.buttons = [];\n    this._owner = owner;\n  }\n\n  ActionCollection.prototype.isActionAllowed = function (action) {\n    var forbiddenTypes = this._owner.getForbiddenActionTypes();\n\n    if (forbiddenTypes) {\n      for (var _i = 0, forbiddenTypes_1 = forbiddenTypes; _i < forbiddenTypes_1.length; _i++) {\n        var forbiddenType = forbiddenTypes_1[_i];\n\n        if (action.constructor === forbiddenType) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n\n  ActionCollection.prototype.refreshContainer = function () {\n    this._actionCardContainer.innerHTML = \"\";\n\n    if (!this._actionCard) {\n      this._actionCardContainer.style.marginTop = \"0px\";\n      return;\n    }\n\n    this._actionCardContainer.style.marginTop = this._renderedActionCount > 0 ? this._owner.hostConfig.actions.showCard.inlineTopMargin + \"px\" : \"0px\";\n\n    var padding = this._owner.getEffectivePadding();\n\n    this._owner.getImmediateSurroundingPadding(padding);\n\n    var physicalPadding = this._owner.hostConfig.paddingDefinitionToSpacingDefinition(padding);\n\n    if (this._actionCard) {\n      this._actionCard.style.paddingLeft = physicalPadding.left + \"px\";\n      this._actionCard.style.paddingRight = physicalPadding.right + \"px\";\n      this._actionCard.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\n      this._actionCard.style.marginRight = \"-\" + physicalPadding.right + \"px\";\n\n      if (physicalPadding.bottom != 0 && !this._owner.isDesignMode()) {\n        this._actionCard.style.paddingBottom = physicalPadding.bottom + \"px\";\n        this._actionCard.style.marginBottom = \"-\" + physicalPadding.bottom + \"px\";\n      }\n\n      Utils.appendChild(this._actionCardContainer, this._actionCard);\n    }\n  };\n\n  ActionCollection.prototype.layoutChanged = function () {\n    this._owner.getRootElement().updateLayout();\n  };\n\n  ActionCollection.prototype.showActionCard = function (action, suppressStyle, raiseEvent) {\n    if (suppressStyle === void 0) {\n      suppressStyle = false;\n    }\n\n    if (raiseEvent === void 0) {\n      raiseEvent = true;\n    }\n\n    action.card.suppressStyle = suppressStyle; // Always re-render a ShowCard action in design mode; reuse already rendered ShowCard (if available) otherwise\n\n    var renderedCard = action.card.renderedElement && !this._owner.isDesignMode() ? action.card.renderedElement : action.card.render();\n    this._actionCard = renderedCard;\n    this._expandedAction = action;\n    this.refreshContainer();\n\n    if (raiseEvent) {\n      this.layoutChanged();\n      raiseInlineCardExpandedEvent(action, true);\n    }\n  };\n\n  ActionCollection.prototype.collapseExpandedAction = function () {\n    for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\n      var button = _a[_i];\n      button.state = 0\n      /* Normal */\n      ;\n    }\n\n    var previouslyExpandedAction = this._expandedAction;\n    this._expandedAction = undefined;\n    this._actionCard = undefined;\n    this.refreshContainer();\n\n    if (previouslyExpandedAction) {\n      this.layoutChanged();\n      raiseInlineCardExpandedEvent(previouslyExpandedAction, false);\n    }\n  };\n\n  ActionCollection.prototype.expandShowCardAction = function (action, raiseEvent) {\n    for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\n      var button = _a[_i];\n\n      if (button.action !== action) {\n        button.state = 2\n        /* Subdued */\n        ;\n      } else {\n        button.state = 1\n        /* Expanded */\n        ;\n      }\n    }\n\n    this.showActionCard(action, !(this._owner.isAtTheVeryLeft() && this._owner.isAtTheVeryRight()), raiseEvent);\n  };\n\n  ActionCollection.prototype.getParentContainer = function () {\n    if (this._owner instanceof Container) {\n      return this._owner;\n    } else {\n      return this._owner.getParentContainer();\n    }\n  };\n\n  ActionCollection.prototype.findActionButton = function (action) {\n    for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\n      var actionButton = _a[_i];\n\n      if (actionButton.action == action) {\n        return actionButton;\n      }\n    }\n\n    return undefined;\n  };\n\n  ActionCollection.prototype.actionExecuted = function (action) {\n    if (!(action instanceof ShowCardAction)) {\n      this.collapseExpandedAction();\n    } else {\n      if (action === this._expandedAction) {\n        this.collapseExpandedAction();\n      } else {\n        this.expandShowCardAction(action, true);\n      }\n    }\n  };\n\n  ActionCollection.prototype.parse = function (source, context) {\n    this.clear();\n\n    if (Array.isArray(source)) {\n      for (var _i = 0, source_1 = source; _i < source_1.length; _i++) {\n        var jsonAction = source_1[_i];\n        var action = context.parseAction(this._owner, jsonAction, [], !this._owner.isDesignMode());\n\n        if (action) {\n          this.addAction(action);\n        }\n      }\n    }\n  };\n\n  ActionCollection.prototype.toJSON = function (target, propertyName, context) {\n    context.serializeArray(target, propertyName, this.items);\n  };\n\n  ActionCollection.prototype.getActionById = function (id) {\n    var result = undefined;\n\n    for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      result = item.getActionById(id);\n\n      if (result) {\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  ActionCollection.prototype.validateProperties = function (context) {\n    if (this._owner.hostConfig.actions.maxActions && this.items.length > this._owner.hostConfig.actions.maxActions) {\n      context.addFailure(this._owner, Enums.ValidationEvent.TooManyActions, strings_1.Strings.errors.tooManyActions(this._owner.hostConfig.actions.maxActions));\n    }\n\n    if (this.items.length > 0 && !this._owner.hostConfig.supportsInteractivity) {\n      context.addFailure(this._owner, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.interactivityNotAllowed());\n    }\n\n    for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n\n      if (!this.isActionAllowed(item)) {\n        context.addFailure(this._owner, Enums.ValidationEvent.ActionTypeNotAllowed, strings_1.Strings.errors.actionTypeNotAllowed(item.getJsonTypeName()));\n      }\n\n      item.internalValidateProperties(context);\n    }\n  };\n\n  ActionCollection.prototype.render = function (orientation, isDesignMode) {\n    // Cache hostConfig for better perf\n    var hostConfig = this._owner.hostConfig;\n\n    if (!hostConfig.supportsInteractivity) {\n      return undefined;\n    }\n\n    var element = document.createElement(\"div\");\n    var maxActions = hostConfig.actions.maxActions ? Math.min(hostConfig.actions.maxActions, this.items.length) : this.items.length;\n    this._actionCardContainer = document.createElement(\"div\");\n    this._renderedActionCount = 0;\n\n    if (hostConfig.actions.preExpandSingleShowCardAction && maxActions == 1 && this.items[0] instanceof ShowCardAction && this.isActionAllowed(this.items[0])) {\n      this.showActionCard(this.items[0], true);\n      this._renderedActionCount = 1;\n    } else {\n      var buttonStrip = document.createElement(\"div\");\n      buttonStrip.className = hostConfig.makeCssClassName(\"ac-actionSet\");\n      buttonStrip.style.display = \"flex\";\n      buttonStrip.setAttribute(\"role\", \"menubar\");\n\n      if (orientation == Enums.Orientation.Horizontal) {\n        buttonStrip.style.flexDirection = \"row\";\n\n        if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\n          switch (this._owner.horizontalAlignment) {\n            case Enums.HorizontalAlignment.Center:\n              buttonStrip.style.justifyContent = \"center\";\n              break;\n\n            case Enums.HorizontalAlignment.Right:\n              buttonStrip.style.justifyContent = \"flex-end\";\n              break;\n\n            default:\n              buttonStrip.style.justifyContent = \"flex-start\";\n              break;\n          }\n        } else {\n          switch (hostConfig.actions.actionAlignment) {\n            case Enums.ActionAlignment.Center:\n              buttonStrip.style.justifyContent = \"center\";\n              break;\n\n            case Enums.ActionAlignment.Right:\n              buttonStrip.style.justifyContent = \"flex-end\";\n              break;\n\n            default:\n              buttonStrip.style.justifyContent = \"flex-start\";\n              break;\n          }\n        }\n      } else {\n        buttonStrip.style.flexDirection = \"column\";\n\n        if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\n          switch (this._owner.horizontalAlignment) {\n            case Enums.HorizontalAlignment.Center:\n              buttonStrip.style.alignItems = \"center\";\n              break;\n\n            case Enums.HorizontalAlignment.Right:\n              buttonStrip.style.alignItems = \"flex-end\";\n              break;\n\n            default:\n              buttonStrip.style.alignItems = \"flex-start\";\n              break;\n          }\n        } else {\n          switch (hostConfig.actions.actionAlignment) {\n            case Enums.ActionAlignment.Center:\n              buttonStrip.style.alignItems = \"center\";\n              break;\n\n            case Enums.ActionAlignment.Right:\n              buttonStrip.style.alignItems = \"flex-end\";\n              break;\n\n            case Enums.ActionAlignment.Stretch:\n              buttonStrip.style.alignItems = \"stretch\";\n              break;\n\n            default:\n              buttonStrip.style.alignItems = \"flex-start\";\n              break;\n          }\n        }\n      }\n\n      var parentContainer = this.getParentContainer();\n\n      if (parentContainer) {\n        var parentContainerStyle = parentContainer.getEffectiveStyle();\n        var allowedActions = this.items.filter(this.isActionAllowed.bind(this));\n\n        for (var i = 0; i < allowedActions.length; i++) {\n          var actionButton = this.findActionButton(allowedActions[i]);\n\n          if (!actionButton) {\n            actionButton = new ActionButton(allowedActions[i], parentContainerStyle);\n\n            actionButton.onClick = function (ab) {\n              ab.action.execute();\n            };\n\n            this.buttons.push(actionButton);\n          }\n\n          actionButton.render();\n\n          if (actionButton.action.renderedElement) {\n            actionButton.action.renderedElement.setAttribute(\"aria-posinset\", (i + 1).toString());\n            actionButton.action.renderedElement.setAttribute(\"aria-setsize\", allowedActions.length.toString());\n            actionButton.action.renderedElement.setAttribute(\"role\", \"menuitem\");\n\n            if (hostConfig.actions.actionsOrientation == Enums.Orientation.Horizontal && hostConfig.actions.actionAlignment == Enums.ActionAlignment.Stretch) {\n              actionButton.action.renderedElement.style.flex = \"0 1 100%\";\n            } else {\n              actionButton.action.renderedElement.style.flex = \"0 1 auto\";\n            }\n\n            buttonStrip.appendChild(actionButton.action.renderedElement);\n            this._renderedActionCount++;\n\n            if (this._renderedActionCount >= hostConfig.actions.maxActions || i == this.items.length - 1) {\n              break;\n            } else if (hostConfig.actions.buttonSpacing > 0) {\n              var spacer = document.createElement(\"div\");\n\n              if (orientation === Enums.Orientation.Horizontal) {\n                spacer.style.flex = \"0 0 auto\";\n                spacer.style.width = hostConfig.actions.buttonSpacing + \"px\";\n              } else {\n                spacer.style.height = hostConfig.actions.buttonSpacing + \"px\";\n              }\n\n              Utils.appendChild(buttonStrip, spacer);\n            }\n          }\n        }\n      }\n\n      var buttonStripContainer = document.createElement(\"div\");\n      buttonStripContainer.style.overflow = \"hidden\";\n      buttonStripContainer.appendChild(buttonStrip);\n      Utils.appendChild(element, buttonStripContainer);\n    }\n\n    Utils.appendChild(element, this._actionCardContainer);\n\n    for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\n      var button = _a[_i];\n\n      if (button.state == 1\n      /* Expanded */\n      ) {\n          this.expandShowCardAction(button.action, false);\n          break;\n        }\n    }\n\n    return this._renderedActionCount > 0 ? element : undefined;\n  };\n\n  ActionCollection.prototype.addAction = function (action) {\n    if (!action) {\n      throw new Error(\"The action parameter cannot be null.\");\n    }\n\n    if ((!action.parent || action.parent === this._owner) && this.items.indexOf(action) < 0) {\n      this.items.push(action);\n\n      if (!action.parent) {\n        action.setParent(this._owner);\n      }\n\n      action[\"_actionCollection\"] = this;\n    } else {\n      throw new Error(strings_1.Strings.errors.actionAlreadyParented());\n    }\n  };\n\n  ActionCollection.prototype.removeAction = function (action) {\n    if (this.expandedAction && this._expandedAction == action) {\n      this.collapseExpandedAction();\n    }\n\n    var actionIndex = this.items.indexOf(action);\n\n    if (actionIndex >= 0) {\n      this.items.splice(actionIndex, 1);\n      action.setParent(undefined);\n      action[\"_actionCollection\"] = undefined;\n\n      for (var i = 0; i < this.buttons.length; i++) {\n        if (this.buttons[i].action == action) {\n          this.buttons.splice(i, 1);\n          break;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  ActionCollection.prototype.clear = function () {\n    this.items = [];\n    this.buttons = [];\n    this._expandedAction = undefined;\n    this._renderedActionCount = 0;\n  };\n\n  ActionCollection.prototype.getAllInputs = function (processActions) {\n    if (processActions === void 0) {\n      processActions = true;\n    }\n\n    var result = [];\n\n    if (processActions) {\n      for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n        var action = _a[_i];\n        result = result.concat(action.getAllInputs());\n      }\n    }\n\n    return result;\n  };\n\n  ActionCollection.prototype.getResourceInformation = function () {\n    var result = [];\n\n    for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\n      var action = _a[_i];\n      result = result.concat(action.getResourceInformation());\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(ActionCollection.prototype, \"renderedActionCount\", {\n    get: function () {\n      return this._renderedActionCount;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ActionCollection.prototype, \"expandedAction\", {\n    get: function () {\n      return this._expandedAction;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return ActionCollection;\n}();\n\nvar ActionSet =\n/** @class */\nfunction (_super) {\n  __extends(ActionSet, _super);\n\n  function ActionSet() {\n    var _this = _super.call(this) || this;\n\n    _this._actionCollection = new ActionCollection(_this);\n    return _this;\n  }\n\n  ActionSet.prototype.internalParse = function (source, context) {\n    _super.prototype.internalParse.call(this, source, context);\n\n    this._actionCollection.parse(source[\"actions\"], context);\n  };\n\n  ActionSet.prototype.internalToJSON = function (target, context) {\n    _super.prototype.internalToJSON.call(this, target, context);\n\n    this._actionCollection.toJSON(target, \"actions\", context);\n  };\n\n  ActionSet.prototype.internalRender = function () {\n    return this._actionCollection.render(this.orientation !== undefined ? this.orientation : this.hostConfig.actions.actionsOrientation, this.isDesignMode());\n  };\n\n  ActionSet.prototype.isBleedingAtBottom = function () {\n    if (this._actionCollection.renderedActionCount == 0) {\n      return _super.prototype.isBleedingAtBottom.call(this);\n    } else {\n      if (this._actionCollection.items.length == 1) {\n        return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;\n      } else {\n        return this._actionCollection.expandedAction !== undefined;\n      }\n    }\n  };\n\n  ActionSet.prototype.getJsonTypeName = function () {\n    return \"ActionSet\";\n  };\n\n  ActionSet.prototype.getActionCount = function () {\n    return this._actionCollection.items.length;\n  };\n\n  ActionSet.prototype.getActionAt = function (index) {\n    if (index >= 0 && index < this.getActionCount()) {\n      return this._actionCollection.items[index];\n    } else {\n      return _super.prototype.getActionAt.call(this, index);\n    }\n  };\n\n  ActionSet.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    this._actionCollection.validateProperties(context);\n  };\n\n  ActionSet.prototype.addAction = function (action) {\n    this._actionCollection.addAction(action);\n  };\n\n  ActionSet.prototype.getAllInputs = function (processActions) {\n    if (processActions === void 0) {\n      processActions = true;\n    }\n\n    return processActions ? this._actionCollection.getAllInputs() : [];\n  };\n\n  ActionSet.prototype.getResourceInformation = function () {\n    return this._actionCollection.getResourceInformation();\n  };\n\n  Object.defineProperty(ActionSet.prototype, \"isInteractive\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  }); //#region Schema\n\n  ActionSet.orientationProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_1, \"orientation\", Enums.Orientation);\n\n  __decorate([serialization_1.property(ActionSet.orientationProperty)], ActionSet.prototype, \"orientation\", void 0);\n\n  return ActionSet;\n}(CardElement);\n\nexports.ActionSet = ActionSet;\n\nvar StylableCardElementContainer =\n/** @class */\nfunction (_super) {\n  __extends(StylableCardElementContainer, _super);\n\n  function StylableCardElementContainer() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._bleed = false;\n    return _this;\n  }\n\n  Object.defineProperty(StylableCardElementContainer.prototype, \"style\", {\n    get: function () {\n      if (this.allowCustomStyle) {\n        var style = this.getValue(StylableCardElementContainer.styleProperty);\n\n        if (style && this.hostConfig.containerStyles.getStyleByName(style)) {\n          return style;\n        }\n      }\n\n      return undefined;\n    },\n    set: function (value) {\n      this.setValue(StylableCardElementContainer.styleProperty, value);\n    },\n    enumerable: false,\n    configurable: true\n  }); //#endregion\n\n  StylableCardElementContainer.prototype.adjustRenderedElementSize = function (renderedElement) {\n    _super.prototype.adjustRenderedElementSize.call(this, renderedElement);\n\n    if (this.minPixelHeight) {\n      renderedElement.style.minHeight = this.minPixelHeight + \"px\";\n    }\n  };\n\n  StylableCardElementContainer.prototype.applyBackground = function () {\n    if (this.renderedElement) {\n      var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.style, this.hostConfig.containerStyles.getStyleByName(this.defaultStyle));\n\n      if (styleDefinition.backgroundColor) {\n        var bgColor = Utils.stringToCssColor(styleDefinition.backgroundColor);\n        this.renderedElement.style.backgroundColor = bgColor;\n        this.renderedElement.style.border = \"1px solid \" + bgColor;\n      }\n    }\n  };\n\n  StylableCardElementContainer.prototype.applyPadding = function () {\n    _super.prototype.applyPadding.call(this);\n\n    if (!this.renderedElement) {\n      return;\n    }\n\n    var physicalPadding = new shared_1.SpacingDefinition();\n\n    if (this.getEffectivePadding()) {\n      physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\n    }\n\n    this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\n    this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\n    this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\n    this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\n\n    if (this.isBleeding()) {\n      // Bleed into the first parent that does have padding\n      var padding = new shared_1.PaddingDefinition();\n      this.getImmediateSurroundingPadding(padding);\n      var surroundingPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\n      this.renderedElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\n      this.renderedElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\n\n      if (!this.isDesignMode()) {\n        this.renderedElement.style.marginTop = \"-\" + surroundingPadding.top + \"px\";\n        this.renderedElement.style.marginBottom = \"-\" + surroundingPadding.bottom + \"px\";\n      }\n\n      if (this.separatorElement && this.separatorOrientation == Enums.Orientation.Horizontal) {\n        this.separatorElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\n        this.separatorElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\n      }\n    } else {\n      this.renderedElement.style.marginRight = \"0\";\n      this.renderedElement.style.marginLeft = \"0\";\n      this.renderedElement.style.marginTop = \"0\";\n      this.renderedElement.style.marginBottom = \"0\";\n\n      if (this.separatorElement) {\n        this.separatorElement.style.marginRight = \"0\";\n        this.separatorElement.style.marginLeft = \"0\";\n      }\n    }\n  };\n\n  StylableCardElementContainer.prototype.getHasBackground = function () {\n    var currentElement = this.parent;\n\n    while (currentElement) {\n      var currentElementHasBackgroundImage = currentElement instanceof Container ? currentElement.backgroundImage.isValid() : false;\n\n      if (currentElement instanceof StylableCardElementContainer) {\n        if (this.hasExplicitStyle && (currentElement.getEffectiveStyle() != this.getEffectiveStyle() || currentElementHasBackgroundImage)) {\n          return true;\n        }\n      }\n\n      currentElement = currentElement.parent;\n    }\n\n    return false;\n  };\n\n  StylableCardElementContainer.prototype.getDefaultPadding = function () {\n    return this.getHasBackground() ? new shared_1.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding) : _super.prototype.getDefaultPadding.call(this);\n  };\n\n  StylableCardElementContainer.prototype.getHasExpandedAction = function () {\n    return false;\n  };\n\n  StylableCardElementContainer.prototype.getBleed = function () {\n    return this._bleed;\n  };\n\n  StylableCardElementContainer.prototype.setBleed = function (value) {\n    this._bleed = value;\n  };\n\n  Object.defineProperty(StylableCardElementContainer.prototype, \"renderedActionCount\", {\n    get: function () {\n      return 0;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StylableCardElementContainer.prototype, \"hasExplicitStyle\", {\n    get: function () {\n      return this.getValue(StylableCardElementContainer.styleProperty) !== undefined;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StylableCardElementContainer.prototype, \"allowCustomStyle\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StylableCardElementContainer.prototype.isBleeding = function () {\n    return (this.getHasBackground() || this.hostConfig.alwaysAllowBleed) && this.getBleed();\n  };\n\n  StylableCardElementContainer.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    var explicitStyle = this.getValue(StylableCardElementContainer.styleProperty);\n\n    if (explicitStyle !== undefined) {\n      var styleDefinition = this.hostConfig.containerStyles.getStyleByName(explicitStyle);\n\n      if (!styleDefinition) {\n        context.addFailure(this, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(explicitStyle, \"style\"));\n      }\n    }\n  };\n\n  StylableCardElementContainer.prototype.render = function () {\n    var renderedElement = _super.prototype.render.call(this);\n\n    if (renderedElement && this.getHasBackground()) {\n      this.applyBackground();\n    }\n\n    return renderedElement;\n  };\n\n  StylableCardElementContainer.prototype.getEffectiveStyle = function () {\n    var effectiveStyle = this.style;\n    return effectiveStyle ? effectiveStyle : _super.prototype.getEffectiveStyle.call(this);\n  };\n\n  StylableCardElementContainer.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_0, \"style\", [{\n    value: Enums.ContainerStyle.Default\n  }, {\n    value: Enums.ContainerStyle.Emphasis\n  }, {\n    targetVersion: serialization_1.Versions.v1_2,\n    value: Enums.ContainerStyle.Accent\n  }, {\n    targetVersion: serialization_1.Versions.v1_2,\n    value: Enums.ContainerStyle.Good\n  }, {\n    targetVersion: serialization_1.Versions.v1_2,\n    value: Enums.ContainerStyle.Attention\n  }, {\n    targetVersion: serialization_1.Versions.v1_2,\n    value: Enums.ContainerStyle.Warning\n  }]);\n  StylableCardElementContainer.bleedProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"bleed\", false);\n  StylableCardElementContainer.minHeightProperty = new serialization_1.PixelSizeProperty(serialization_1.Versions.v1_2, \"minHeight\");\n\n  __decorate([serialization_1.property(StylableCardElementContainer.styleProperty)], StylableCardElementContainer.prototype, \"style\", null);\n\n  __decorate([serialization_1.property(StylableCardElementContainer.bleedProperty)], StylableCardElementContainer.prototype, \"_bleed\", void 0);\n\n  __decorate([serialization_1.property(StylableCardElementContainer.minHeightProperty)], StylableCardElementContainer.prototype, \"minPixelHeight\", void 0);\n\n  return StylableCardElementContainer;\n}(CardElementContainer);\n\nexports.StylableCardElementContainer = StylableCardElementContainer;\n\nvar BackgroundImage =\n/** @class */\nfunction (_super) {\n  __extends(BackgroundImage, _super);\n\n  function BackgroundImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  } //#endregion\n\n\n  BackgroundImage.prototype.getSchemaKey = function () {\n    return \"BackgroundImage\";\n  };\n\n  BackgroundImage.prototype.internalParse = function (source, context) {\n    if (typeof source === \"string\") {\n      this.resetDefaultValues();\n      this.url = source;\n    } else {\n      return _super.prototype.internalParse.call(this, source, context);\n    }\n  };\n\n  BackgroundImage.prototype.apply = function (element) {\n    if (this.url && element.renderedElement) {\n      element.renderedElement.style.backgroundImage = \"url('\" + element.preProcessPropertyValue(BackgroundImage.urlProperty, this.url) + \"')\";\n\n      switch (this.fillMode) {\n        case Enums.FillMode.Repeat:\n          element.renderedElement.style.backgroundRepeat = \"repeat\";\n          break;\n\n        case Enums.FillMode.RepeatHorizontally:\n          element.renderedElement.style.backgroundRepeat = \"repeat-x\";\n          break;\n\n        case Enums.FillMode.RepeatVertically:\n          element.renderedElement.style.backgroundRepeat = \"repeat-y\";\n          break;\n\n        case Enums.FillMode.Cover:\n        default:\n          element.renderedElement.style.backgroundRepeat = \"no-repeat\";\n          element.renderedElement.style.backgroundSize = \"cover\";\n          break;\n      }\n\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.renderedElement.style.backgroundPositionX = \"center\";\n          break;\n\n        case Enums.HorizontalAlignment.Right:\n          element.renderedElement.style.backgroundPositionX = \"right\";\n          break;\n      }\n\n      switch (this.verticalAlignment) {\n        case Enums.VerticalAlignment.Center:\n          element.renderedElement.style.backgroundPositionY = \"center\";\n          break;\n\n        case Enums.VerticalAlignment.Bottom:\n          element.renderedElement.style.backgroundPositionY = \"bottom\";\n          break;\n      }\n    }\n  };\n\n  BackgroundImage.prototype.isValid = function () {\n    return this.url ? true : false;\n  }; //#region Schema\n\n\n  BackgroundImage.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"url\");\n  BackgroundImage.fillModeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"fillMode\", Enums.FillMode, Enums.FillMode.Cover);\n  BackgroundImage.horizontalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"horizontalAlignment\", Enums.HorizontalAlignment, Enums.HorizontalAlignment.Left);\n  BackgroundImage.verticalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"verticalAlignment\", Enums.VerticalAlignment, Enums.VerticalAlignment.Top);\n\n  __decorate([serialization_1.property(BackgroundImage.urlProperty)], BackgroundImage.prototype, \"url\", void 0);\n\n  __decorate([serialization_1.property(BackgroundImage.fillModeProperty)], BackgroundImage.prototype, \"fillMode\", void 0);\n\n  __decorate([serialization_1.property(BackgroundImage.horizontalAlignmentProperty)], BackgroundImage.prototype, \"horizontalAlignment\", void 0);\n\n  __decorate([serialization_1.property(BackgroundImage.verticalAlignmentProperty)], BackgroundImage.prototype, \"verticalAlignment\", void 0);\n\n  return BackgroundImage;\n}(serialization_1.SerializableObject);\n\nexports.BackgroundImage = BackgroundImage;\n\nvar Container =\n/** @class */\nfunction (_super) {\n  __extends(Container, _super);\n\n  function Container() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.verticalContentAlignment = Enums.VerticalAlignment.Top; //#endregion\n\n    _this._items = [];\n    _this._renderedItems = [];\n    return _this;\n  }\n\n  Object.defineProperty(Container.prototype, \"backgroundImage\", {\n    get: function () {\n      return this.getValue(Container.backgroundImageProperty);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Container.prototype.insertItemAt = function (item, index, forceInsert) {\n    if (!item.parent || forceInsert) {\n      if (item.isStandalone) {\n        if (index < 0 || index >= this._items.length) {\n          this._items.push(item);\n        } else {\n          this._items.splice(index, 0, item);\n        }\n\n        item.setParent(this);\n      } else {\n        throw new Error(strings_1.Strings.errors.elementTypeNotStandalone(item.getJsonTypeName()));\n      }\n    } else {\n      throw new Error(strings_1.Strings.errors.elementAlreadyParented());\n    }\n  };\n\n  Container.prototype.supportsExcplitiHeight = function () {\n    return true;\n  };\n\n  Container.prototype.getItemsCollectionPropertyName = function () {\n    return \"items\";\n  };\n\n  Container.prototype.applyBackground = function () {\n    if (this.backgroundImage.isValid() && this.renderedElement) {\n      this.backgroundImage.apply(this);\n    }\n\n    _super.prototype.applyBackground.call(this);\n  };\n\n  Container.prototype.internalRender = function () {\n    this._renderedItems = []; // Cache hostConfig to avoid walking the parent hierarchy several times\n\n    var hostConfig = this.hostConfig;\n    var element = document.createElement(\"div\");\n\n    if (this.rtl !== undefined && this.rtl) {\n      element.dir = \"rtl\";\n    }\n\n    element.classList.add(hostConfig.makeCssClassName(\"ac-container\"));\n    element.style.display = \"flex\";\n    element.style.flexDirection = \"column\";\n\n    if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {\n      // Forces the container to be at least as tall as its content.\n      //\n      // Fixes a quirk in Chrome where, for nested flex elements, the\n      // inner element's height would never exceed the outer element's\n      // height. This caused overflow truncation to break -- containers\n      // would always be measured as not overflowing, since their heights\n      // were constrained by their parents as opposed to truly reflecting\n      // the height of their content.\n      //\n      // See the \"Browser Rendering Notes\" section of this answer:\n      // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size\n      element.style.minHeight = '-webkit-min-content';\n    }\n\n    switch (this.verticalContentAlignment) {\n      case Enums.VerticalAlignment.Center:\n        element.style.justifyContent = \"center\";\n        break;\n\n      case Enums.VerticalAlignment.Bottom:\n        element.style.justifyContent = \"flex-end\";\n        break;\n\n      default:\n        element.style.justifyContent = \"flex-start\";\n        break;\n    }\n\n    if (this._items.length > 0) {\n      for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n        var item = _a[_i];\n        var renderedItem = this.isElementAllowed(item) ? item.render() : undefined;\n\n        if (renderedItem) {\n          if (this._renderedItems.length > 0 && item.separatorElement) {\n            item.separatorElement.style.flex = \"0 0 auto\";\n            Utils.appendChild(element, item.separatorElement);\n          }\n\n          Utils.appendChild(element, renderedItem);\n\n          this._renderedItems.push(item);\n        }\n      }\n    } else {\n      if (this.isDesignMode()) {\n        var placeholderElement = this.createPlaceholderElement();\n        placeholderElement.style.width = \"100%\";\n        placeholderElement.style.height = \"100%\";\n        element.appendChild(placeholderElement);\n      }\n    }\n\n    return element;\n  };\n\n  Container.prototype.truncateOverflow = function (maxHeight) {\n    if (this.renderedElement) {\n      // Add 1 to account for rounding differences between browsers\n      var boundary_1 = this.renderedElement.offsetTop + maxHeight + 1;\n\n      var handleElement_1 = function (cardElement) {\n        var elt = cardElement.renderedElement;\n\n        if (elt) {\n          switch (Utils.getFitStatus(elt, boundary_1)) {\n            case Enums.ContainerFitStatus.FullyInContainer:\n              var sizeChanged = cardElement['resetOverflow'](); // If the element's size changed after resetting content,\n              // we have to check if it still fits fully in the card\n\n              if (sizeChanged) {\n                handleElement_1(cardElement);\n              }\n\n              break;\n\n            case Enums.ContainerFitStatus.Overflowing:\n              var maxHeight_1 = boundary_1 - elt.offsetTop;\n              cardElement['handleOverflow'](maxHeight_1);\n              break;\n\n            case Enums.ContainerFitStatus.FullyOutOfContainer:\n              cardElement['handleOverflow'](0);\n              break;\n          }\n        }\n      };\n\n      for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n        var item = _a[_i];\n        handleElement_1(item);\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  Container.prototype.undoOverflowTruncation = function () {\n    for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      item['resetOverflow']();\n    }\n  };\n\n  Container.prototype.getHasBackground = function () {\n    return this.backgroundImage.isValid() || _super.prototype.getHasBackground.call(this);\n  };\n\n  Container.prototype.internalParse = function (source, context) {\n    _super.prototype.internalParse.call(this, source, context);\n\n    this.clear();\n    this.setShouldFallback(false);\n    var jsonItems = source[this.getItemsCollectionPropertyName()];\n\n    if (Array.isArray(jsonItems)) {\n      for (var _i = 0, jsonItems_1 = jsonItems; _i < jsonItems_1.length; _i++) {\n        var item = jsonItems_1[_i];\n        var element = context.parseElement(this, item, !this.isDesignMode());\n\n        if (element) {\n          this.insertItemAt(element, -1, true);\n        }\n      }\n    }\n  };\n\n  Container.prototype.internalToJSON = function (target, context) {\n    _super.prototype.internalToJSON.call(this, target, context);\n\n    context.serializeArray(target, this.getItemsCollectionPropertyName(), this._items);\n  };\n\n  Object.defineProperty(Container.prototype, \"isSelectable\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Container.prototype.getItemCount = function () {\n    return this._items.length;\n  };\n\n  Container.prototype.getItemAt = function (index) {\n    return this._items[index];\n  };\n\n  Container.prototype.getFirstVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\n      for (var _i = 0, _a = this._renderedItems; _i < _a.length; _i++) {\n        var item = _a[_i];\n\n        if (item.isVisible) {\n          return item;\n        }\n      }\n\n      ;\n    }\n\n    return undefined;\n  };\n\n  Container.prototype.getLastVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\n      for (var i = this._renderedItems.length - 1; i >= 0; i--) {\n        if (this._renderedItems[i].isVisible) {\n          return this._renderedItems[i];\n        }\n      }\n    }\n\n    return undefined;\n  };\n\n  Container.prototype.getJsonTypeName = function () {\n    return \"Container\";\n  };\n\n  Container.prototype.isFirstElement = function (element) {\n    var designMode = this.isDesignMode();\n\n    for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n      var item = _a[_i];\n\n      if (item.isVisible || designMode) {\n        return item == element;\n      }\n    }\n\n    return false;\n  };\n\n  Container.prototype.isLastElement = function (element) {\n    var designMode = this.isDesignMode();\n\n    for (var i = this._items.length - 1; i >= 0; i--) {\n      if (this._items[i].isVisible || designMode) {\n        return this._items[i] == element;\n      }\n    }\n\n    return false;\n  };\n\n  Container.prototype.isRtl = function () {\n    if (this.rtl !== undefined) {\n      return this.rtl;\n    } else {\n      var parentContainer = this.getParentContainer();\n      return parentContainer ? parentContainer.isRtl() : false;\n    }\n  };\n\n  Container.prototype.isBleedingAtTop = function () {\n    var firstRenderedItem = this.getFirstVisibleRenderedItem();\n    return this.isBleeding() || (firstRenderedItem ? firstRenderedItem.isBleedingAtTop() : false);\n  };\n\n  Container.prototype.isBleedingAtBottom = function () {\n    var lastRenderedItem = this.getLastVisibleRenderedItem();\n    return this.isBleeding() || (lastRenderedItem ? lastRenderedItem.isBleedingAtBottom() && lastRenderedItem.getEffectiveStyle() == this.getEffectiveStyle() : false);\n  };\n\n  Container.prototype.indexOf = function (cardElement) {\n    return this._items.indexOf(cardElement);\n  };\n\n  Container.prototype.addItem = function (item) {\n    this.insertItemAt(item, -1, false);\n  };\n\n  Container.prototype.insertItemBefore = function (item, insertBefore) {\n    this.insertItemAt(item, this._items.indexOf(insertBefore), false);\n  };\n\n  Container.prototype.insertItemAfter = function (item, insertAfter) {\n    this.insertItemAt(item, this._items.indexOf(insertAfter) + 1, false);\n  };\n\n  Container.prototype.removeItem = function (item) {\n    var itemIndex = this._items.indexOf(item);\n\n    if (itemIndex >= 0) {\n      this._items.splice(itemIndex, 1);\n\n      item.setParent(undefined);\n      this.updateLayout();\n      return true;\n    }\n\n    return false;\n  };\n\n  Container.prototype.clear = function () {\n    this._items = [];\n    this._renderedItems = [];\n  };\n\n  Container.prototype.getResourceInformation = function () {\n    var result = _super.prototype.getResourceInformation.call(this);\n\n    if (this.backgroundImage.isValid()) {\n      result.push({\n        url: this.backgroundImage.url,\n        mimeType: \"image\"\n      });\n    }\n\n    return result;\n  };\n\n  Container.prototype.getActionById = function (id) {\n    var result = _super.prototype.getActionById.call(this, id);\n\n    if (!result) {\n      if (this.selectAction) {\n        result = this.selectAction.getActionById(id);\n      }\n\n      if (!result) {\n        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\n          var item = _a[_i];\n          result = item.getActionById(id);\n\n          if (result) {\n            break;\n          }\n        }\n      }\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(Container.prototype, \"padding\", {\n    get: function () {\n      return this.getPadding();\n    },\n    set: function (value) {\n      this.setPadding(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Container.prototype, \"selectAction\", {\n    get: function () {\n      return this._selectAction;\n    },\n    set: function (value) {\n      this._selectAction = value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Container.prototype, \"bleed\", {\n    get: function () {\n      return this.getBleed();\n    },\n    set: function (value) {\n      this.setBleed(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Container.backgroundImageProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_0, \"backgroundImage\", BackgroundImage);\n  Container.verticalContentAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_1, \"verticalContentAlignment\", Enums.VerticalAlignment, Enums.VerticalAlignment.Top);\n  Container.rtlProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"rtl\");\n\n  __decorate([serialization_1.property(Container.backgroundImageProperty)], Container.prototype, \"backgroundImage\", null);\n\n  __decorate([serialization_1.property(Container.verticalContentAlignmentProperty)], Container.prototype, \"verticalContentAlignment\", void 0);\n\n  __decorate([serialization_1.property(Container.rtlProperty)], Container.prototype, \"rtl\", void 0);\n\n  return Container;\n}(StylableCardElementContainer);\n\nexports.Container = Container;\n\nvar Column =\n/** @class */\nfunction (_super) {\n  __extends(Column, _super);\n\n  function Column(width) {\n    if (width === void 0) {\n      width = \"stretch\";\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.width = \"stretch\"; //#endregion\n\n    _this._computedWeight = 0;\n    _this.width = width;\n    return _this;\n  }\n\n  Column.prototype.adjustRenderedElementSize = function (renderedElement) {\n    var minDesignTimeColumnHeight = 20;\n\n    if (this.isDesignMode()) {\n      renderedElement.style.minWidth = \"20px\";\n      renderedElement.style.minHeight = (!this.minPixelHeight ? minDesignTimeColumnHeight : Math.max(this.minPixelHeight, minDesignTimeColumnHeight)) + \"px\";\n    } else {\n      renderedElement.style.minWidth = \"0\";\n\n      if (this.minPixelHeight) {\n        renderedElement.style.minHeight = this.minPixelHeight + \"px\";\n      }\n    }\n\n    if (this.width === \"auto\") {\n      renderedElement.style.flex = \"0 1 auto\";\n    } else if (this.width === \"stretch\") {\n      renderedElement.style.flex = \"1 1 50px\";\n    } else if (this.width instanceof shared_1.SizeAndUnit) {\n      if (this.width.unit == Enums.SizeUnit.Pixel) {\n        renderedElement.style.flex = \"0 0 auto\";\n        renderedElement.style.width = this.width.physicalSize + \"px\";\n      } else {\n        renderedElement.style.flex = \"1 1 \" + (this._computedWeight > 0 ? this._computedWeight : this.width.physicalSize) + \"%\";\n      }\n    }\n  };\n\n  Column.prototype.shouldSerialize = function (context) {\n    return true;\n  };\n\n  Object.defineProperty(Column.prototype, \"separatorOrientation\", {\n    get: function () {\n      return Enums.Orientation.Vertical;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Column.prototype.getJsonTypeName = function () {\n    return \"Column\";\n  };\n\n  Object.defineProperty(Column.prototype, \"hasVisibleSeparator\", {\n    get: function () {\n      if (this.parent && this.parent instanceof ColumnSet) {\n        return this.separatorElement !== undefined && !this.parent.isLeftMostElement(this);\n      } else {\n        return false;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Column.prototype, \"isStandalone\", {\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  }); //#region Schema\n\n  Column.widthProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, \"width\", function (sender, property, source, context) {\n    var result = property.defaultValue;\n    var value = source[property.name];\n    var invalidWidth = false;\n\n    if (typeof value === \"number\" && !isNaN(value)) {\n      result = new shared_1.SizeAndUnit(value, Enums.SizeUnit.Weight);\n    } else if (value === \"auto\" || value === \"stretch\") {\n      result = value;\n    } else if (typeof value === \"string\") {\n      try {\n        result = shared_1.SizeAndUnit.parse(value);\n\n        if (result.unit === Enums.SizeUnit.Pixel && property.targetVersion.compareTo(context.targetVersion) > 0) {\n          invalidWidth = true;\n        }\n      } catch (e) {\n        invalidWidth = true;\n      }\n    } else {\n      invalidWidth = true;\n    }\n\n    if (invalidWidth) {\n      context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidColumnWidth(value));\n      result = \"auto\";\n    }\n\n    return result;\n  }, function (sender, property, target, value, context) {\n    if (value instanceof shared_1.SizeAndUnit) {\n      if (value.unit === Enums.SizeUnit.Pixel) {\n        context.serializeValue(target, \"width\", value.physicalSize + \"px\");\n      } else {\n        context.serializeNumber(target, \"width\", value.physicalSize);\n      }\n    } else {\n      context.serializeValue(target, \"width\", value);\n    }\n  }, \"stretch\");\n\n  __decorate([serialization_1.property(Column.widthProperty)], Column.prototype, \"width\", void 0);\n\n  return Column;\n}(Container);\n\nexports.Column = Column;\n\nvar ColumnSet =\n/** @class */\nfunction (_super) {\n  __extends(ColumnSet, _super);\n\n  function ColumnSet() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._columns = [];\n    return _this;\n  }\n\n  ColumnSet.prototype.createColumnInstance = function (source, context) {\n    return context.parseCardObject(this, source, [], // Forbidden types not supported for elements for now\n    !this.isDesignMode(), function (typeName) {\n      return !typeName || typeName === \"Column\" ? new Column() : undefined;\n    }, function (typeName, errorType) {\n      context.logParseEvent(undefined, Enums.ValidationEvent.ElementTypeNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(typeName));\n    });\n  };\n\n  ColumnSet.prototype.internalRender = function () {\n    this._renderedColumns = [];\n\n    if (this._columns.length > 0) {\n      // Cache hostConfig to avoid walking the parent hierarchy several times\n      var hostConfig = this.hostConfig;\n      var element = document.createElement(\"div\");\n      element.className = hostConfig.makeCssClassName(\"ac-columnSet\");\n      element.style.display = \"flex\";\n\n      if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {\n        // See comment in Container.internalRender()\n        element.style.minHeight = '-webkit-min-content';\n      }\n\n      switch (this.horizontalAlignment) {\n        case Enums.HorizontalAlignment.Center:\n          element.style.justifyContent = \"center\";\n          break;\n\n        case Enums.HorizontalAlignment.Right:\n          element.style.justifyContent = \"flex-end\";\n          break;\n\n        default:\n          element.style.justifyContent = \"flex-start\";\n          break;\n      }\n\n      var totalWeight = 0;\n\n      for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n\n        if (column.width instanceof shared_1.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight) {\n          totalWeight += column.width.physicalSize;\n        }\n      }\n\n      for (var _b = 0, _c = this._columns; _b < _c.length; _b++) {\n        var column = _c[_b];\n\n        if (column.width instanceof shared_1.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight && totalWeight > 0) {\n          var computedWeight = 100 / totalWeight * column.width.physicalSize; // Best way to emulate \"internal\" access I know of\n\n          column[\"_computedWeight\"] = computedWeight;\n        }\n\n        var renderedColumn = column.render();\n\n        if (renderedColumn) {\n          if (this._renderedColumns.length > 0 && column.separatorElement) {\n            column.separatorElement.style.flex = \"0 0 auto\";\n            Utils.appendChild(element, column.separatorElement);\n          }\n\n          Utils.appendChild(element, renderedColumn);\n\n          this._renderedColumns.push(column);\n        }\n      }\n\n      return this._renderedColumns.length > 0 ? element : undefined;\n    } else {\n      return undefined;\n    }\n  };\n\n  ColumnSet.prototype.truncateOverflow = function (maxHeight) {\n    for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      column['handleOverflow'](maxHeight);\n    }\n\n    return true;\n  };\n\n  ColumnSet.prototype.undoOverflowTruncation = function () {\n    for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      column['resetOverflow']();\n    }\n  };\n\n  Object.defineProperty(ColumnSet.prototype, \"isSelectable\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ColumnSet.prototype.internalParse = function (source, context) {\n    _super.prototype.internalParse.call(this, source, context);\n\n    this._columns = [];\n    this._renderedColumns = [];\n    var jsonColumns = source[\"columns\"];\n\n    if (Array.isArray(jsonColumns)) {\n      for (var _i = 0, jsonColumns_1 = jsonColumns; _i < jsonColumns_1.length; _i++) {\n        var item = jsonColumns_1[_i];\n        var column = this.createColumnInstance(item, context);\n\n        if (column) {\n          this._columns.push(column);\n        }\n      }\n    }\n  };\n\n  ColumnSet.prototype.internalToJSON = function (target, context) {\n    _super.prototype.internalToJSON.call(this, target, context);\n\n    context.serializeArray(target, \"columns\", this._columns);\n  };\n\n  ColumnSet.prototype.isFirstElement = function (element) {\n    for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n\n      if (column.isVisible) {\n        return column == element;\n      }\n    }\n\n    return false;\n  };\n\n  ColumnSet.prototype.isBleedingAtTop = function () {\n    if (this.isBleeding()) {\n      return true;\n    }\n\n    if (this._renderedColumns && this._renderedColumns.length > 0) {\n      for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n\n        if (column.isBleedingAtTop()) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  ColumnSet.prototype.isBleedingAtBottom = function () {\n    if (this.isBleeding()) {\n      return true;\n    }\n\n    if (this._renderedColumns && this._renderedColumns.length > 0) {\n      for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n\n        if (column.isBleedingAtBottom()) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  ColumnSet.prototype.getItemCount = function () {\n    return this._columns.length;\n  };\n\n  ColumnSet.prototype.getFirstVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\n      return this._renderedColumns[0];\n    } else {\n      return undefined;\n    }\n  };\n\n  ColumnSet.prototype.getLastVisibleRenderedItem = function () {\n    if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\n      return this._renderedColumns[this._renderedColumns.length - 1];\n    } else {\n      return undefined;\n    }\n  };\n\n  ColumnSet.prototype.getColumnAt = function (index) {\n    return this._columns[index];\n  };\n\n  ColumnSet.prototype.getItemAt = function (index) {\n    return this.getColumnAt(index);\n  };\n\n  ColumnSet.prototype.getJsonTypeName = function () {\n    return \"ColumnSet\";\n  };\n\n  ColumnSet.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    var weightedColumns = 0;\n    var stretchedColumns = 0;\n\n    for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n\n      if (typeof column.width === \"number\") {\n        weightedColumns++;\n      } else if (column.width === \"stretch\") {\n        stretchedColumns++;\n      }\n    }\n\n    if (weightedColumns > 0 && stretchedColumns > 0) {\n      context.addFailure(this, Enums.ValidationEvent.Hint, strings_1.Strings.hints.dontUseWeightedAndStrecthedColumnsInSameSet());\n    }\n  };\n\n  ColumnSet.prototype.addColumn = function (column) {\n    if (!column.parent) {\n      this._columns.push(column);\n\n      column.setParent(this);\n    } else {\n      throw new Error(strings_1.Strings.errors.columnAlreadyBelongsToAnotherSet());\n    }\n  };\n\n  ColumnSet.prototype.removeItem = function (item) {\n    if (item instanceof Column) {\n      var itemIndex = this._columns.indexOf(item);\n\n      if (itemIndex >= 0) {\n        this._columns.splice(itemIndex, 1);\n\n        item.setParent(undefined);\n        this.updateLayout();\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ColumnSet.prototype.indexOf = function (cardElement) {\n    return cardElement instanceof Column ? this._columns.indexOf(cardElement) : -1;\n  };\n\n  ColumnSet.prototype.isLeftMostElement = function (element) {\n    return this._columns.indexOf(element) == 0;\n  };\n\n  ColumnSet.prototype.isRightMostElement = function (element) {\n    return this._columns.indexOf(element) == this._columns.length - 1;\n  };\n\n  ColumnSet.prototype.isTopElement = function (element) {\n    return this._columns.indexOf(element) >= 0;\n  };\n\n  ColumnSet.prototype.isBottomElement = function (element) {\n    return this._columns.indexOf(element) >= 0;\n  };\n\n  ColumnSet.prototype.getActionById = function (id) {\n    var result = undefined;\n\n    for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      result = column.getActionById(id);\n\n      if (result) {\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  Object.defineProperty(ColumnSet.prototype, \"bleed\", {\n    get: function () {\n      return this.getBleed();\n    },\n    set: function (value) {\n      this.setBleed(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ColumnSet.prototype, \"padding\", {\n    get: function () {\n      return this.getPadding();\n    },\n    set: function (value) {\n      this.setPadding(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ColumnSet.prototype, \"selectAction\", {\n    get: function () {\n      return this._selectAction;\n    },\n    set: function (value) {\n      this._selectAction = value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return ColumnSet;\n}(StylableCardElementContainer);\n\nexports.ColumnSet = ColumnSet;\n\nfunction raiseImageLoadedEvent(image) {\n  var card = image.getRootElement();\n  var onImageLoadedHandler = card && card.onImageLoaded ? card.onImageLoaded : AdaptiveCard.onImageLoaded;\n\n  if (onImageLoadedHandler) {\n    onImageLoadedHandler(image);\n  }\n}\n\nfunction raiseAnchorClickedEvent(element, anchor) {\n  var card = element.getRootElement();\n  var onAnchorClickedHandler = card && card.onAnchorClicked ? card.onAnchorClicked : AdaptiveCard.onAnchorClicked;\n  return onAnchorClickedHandler !== undefined ? onAnchorClickedHandler(element, anchor) : false;\n}\n\nfunction raiseExecuteActionEvent(action) {\n  var card = action.parent ? action.parent.getRootElement() : undefined;\n  var onExecuteActionHandler = card && card.onExecuteAction ? card.onExecuteAction : AdaptiveCard.onExecuteAction;\n\n  if (action.prepareForExecution() && onExecuteActionHandler) {\n    onExecuteActionHandler(action);\n  }\n}\n\nfunction raiseInlineCardExpandedEvent(action, isExpanded) {\n  var card = action.parent ? action.parent.getRootElement() : undefined;\n  var onInlineCardExpandedHandler = card && card.onInlineCardExpanded ? card.onInlineCardExpanded : AdaptiveCard.onInlineCardExpanded;\n\n  if (onInlineCardExpandedHandler) {\n    onInlineCardExpandedHandler(action, isExpanded);\n  }\n}\n\nfunction raiseInputValueChangedEvent(input) {\n  var card = input.getRootElement();\n  var onInputValueChangedHandler = card && card.onInputValueChanged ? card.onInputValueChanged : AdaptiveCard.onInputValueChanged;\n\n  if (onInputValueChangedHandler) {\n    onInputValueChangedHandler(input);\n  }\n}\n\nfunction raiseElementVisibilityChangedEvent(element, shouldUpdateLayout) {\n  if (shouldUpdateLayout === void 0) {\n    shouldUpdateLayout = true;\n  }\n\n  var rootElement = element.getRootElement();\n\n  if (shouldUpdateLayout) {\n    rootElement.updateLayout();\n  }\n\n  var card = rootElement;\n  var onElementVisibilityChangedHandler = card && card.onElementVisibilityChanged ? card.onElementVisibilityChanged : AdaptiveCard.onElementVisibilityChanged;\n\n  if (onElementVisibilityChangedHandler !== undefined) {\n    onElementVisibilityChangedHandler(element);\n  }\n}\n\nvar ContainerWithActions =\n/** @class */\nfunction (_super) {\n  __extends(ContainerWithActions, _super);\n\n  function ContainerWithActions() {\n    var _this = _super.call(this) || this;\n\n    _this._actionCollection = new ActionCollection(_this);\n    return _this;\n  }\n\n  ContainerWithActions.prototype.internalParse = function (source, context) {\n    _super.prototype.internalParse.call(this, source, context);\n\n    this._actionCollection.parse(source[\"actions\"], context);\n  };\n\n  ContainerWithActions.prototype.internalToJSON = function (target, context) {\n    _super.prototype.internalToJSON.call(this, target, context);\n\n    this._actionCollection.toJSON(target, \"actions\", context);\n  };\n\n  ContainerWithActions.prototype.internalRender = function () {\n    var element = _super.prototype.internalRender.call(this);\n\n    if (element) {\n      var renderedActions = this._actionCollection.render(this.hostConfig.actions.actionsOrientation, false);\n\n      if (renderedActions) {\n        Utils.appendChild(element, Utils.renderSeparation(this.hostConfig, {\n          spacing: this.hostConfig.getEffectiveSpacing(this.hostConfig.actions.spacing)\n        }, Enums.Orientation.Horizontal));\n        Utils.appendChild(element, renderedActions);\n      }\n\n      if (this.renderIfEmpty) {\n        return element;\n      } else {\n        return element.children.length > 0 ? element : undefined;\n      }\n    } else {\n      return undefined;\n    }\n  };\n\n  ContainerWithActions.prototype.getHasExpandedAction = function () {\n    if (this.renderedActionCount == 0) {\n      return false;\n    } else if (this.renderedActionCount == 1) {\n      return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;\n    } else {\n      return this._actionCollection.expandedAction !== undefined;\n    }\n  };\n\n  Object.defineProperty(ContainerWithActions.prototype, \"renderedActionCount\", {\n    get: function () {\n      return this._actionCollection.renderedActionCount;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ContainerWithActions.prototype, \"renderIfEmpty\", {\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ContainerWithActions.prototype.getActionCount = function () {\n    return this._actionCollection.items.length;\n  };\n\n  ContainerWithActions.prototype.getActionAt = function (index) {\n    if (index >= 0 && index < this.getActionCount()) {\n      return this._actionCollection.items[index];\n    } else {\n      return _super.prototype.getActionAt.call(this, index);\n    }\n  };\n\n  ContainerWithActions.prototype.getActionById = function (id) {\n    var result = this._actionCollection.getActionById(id);\n\n    return result ? result : _super.prototype.getActionById.call(this, id);\n  };\n\n  ContainerWithActions.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (this._actionCollection) {\n      this._actionCollection.validateProperties(context);\n    }\n  };\n\n  ContainerWithActions.prototype.isLastElement = function (element) {\n    return _super.prototype.isLastElement.call(this, element) && this._actionCollection.items.length == 0;\n  };\n\n  ContainerWithActions.prototype.addAction = function (action) {\n    this._actionCollection.addAction(action);\n  };\n\n  ContainerWithActions.prototype.clear = function () {\n    _super.prototype.clear.call(this);\n\n    this._actionCollection.clear();\n  };\n\n  ContainerWithActions.prototype.getAllInputs = function (processActions) {\n    if (processActions === void 0) {\n      processActions = true;\n    }\n\n    var result = _super.prototype.getAllInputs.call(this, processActions);\n\n    if (processActions) {\n      result = result.concat(this._actionCollection.getAllInputs(processActions));\n    }\n\n    return result;\n  };\n\n  ContainerWithActions.prototype.getResourceInformation = function () {\n    return _super.prototype.getResourceInformation.call(this).concat(this._actionCollection.getResourceInformation());\n  };\n\n  ContainerWithActions.prototype.isBleedingAtBottom = function () {\n    if (this._actionCollection.renderedActionCount == 0) {\n      return _super.prototype.isBleedingAtBottom.call(this);\n    } else {\n      if (this._actionCollection.items.length == 1) {\n        return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;\n      } else {\n        return this._actionCollection.expandedAction !== undefined;\n      }\n    }\n  };\n\n  Object.defineProperty(ContainerWithActions.prototype, \"isStandalone\", {\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return ContainerWithActions;\n}(Container);\n\nexports.ContainerWithActions = ContainerWithActions; // @dynamic\n\nvar AdaptiveCard =\n/** @class */\nfunction (_super) {\n  __extends(AdaptiveCard, _super);\n\n  function AdaptiveCard() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.designMode = false;\n    return _this;\n  }\n\n  Object.defineProperty(AdaptiveCard, \"processMarkdown\", {\n    get: function () {\n      throw new Error(strings_1.Strings.errors.processMarkdownEventRemoved());\n    },\n    set: function (value) {\n      throw new Error(strings_1.Strings.errors.processMarkdownEventRemoved());\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  AdaptiveCard.applyMarkdown = function (text) {\n    var result = {\n      didProcess: false\n    };\n\n    if (AdaptiveCard.onProcessMarkdown) {\n      AdaptiveCard.onProcessMarkdown(text, result);\n    } else if (window.markdownit) {\n      // Check for markdownit\n      var markdownIt = window.markdownit;\n      result.outputHtml = markdownIt().render(text);\n      result.didProcess = true;\n    } else {\n      console.warn(strings_1.Strings.errors.markdownProcessingNotEnabled);\n    }\n\n    return result;\n  };\n\n  AdaptiveCard.prototype.isVersionSupported = function () {\n    if (this.bypassVersionCheck) {\n      return true;\n    } else {\n      var unsupportedVersion = !this.version || !this.version.isValid || this.maxVersion.major < this.version.major || this.maxVersion.major == this.version.major && this.maxVersion.minor < this.version.minor;\n      return !unsupportedVersion;\n    }\n  };\n\n  AdaptiveCard.prototype.getDefaultSerializationContext = function () {\n    return new SerializationContext(this.version);\n  };\n\n  AdaptiveCard.prototype.getItemsCollectionPropertyName = function () {\n    return \"body\";\n  };\n\n  AdaptiveCard.prototype.internalParse = function (source, context) {\n    this._fallbackCard = undefined;\n    var fallbackElement = context.parseElement(undefined, source[\"fallback\"], !this.isDesignMode());\n\n    if (fallbackElement) {\n      this._fallbackCard = new AdaptiveCard();\n\n      this._fallbackCard.addItem(fallbackElement);\n    }\n\n    _super.prototype.internalParse.call(this, source, context);\n  };\n\n  AdaptiveCard.prototype.internalToJSON = function (target, context) {\n    this.setValue(AdaptiveCard.versionProperty, context.targetVersion);\n\n    _super.prototype.internalToJSON.call(this, target, context);\n  };\n\n  AdaptiveCard.prototype.internalRender = function () {\n    var renderedElement = _super.prototype.internalRender.call(this);\n\n    if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && renderedElement) {\n      // Unlike containers, the root card element should be allowed to\n      // be shorter than its content (otherwise the overflow truncation\n      // logic would never get triggered)\n      renderedElement.style.removeProperty(\"minHeight\");\n    }\n\n    return renderedElement;\n  };\n\n  AdaptiveCard.prototype.getHasBackground = function () {\n    return true;\n  };\n\n  AdaptiveCard.prototype.getDefaultPadding = function () {\n    return new shared_1.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding);\n  };\n\n  AdaptiveCard.prototype.shouldSerialize = function (context) {\n    return true;\n  };\n\n  Object.defineProperty(AdaptiveCard.prototype, \"renderIfEmpty\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AdaptiveCard.prototype, \"bypassVersionCheck\", {\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AdaptiveCard.prototype, \"allowCustomStyle\", {\n    get: function () {\n      return this.hostConfig.adaptiveCard && this.hostConfig.adaptiveCard.allowCustomStyle;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AdaptiveCard.prototype, \"hasBackground\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  AdaptiveCard.prototype.getJsonTypeName = function () {\n    return \"AdaptiveCard\";\n  };\n\n  AdaptiveCard.prototype.internalValidateProperties = function (context) {\n    _super.prototype.internalValidateProperties.call(this, context);\n\n    if (this.getValue(CardElement.typeNameProperty) !== \"AdaptiveCard\") {\n      context.addFailure(this, Enums.ValidationEvent.MissingCardType, strings_1.Strings.errors.invalidCardType());\n    }\n\n    if (!this.bypassVersionCheck && !this.version) {\n      context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet(\"version\"));\n    } else if (!this.isVersionSupported()) {\n      context.addFailure(this, Enums.ValidationEvent.UnsupportedCardVersion, strings_1.Strings.errors.unsupportedCardVersion(this.version.toString(), this.maxVersion.toString()));\n    }\n  };\n\n  AdaptiveCard.prototype.render = function (target) {\n    var renderedCard;\n\n    if (this.shouldFallback() && this._fallbackCard) {\n      this._fallbackCard.hostConfig = this.hostConfig;\n      renderedCard = this._fallbackCard.render();\n    } else {\n      renderedCard = _super.prototype.render.call(this);\n\n      if (renderedCard) {\n        renderedCard.classList.add(this.hostConfig.makeCssClassName(\"ac-adaptiveCard\")); // Having a tabIndex on the root container for a card can mess up accessibility in some scenarios.\n        // However, we've shipped this behavior before, and so can't just turn it off in a point release. For\n        // now, to unblock accessibility scenarios for our customers, we've got an option to turn it off. In a\n        // future release, we should strongly consider flipping the default such that we *don't* emit a tabIndex\n        // by default.\n\n        if (shared_1.GlobalSettings.setTabIndexAtCardRoot) {\n          renderedCard.tabIndex = 0;\n        }\n\n        if (this.speak) {\n          renderedCard.setAttribute(\"aria-label\", this.speak);\n        }\n      }\n    }\n\n    if (target) {\n      Utils.appendChild(target, renderedCard);\n      this.updateLayout();\n    }\n\n    return renderedCard;\n  };\n\n  AdaptiveCard.prototype.updateLayout = function (processChildren) {\n    if (processChildren === void 0) {\n      processChildren = true;\n    }\n\n    _super.prototype.updateLayout.call(this, processChildren);\n\n    if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && this.isDisplayed()) {\n      var padding = this.hostConfig.getEffectiveSpacing(Enums.Spacing.Default);\n      this['handleOverflow'](this.renderedElement.offsetHeight - padding);\n    }\n  };\n\n  AdaptiveCard.prototype.shouldFallback = function () {\n    return _super.prototype.shouldFallback.call(this) || !this.isVersionSupported();\n  };\n\n  Object.defineProperty(AdaptiveCard.prototype, \"hasVisibleSeparator\", {\n    get: function () {\n      return false;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  AdaptiveCard.schemaUrl = \"http://adaptivecards.io/schemas/adaptive-card.json\"; //#region Schema\n\n  AdaptiveCard.$schemaProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, \"$schema\", function (sender, property, source, context) {\n    return AdaptiveCard.schemaUrl;\n  }, function (sender, property, target, value, context) {\n    context.serializeValue(target, property.name, AdaptiveCard.schemaUrl);\n  });\n  AdaptiveCard.versionProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, \"version\", function (sender, property, source, context) {\n    var version = serialization_1.Version.parse(source[property.name], context);\n\n    if (version === undefined) {\n      version = serialization_1.Versions.latest;\n      context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidCardVersion(version.toString()));\n    }\n\n    return version;\n  }, function (sender, property, target, value, context) {\n    if (value !== undefined) {\n      context.serializeValue(target, property.name, value.toString());\n    }\n  }, serialization_1.Versions.v1_0);\n  AdaptiveCard.fallbackTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"fallbackText\");\n  AdaptiveCard.speakProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"speak\");\n\n  __decorate([serialization_1.property(AdaptiveCard.versionProperty)], AdaptiveCard.prototype, \"version\", void 0);\n\n  __decorate([serialization_1.property(AdaptiveCard.fallbackTextProperty)], AdaptiveCard.prototype, \"fallbackText\", void 0);\n\n  __decorate([serialization_1.property(AdaptiveCard.speakProperty)], AdaptiveCard.prototype, \"speak\", void 0);\n\n  return AdaptiveCard;\n}(ContainerWithActions);\n\nexports.AdaptiveCard = AdaptiveCard;\n\nvar InlineAdaptiveCard =\n/** @class */\nfunction (_super) {\n  __extends(InlineAdaptiveCard, _super);\n\n  function InlineAdaptiveCard() {\n    //#region Schema\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.suppressStyle = false;\n    return _this;\n  }\n\n  InlineAdaptiveCard.prototype.getSchemaKey = function () {\n    return \"InlineAdaptiveCard\";\n  };\n\n  InlineAdaptiveCard.prototype.populateSchema = function (schema) {\n    _super.prototype.populateSchema.call(this, schema);\n\n    schema.remove(AdaptiveCard.$schemaProperty, AdaptiveCard.versionProperty);\n  }; //#endregion\n\n\n  InlineAdaptiveCard.prototype.getDefaultPadding = function () {\n    return new shared_1.PaddingDefinition(this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding, this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding);\n  };\n\n  Object.defineProperty(InlineAdaptiveCard.prototype, \"bypassVersionCheck\", {\n    get: function () {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(InlineAdaptiveCard.prototype, \"defaultStyle\", {\n    get: function () {\n      if (this.suppressStyle) {\n        return Enums.ContainerStyle.Default;\n      } else {\n        return this.hostConfig.actions.showCard.style ? this.hostConfig.actions.showCard.style : Enums.ContainerStyle.Emphasis;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  InlineAdaptiveCard.prototype.render = function (target) {\n    var renderedCard = _super.prototype.render.call(this, target);\n\n    if (renderedCard) {\n      renderedCard.setAttribute(\"aria-live\", \"polite\");\n      renderedCard.removeAttribute(\"tabindex\");\n    }\n\n    return renderedCard;\n  };\n\n  return InlineAdaptiveCard;\n}(AdaptiveCard);\n\nvar GlobalRegistry =\n/** @class */\nfunction () {\n  function GlobalRegistry() {}\n\n  GlobalRegistry.populateWithDefaultElements = function (registry) {\n    registry.clear();\n    registry.register(\"Container\", Container);\n    registry.register(\"TextBlock\", TextBlock);\n    registry.register(\"RichTextBlock\", RichTextBlock, serialization_1.Versions.v1_2);\n    registry.register(\"TextRun\", TextRun, serialization_1.Versions.v1_2);\n    registry.register(\"Image\", Image);\n    registry.register(\"ImageSet\", ImageSet);\n    registry.register(\"Media\", Media, serialization_1.Versions.v1_1);\n    registry.register(\"FactSet\", FactSet);\n    registry.register(\"ColumnSet\", ColumnSet);\n    registry.register(\"ActionSet\", ActionSet, serialization_1.Versions.v1_2);\n    registry.register(\"Input.Text\", TextInput);\n    registry.register(\"Input.Date\", DateInput);\n    registry.register(\"Input.Time\", TimeInput);\n    registry.register(\"Input.Number\", NumberInput);\n    registry.register(\"Input.ChoiceSet\", ChoiceSetInput);\n    registry.register(\"Input.Toggle\", ToggleInput);\n  };\n\n  GlobalRegistry.populateWithDefaultActions = function (registry) {\n    registry.clear();\n    registry.register(OpenUrlAction.JsonTypeName, OpenUrlAction);\n    registry.register(SubmitAction.JsonTypeName, SubmitAction);\n    registry.register(ShowCardAction.JsonTypeName, ShowCardAction);\n    registry.register(ToggleVisibilityAction.JsonTypeName, ToggleVisibilityAction, serialization_1.Versions.v1_2);\n  };\n\n  GlobalRegistry.reset = function () {\n    GlobalRegistry.populateWithDefaultElements(GlobalRegistry.elements);\n    GlobalRegistry.populateWithDefaultActions(GlobalRegistry.actions);\n  };\n\n  GlobalRegistry.elements = new registry_1.CardObjectRegistry();\n  GlobalRegistry.actions = new registry_1.CardObjectRegistry();\n  return GlobalRegistry;\n}();\n\nexports.GlobalRegistry = GlobalRegistry;\nGlobalRegistry.reset();\n\nvar SerializationContext =\n/** @class */\nfunction (_super) {\n  __extends(SerializationContext, _super);\n\n  function SerializationContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SerializationContext.prototype.internalParseCardObject = function (parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent) {\n    var result = undefined;\n\n    if (source && typeof source === \"object\") {\n      var typeName = Utils.parseString(source[\"type\"]);\n\n      if (typeName) {\n        if (forbiddenTypeNames.indexOf(typeName) >= 0) {\n          logParseEvent(typeName, 1\n          /* ForbiddenType */\n          );\n        } else {\n          var tryToFallback = false;\n          result = createInstanceCallback(typeName);\n\n          if (!result) {\n            tryToFallback = shared_1.GlobalSettings.enableFallback && allowFallback;\n            logParseEvent(typeName, 0\n            /* UnknownType */\n            );\n          } else {\n            result.setParent(parent);\n            result.parse(source, this);\n            tryToFallback = shared_1.GlobalSettings.enableFallback && allowFallback && result.shouldFallback();\n          }\n\n          if (tryToFallback) {\n            var fallback = source[\"fallback\"];\n\n            if (!fallback && parent) {\n              parent.setShouldFallback(true);\n            }\n\n            if (typeof fallback === \"string\" && fallback.toLowerCase() === \"drop\") {\n              result = undefined;\n            } else if (typeof fallback === \"object\") {\n              result = this.internalParseCardObject(parent, fallback, forbiddenTypeNames, true, createInstanceCallback, logParseEvent);\n            }\n          }\n        }\n      }\n    }\n\n    return result;\n  };\n\n  SerializationContext.prototype.cardObjectParsed = function (o, source) {\n    if (o instanceof Action && this.onParseAction) {\n      this.onParseAction(o, source, this);\n    } else if (o instanceof CardElement && this.onParseElement) {\n      this.onParseElement(o, source, this);\n    }\n  };\n\n  SerializationContext.prototype.parseCardObject = function (parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent) {\n    var result = this.internalParseCardObject(parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent);\n\n    if (result !== undefined) {\n      this.cardObjectParsed(result, source);\n    }\n\n    return result;\n  };\n\n  SerializationContext.prototype.parseElement = function (parent, source, allowFallback) {\n    var _this = this;\n\n    return this.parseCardObject(parent, source, [], // Forbidden types not supported for elements for now\n    allowFallback, function (typeName) {\n      return _this.elementRegistry.createInstance(typeName, _this.targetVersion);\n    }, function (typeName, errorType) {\n      if (errorType === 0\n      /* UnknownType */\n      ) {\n          _this.logParseEvent(undefined, Enums.ValidationEvent.UnknownElementType, strings_1.Strings.errors.unknownElementType(typeName));\n        } else {\n        _this.logParseEvent(undefined, Enums.ValidationEvent.ElementTypeNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(typeName));\n      }\n    });\n  };\n\n  SerializationContext.prototype.parseAction = function (parent, source, forbiddenActionTypes, allowFallback) {\n    var _this = this;\n\n    return this.parseCardObject(parent, source, forbiddenActionTypes, allowFallback, function (typeName) {\n      return _this.actionRegistry.createInstance(typeName, _this.targetVersion);\n    }, function (typeName, errorType) {\n      if (errorType == 0\n      /* UnknownType */\n      ) {\n          _this.logParseEvent(undefined, Enums.ValidationEvent.UnknownActionType, strings_1.Strings.errors.unknownActionType(typeName));\n        } else {\n        _this.logParseEvent(undefined, Enums.ValidationEvent.ActionTypeNotAllowed, strings_1.Strings.errors.actionTypeNotAllowed(typeName));\n      }\n    });\n  };\n\n  Object.defineProperty(SerializationContext.prototype, \"elementRegistry\", {\n    get: function () {\n      return this._elementRegistry ? this._elementRegistry : GlobalRegistry.elements;\n    },\n    enumerable: false,\n    configurable: true\n  }); // Not using a property setter here because the setter should accept \"undefined\"\n  // whereas the getter should never return undefined.\n\n  SerializationContext.prototype.setElementRegistry = function (value) {\n    this._elementRegistry = value;\n  };\n\n  Object.defineProperty(SerializationContext.prototype, \"actionRegistry\", {\n    get: function () {\n      return this._actionRegistry ? this._actionRegistry : GlobalRegistry.actions;\n    },\n    enumerable: false,\n    configurable: true\n  }); // Not using a property setter here because the setter should accept \"undefined\"\n  // whereas the getter should never return undefined.\n\n  SerializationContext.prototype.setActionRegistry = function (value) {\n    this._actionRegistry = value;\n  };\n\n  return SerializationContext;\n}(serialization_1.BaseSerializationContext);\n\nexports.SerializationContext = SerializationContext;","map":{"version":3,"sources":["../src/card-elements.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SerializationContext = exports.GlobalRegistry = exports.AdaptiveCard = exports.ContainerWithActions = exports.ColumnSet = exports.Column = exports.Container = exports.BackgroundImage = exports.StylableCardElementContainer = exports.ActionSet = exports.ShowCardAction = exports.HttpAction = exports.HttpHeader = exports.ToggleVisibilityAction = exports.OpenUrlAction = exports.SubmitAction = exports.Action = exports.TimeInput = exports.TimeProperty = exports.DateInput = exports.NumberInput = exports.ChoiceSetInput = exports.Choice = exports.ToggleInput = exports.TextInput = exports.Input = exports.Media = exports.MediaSource = exports.ImageSet = exports.CardElementContainer = exports.Image = exports.FactSet = exports.Fact = exports.RichTextBlock = exports.TextRun = exports.TextBlock = exports.BaseTextBlock = exports.ActionProperty = exports.CardElement = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar Enums = require(\"./enums\");\r\nvar shared_1 = require(\"./shared\");\r\nvar Utils = require(\"./utils\");\r\nvar host_config_1 = require(\"./host-config\");\r\nvar TextFormatters = require(\"./text-formatters\");\r\nvar card_object_1 = require(\"./card-object\");\r\nvar serialization_1 = require(\"./serialization\");\r\nvar registry_1 = require(\"./registry\");\r\nvar strings_1 = require(\"./strings\");\r\nvar CardElement = /** @class */ (function (_super) {\r\n    __extends(CardElement, _super);\r\n    function CardElement() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._truncatedDueToOverflow = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CardElement.prototype, \"lang\", {\r\n        get: function () {\r\n            var lang = this.getValue(CardElement.langProperty);\r\n            if (lang) {\r\n                return lang;\r\n            }\r\n            else {\r\n                if (this.parent) {\r\n                    return this.parent.lang;\r\n                }\r\n                else {\r\n                    return undefined;\r\n                }\r\n            }\r\n        },\r\n        set: function (value) {\r\n            this.setValue(CardElement.langProperty, value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isVisible\", {\r\n        get: function () {\r\n            return this.getValue(CardElement.isVisibleProperty);\r\n        },\r\n        set: function (value) {\r\n            // If the element is going to be hidden, reset any changes that were due\r\n            // to overflow truncation (this ensures that if the element is later\r\n            // un-hidden it has the right content)\r\n            if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && !value) {\r\n                this.undoOverflowTruncation();\r\n            }\r\n            if (this.isVisible !== value) {\r\n                this.setValue(CardElement.isVisibleProperty, value);\r\n                this.updateRenderedElementVisibility();\r\n                if (this._renderedElement) {\r\n                    raiseElementVisibilityChangedEvent(this);\r\n                }\r\n            }\r\n            if (this._renderedElement) {\r\n                this._renderedElement.setAttribute(\"aria-expanded\", value.toString());\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CardElement.prototype.internalRenderSeparator = function () {\r\n        var renderedSeparator = Utils.renderSeparation(this.hostConfig, {\r\n            spacing: this.hostConfig.getEffectiveSpacing(this.spacing),\r\n            lineThickness: this.separator ? this.hostConfig.separator.lineThickness : undefined,\r\n            lineColor: this.separator ? this.hostConfig.separator.lineColor : undefined\r\n        }, this.separatorOrientation);\r\n        if (shared_1.GlobalSettings.alwaysBleedSeparators && renderedSeparator && this.separatorOrientation == Enums.Orientation.Horizontal) {\r\n            // Adjust separator's margins if the option to always bleed separators is turned on\r\n            var parentContainer = this.getParentContainer();\r\n            if (parentContainer && parentContainer.getEffectivePadding()) {\r\n                var parentPhysicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(parentContainer.getEffectivePadding());\r\n                renderedSeparator.style.marginLeft = \"-\" + parentPhysicalPadding.left + \"px\";\r\n                renderedSeparator.style.marginRight = \"-\" + parentPhysicalPadding.right + \"px\";\r\n            }\r\n        }\r\n        return renderedSeparator;\r\n    };\r\n    CardElement.prototype.updateRenderedElementVisibility = function () {\r\n        var displayMode = this.isDesignMode() || this.isVisible ? this._defaultRenderedElementDisplayMode : \"none\";\r\n        if (this._renderedElement) {\r\n            if (displayMode) {\r\n                this._renderedElement.style.display = displayMode;\r\n            }\r\n            else {\r\n                this._renderedElement.style.removeProperty(\"display\");\r\n            }\r\n        }\r\n        if (this._separatorElement) {\r\n            if (this.parent && this.parent.isFirstElement(this)) {\r\n                this._separatorElement.style.display = \"none\";\r\n            }\r\n            else {\r\n                if (displayMode) {\r\n                    this._separatorElement.style.display = displayMode;\r\n                }\r\n                else {\r\n                    this._separatorElement.style.removeProperty(\"display\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n    CardElement.prototype.hideElementDueToOverflow = function () {\r\n        if (this._renderedElement && this.isVisible) {\r\n            this._renderedElement.style.visibility = \"hidden\";\r\n            this.isVisible = false;\r\n            raiseElementVisibilityChangedEvent(this, false);\r\n        }\r\n    };\r\n    CardElement.prototype.showElementHiddenDueToOverflow = function () {\r\n        if (this._renderedElement && !this.isVisible) {\r\n            this._renderedElement.style.removeProperty(\"visibility\");\r\n            this.isVisible = true;\r\n            raiseElementVisibilityChangedEvent(this, false);\r\n        }\r\n    };\r\n    // Marked private to emulate internal access\r\n    CardElement.prototype.handleOverflow = function (maxHeight) {\r\n        if (this.isVisible || this.isHiddenDueToOverflow()) {\r\n            var handled = this.truncateOverflow(maxHeight);\r\n            // Even if we were unable to truncate the element to fit this time,\r\n            // it still could have been previously truncated\r\n            this._truncatedDueToOverflow = handled || this._truncatedDueToOverflow;\r\n            if (!handled) {\r\n                this.hideElementDueToOverflow();\r\n            }\r\n            else if (handled && !this.isVisible) {\r\n                this.showElementHiddenDueToOverflow();\r\n            }\r\n        }\r\n    };\r\n    // Marked private to emulate internal access\r\n    CardElement.prototype.resetOverflow = function () {\r\n        var sizeChanged = false;\r\n        if (this._truncatedDueToOverflow) {\r\n            this.undoOverflowTruncation();\r\n            this._truncatedDueToOverflow = false;\r\n            sizeChanged = true;\r\n        }\r\n        if (this.isHiddenDueToOverflow()) {\r\n            this.showElementHiddenDueToOverflow();\r\n        }\r\n        return sizeChanged;\r\n    };\r\n    CardElement.prototype.getDefaultSerializationContext = function () {\r\n        return new SerializationContext();\r\n    };\r\n    CardElement.prototype.createPlaceholderElement = function () {\r\n        var styleDefinition = this.getEffectiveStyleDefinition();\r\n        var foregroundCssColor = Utils.stringToCssColor(styleDefinition.foregroundColors.default.subtle);\r\n        var element = document.createElement(\"div\");\r\n        element.style.border = \"1px dashed \" + foregroundCssColor;\r\n        element.style.padding = \"4px\";\r\n        element.style.minHeight = \"32px\";\r\n        element.style.fontSize = \"10px\";\r\n        element.style.color = foregroundCssColor;\r\n        element.innerText = \"Empty \" + this.getJsonTypeName();\r\n        return element;\r\n    };\r\n    CardElement.prototype.adjustRenderedElementSize = function (renderedElement) {\r\n        if (this.height === \"auto\") {\r\n            renderedElement.style.flex = \"0 0 auto\";\r\n        }\r\n        else {\r\n            renderedElement.style.flex = \"1 1 auto\";\r\n        }\r\n    };\r\n    CardElement.prototype.isDisplayed = function () {\r\n        return this._renderedElement !== undefined && this.isVisible && this._renderedElement.offsetHeight > 0;\r\n    };\r\n    CardElement.prototype.overrideInternalRender = function () {\r\n        return this.internalRender();\r\n    };\r\n    CardElement.prototype.applyPadding = function () {\r\n        if (this.separatorElement) {\r\n            if (shared_1.GlobalSettings.alwaysBleedSeparators && this.separatorOrientation == Enums.Orientation.Horizontal && !this.isBleeding()) {\r\n                var padding = new shared_1.PaddingDefinition();\r\n                this.getImmediateSurroundingPadding(padding);\r\n                var physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n                this.separatorElement.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\r\n                this.separatorElement.style.marginRight = \"-\" + physicalPadding.right + \"px\";\r\n            }\r\n            else {\r\n                this.separatorElement.style.marginRight = \"0\";\r\n                this.separatorElement.style.marginLeft = \"0\";\r\n            }\r\n        }\r\n    };\r\n    /*\r\n     * Called when this element overflows the bottom of the card.\r\n     * maxHeight will be the amount of space still available on the card (0 if\r\n     * the element is fully off the card).\r\n     */\r\n    CardElement.prototype.truncateOverflow = function (maxHeight) {\r\n        // Child implementations should return true if the element handled\r\n        // the truncation request such that its content fits within maxHeight,\r\n        // false if the element should fall back to being hidden\r\n        return false;\r\n    };\r\n    /*\r\n     * This should reverse any changes performed in truncateOverflow().\r\n     */\r\n    CardElement.prototype.undoOverflowTruncation = function () { };\r\n    CardElement.prototype.getDefaultPadding = function () {\r\n        return new shared_1.PaddingDefinition();\r\n    };\r\n    CardElement.prototype.getHasBackground = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.getPadding = function () {\r\n        return this._padding;\r\n    };\r\n    CardElement.prototype.setPadding = function (value) {\r\n        this._padding = value;\r\n    };\r\n    CardElement.prototype.shouldSerialize = function (context) {\r\n        return context.elementRegistry.findByName(this.getJsonTypeName()) !== undefined;\r\n    };\r\n    Object.defineProperty(CardElement.prototype, \"useDefaultSizing\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"allowCustomPadding\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"separatorOrientation\", {\r\n        get: function () {\r\n            return Enums.Orientation.Horizontal;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"defaultStyle\", {\r\n        get: function () {\r\n            return Enums.ContainerStyle.Default;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CardElement.prototype.parse = function (source, context) {\r\n        _super.prototype.parse.call(this, source, context ? context : new SerializationContext());\r\n    };\r\n    CardElement.prototype.asString = function () {\r\n        return \"\";\r\n    };\r\n    CardElement.prototype.isBleeding = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.getEffectiveStyle = function () {\r\n        if (this.parent) {\r\n            return this.parent.getEffectiveStyle();\r\n        }\r\n        return this.defaultStyle;\r\n    };\r\n    CardElement.prototype.getEffectiveStyleDefinition = function () {\r\n        return this.hostConfig.containerStyles.getStyleByName(this.getEffectiveStyle());\r\n    };\r\n    CardElement.prototype.getForbiddenActionTypes = function () {\r\n        return [];\r\n    };\r\n    CardElement.prototype.getImmediateSurroundingPadding = function (result, processTop, processRight, processBottom, processLeft) {\r\n        if (processTop === void 0) { processTop = true; }\r\n        if (processRight === void 0) { processRight = true; }\r\n        if (processBottom === void 0) { processBottom = true; }\r\n        if (processLeft === void 0) { processLeft = true; }\r\n        if (this.parent) {\r\n            var doProcessTop = processTop && this.parent.isTopElement(this);\r\n            var doProcessRight = processRight && this.parent.isRightMostElement(this);\r\n            var doProcessBottom = processBottom && this.parent.isBottomElement(this);\r\n            var doProcessLeft = processLeft && this.parent.isLeftMostElement(this);\r\n            var effectivePadding = this.parent.getEffectivePadding();\r\n            if (effectivePadding) {\r\n                if (doProcessTop && effectivePadding.top != Enums.Spacing.None) {\r\n                    result.top = effectivePadding.top;\r\n                    doProcessTop = false;\r\n                }\r\n                if (doProcessRight && effectivePadding.right != Enums.Spacing.None) {\r\n                    result.right = effectivePadding.right;\r\n                    doProcessRight = false;\r\n                }\r\n                if (doProcessBottom && effectivePadding.bottom != Enums.Spacing.None) {\r\n                    result.bottom = effectivePadding.bottom;\r\n                    doProcessBottom = false;\r\n                }\r\n                if (doProcessLeft && effectivePadding.left != Enums.Spacing.None) {\r\n                    result.left = effectivePadding.left;\r\n                    doProcessLeft = false;\r\n                }\r\n            }\r\n            if (doProcessTop || doProcessRight || doProcessBottom || doProcessLeft) {\r\n                this.parent.getImmediateSurroundingPadding(result, doProcessTop, doProcessRight, doProcessBottom, doProcessLeft);\r\n            }\r\n        }\r\n    };\r\n    CardElement.prototype.getActionCount = function () {\r\n        return 0;\r\n    };\r\n    CardElement.prototype.getActionAt = function (index) {\r\n        throw new Error(strings_1.Strings.errors.indexOutOfRange(index));\r\n    };\r\n    CardElement.prototype.remove = function () {\r\n        if (this.parent && this.parent instanceof CardElementContainer) {\r\n            return this.parent.removeItem(this);\r\n        }\r\n        return false;\r\n    };\r\n    CardElement.prototype.render = function () {\r\n        this._renderedElement = this.overrideInternalRender();\r\n        this._separatorElement = this.internalRenderSeparator();\r\n        if (this._renderedElement) {\r\n            if (this.id) {\r\n                this._renderedElement.id = this.id;\r\n            }\r\n            if (this.customCssSelector) {\r\n                this._renderedElement.classList.add(this.customCssSelector);\r\n            }\r\n            this._renderedElement.style.boxSizing = \"border-box\";\r\n            this._defaultRenderedElementDisplayMode = this._renderedElement.style.display ? this._renderedElement.style.display : undefined;\r\n            this.adjustRenderedElementSize(this._renderedElement);\r\n            this.updateLayout(false);\r\n        }\r\n        else if (this.isDesignMode()) {\r\n            this._renderedElement = this.createPlaceholderElement();\r\n        }\r\n        return this._renderedElement;\r\n    };\r\n    CardElement.prototype.updateLayout = function (processChildren) {\r\n        if (processChildren === void 0) { processChildren = true; }\r\n        this.updateRenderedElementVisibility();\r\n        this.applyPadding();\r\n    };\r\n    CardElement.prototype.indexOf = function (cardElement) {\r\n        return -1;\r\n    };\r\n    CardElement.prototype.isDesignMode = function () {\r\n        var rootElement = this.getRootElement();\r\n        return rootElement instanceof AdaptiveCard && rootElement.designMode;\r\n    };\r\n    CardElement.prototype.isFirstElement = function (element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isLastElement = function (element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryLeft = function () {\r\n        return this.parent ? this.parent.isLeftMostElement(this) && this.parent.isAtTheVeryLeft() : true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryRight = function () {\r\n        return this.parent ? this.parent.isRightMostElement(this) && this.parent.isAtTheVeryRight() : true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryTop = function () {\r\n        return this.parent ? this.parent.isFirstElement(this) && this.parent.isAtTheVeryTop() : true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryBottom = function () {\r\n        return this.parent ? this.parent.isLastElement(this) && this.parent.isAtTheVeryBottom() : true;\r\n    };\r\n    CardElement.prototype.isBleedingAtTop = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.isBleedingAtBottom = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.isLeftMostElement = function (element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isRightMostElement = function (element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isTopElement = function (element) {\r\n        return this.isFirstElement(element);\r\n    };\r\n    CardElement.prototype.isBottomElement = function (element) {\r\n        return this.isLastElement(element);\r\n    };\r\n    CardElement.prototype.isHiddenDueToOverflow = function () {\r\n        return this._renderedElement !== undefined && this._renderedElement.style.visibility == 'hidden';\r\n    };\r\n    CardElement.prototype.getRootElement = function () {\r\n        return this.getRootObject();\r\n    };\r\n    CardElement.prototype.getParentContainer = function () {\r\n        var currentElement = this.parent;\r\n        while (currentElement) {\r\n            if (currentElement instanceof Container) {\r\n                return currentElement;\r\n            }\r\n            currentElement = currentElement.parent;\r\n        }\r\n        return undefined;\r\n    };\r\n    CardElement.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        return [];\r\n    };\r\n    CardElement.prototype.getResourceInformation = function () {\r\n        return [];\r\n    };\r\n    CardElement.prototype.getElementById = function (id) {\r\n        return this.id === id ? this : undefined;\r\n    };\r\n    CardElement.prototype.getActionById = function (id) {\r\n        return undefined;\r\n    };\r\n    CardElement.prototype.getEffectivePadding = function () {\r\n        var padding = this.getPadding();\r\n        return (padding && this.allowCustomPadding) ? padding : this.getDefaultPadding();\r\n    };\r\n    Object.defineProperty(CardElement.prototype, \"hostConfig\", {\r\n        get: function () {\r\n            if (this._hostConfig) {\r\n                return this._hostConfig;\r\n            }\r\n            else {\r\n                if (this.parent) {\r\n                    return this.parent.hostConfig;\r\n                }\r\n                else {\r\n                    return host_config_1.defaultHostConfig;\r\n                }\r\n            }\r\n        },\r\n        set: function (value) {\r\n            this._hostConfig = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"index\", {\r\n        get: function () {\r\n            if (this.parent) {\r\n                return this.parent.indexOf(this);\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isInteractive\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isInline\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"hasVisibleSeparator\", {\r\n        get: function () {\r\n            if (this.parent && this.separatorElement) {\r\n                return !this.parent.isFirstElement(this) && (this.isVisible || this.isDesignMode());\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"separatorElement\", {\r\n        get: function () {\r\n            return this._separatorElement;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"parent\", {\r\n        get: function () {\r\n            return this._parent;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CardElement.langProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"lang\", true, /^[a-z]{2,3}$/ig);\r\n    CardElement.isVisibleProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"isVisible\", true);\r\n    CardElement.separatorProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"separator\", false);\r\n    CardElement.heightProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_1, \"height\", [\r\n        { value: \"auto\" },\r\n        { value: \"stretch\" }\r\n    ], \"auto\");\r\n    CardElement.horizontalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"horizontalAlignment\", Enums.HorizontalAlignment, Enums.HorizontalAlignment.Left);\r\n    CardElement.spacingProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"spacing\", Enums.Spacing, Enums.Spacing.Default);\r\n    __decorate([\r\n        serialization_1.property(CardElement.horizontalAlignmentProperty)\r\n    ], CardElement.prototype, \"horizontalAlignment\", void 0);\r\n    __decorate([\r\n        serialization_1.property(CardElement.spacingProperty)\r\n    ], CardElement.prototype, \"spacing\", void 0);\r\n    __decorate([\r\n        serialization_1.property(CardElement.separatorProperty)\r\n    ], CardElement.prototype, \"separator\", void 0);\r\n    __decorate([\r\n        serialization_1.property(CardElement.heightProperty)\r\n    ], CardElement.prototype, \"height\", void 0);\r\n    __decorate([\r\n        serialization_1.property(CardElement.langProperty)\r\n    ], CardElement.prototype, \"lang\", null);\r\n    __decorate([\r\n        serialization_1.property(CardElement.isVisibleProperty)\r\n    ], CardElement.prototype, \"isVisible\", null);\r\n    return CardElement;\r\n}(card_object_1.CardObject));\r\nexports.CardElement = CardElement;\r\nvar ActionProperty = /** @class */ (function (_super) {\r\n    __extends(ActionProperty, _super);\r\n    function ActionProperty(targetVersion, name, forbiddenActionTypes) {\r\n        if (forbiddenActionTypes === void 0) { forbiddenActionTypes = []; }\r\n        var _this = _super.call(this, targetVersion, name, undefined) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.forbiddenActionTypes = forbiddenActionTypes;\r\n        return _this;\r\n    }\r\n    ActionProperty.prototype.parse = function (sender, source, context) {\r\n        var parent = sender;\r\n        return context.parseAction(parent, source[this.name], this.forbiddenActionTypes, parent.isDesignMode());\r\n    };\r\n    ActionProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeValue(target, this.name, value ? value.toJSON(context) : undefined);\r\n    };\r\n    return ActionProperty;\r\n}(serialization_1.PropertyDefinition));\r\nexports.ActionProperty = ActionProperty;\r\nvar BaseTextBlock = /** @class */ (function (_super) {\r\n    __extends(BaseTextBlock, _super);\r\n    function BaseTextBlock(text) {\r\n        var _this = _super.call(this) || this;\r\n        _this.size = Enums.TextSize.Default;\r\n        _this.weight = Enums.TextWeight.Default;\r\n        _this.color = Enums.TextColor.Default;\r\n        _this.isSubtle = false;\r\n        _this.ariaHidden = false;\r\n        if (text) {\r\n            _this.text = text;\r\n        }\r\n        return _this;\r\n    }\r\n    BaseTextBlock.prototype.populateSchema = function (schema) {\r\n        _super.prototype.populateSchema.call(this, schema);\r\n        // selectAction is declared on BaseTextBlock but is only exposed on TextRun,\r\n        // so the property is removed from the BaseTextBlock schema.\r\n        schema.remove(BaseTextBlock.selectActionProperty);\r\n    };\r\n    Object.defineProperty(BaseTextBlock.prototype, \"text\", {\r\n        get: function () {\r\n            return this.getValue(BaseTextBlock.textProperty);\r\n        },\r\n        set: function (value) {\r\n            this.setText(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#endregion\r\n    BaseTextBlock.prototype.getFontSize = function (fontType) {\r\n        switch (this.size) {\r\n            case Enums.TextSize.Small:\r\n                return fontType.fontSizes.small;\r\n            case Enums.TextSize.Medium:\r\n                return fontType.fontSizes.medium;\r\n            case Enums.TextSize.Large:\r\n                return fontType.fontSizes.large;\r\n            case Enums.TextSize.ExtraLarge:\r\n                return fontType.fontSizes.extraLarge;\r\n            default:\r\n                return fontType.fontSizes.default;\r\n        }\r\n    };\r\n    BaseTextBlock.prototype.getColorDefinition = function (colorSet, color) {\r\n        switch (color) {\r\n            case Enums.TextColor.Accent:\r\n                return colorSet.accent;\r\n            case Enums.TextColor.Dark:\r\n                return colorSet.dark;\r\n            case Enums.TextColor.Light:\r\n                return colorSet.light;\r\n            case Enums.TextColor.Good:\r\n                return colorSet.good;\r\n            case Enums.TextColor.Warning:\r\n                return colorSet.warning;\r\n            case Enums.TextColor.Attention:\r\n                return colorSet.attention;\r\n            default:\r\n                return colorSet.default;\r\n        }\r\n    };\r\n    BaseTextBlock.prototype.setText = function (value) {\r\n        this.setValue(BaseTextBlock.textProperty, value);\r\n    };\r\n    BaseTextBlock.prototype.init = function (textDefinition) {\r\n        this.size = textDefinition.size;\r\n        this.weight = textDefinition.weight;\r\n        this.color = textDefinition.color;\r\n        this.isSubtle = textDefinition.isSubtle;\r\n    };\r\n    BaseTextBlock.prototype.asString = function () {\r\n        return this.text;\r\n    };\r\n    BaseTextBlock.prototype.applyStylesTo = function (targetElement) {\r\n        var fontType = this.hostConfig.getFontTypeDefinition(this.fontType);\r\n        if (fontType.fontFamily) {\r\n            targetElement.style.fontFamily = fontType.fontFamily;\r\n        }\r\n        var fontSize;\r\n        switch (this.size) {\r\n            case Enums.TextSize.Small:\r\n                fontSize = fontType.fontSizes.small;\r\n                break;\r\n            case Enums.TextSize.Medium:\r\n                fontSize = fontType.fontSizes.medium;\r\n                break;\r\n            case Enums.TextSize.Large:\r\n                fontSize = fontType.fontSizes.large;\r\n                break;\r\n            case Enums.TextSize.ExtraLarge:\r\n                fontSize = fontType.fontSizes.extraLarge;\r\n                break;\r\n            default:\r\n                fontSize = fontType.fontSizes.default;\r\n                break;\r\n        }\r\n        targetElement.style.fontSize = fontSize + \"px\";\r\n        var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\r\n        targetElement.style.color = Utils.stringToCssColor(this.isSubtle ? colorDefinition.subtle : colorDefinition.default);\r\n        var fontWeight;\r\n        switch (this.weight) {\r\n            case Enums.TextWeight.Lighter:\r\n                fontWeight = fontType.fontWeights.lighter;\r\n                break;\r\n            case Enums.TextWeight.Bolder:\r\n                fontWeight = fontType.fontWeights.bolder;\r\n                break;\r\n            default:\r\n                fontWeight = fontType.fontWeights.default;\r\n                break;\r\n        }\r\n        targetElement.style.fontWeight = fontWeight.toString();\r\n        if (this.ariaHidden) {\r\n            targetElement.setAttribute(\"aria-hidden\", \"true\");\r\n        }\r\n    };\r\n    Object.defineProperty(BaseTextBlock.prototype, \"effectiveColor\", {\r\n        get: function () {\r\n            return this.color ? this.color : Enums.TextColor.Default;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    BaseTextBlock.textProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"text\", true);\r\n    BaseTextBlock.sizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"size\", Enums.TextSize, Enums.TextSize.Default);\r\n    BaseTextBlock.weightProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"weight\", Enums.TextWeight, Enums.TextWeight.Default);\r\n    BaseTextBlock.colorProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"color\", Enums.TextColor, Enums.TextColor.Default);\r\n    BaseTextBlock.isSubtleProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"isSubtle\", false);\r\n    BaseTextBlock.fontTypeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"fontType\", Enums.FontType);\r\n    BaseTextBlock.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_1, \"selectAction\", [\"Action.ShowCard\"]);\r\n    __decorate([\r\n        serialization_1.property(BaseTextBlock.sizeProperty)\r\n    ], BaseTextBlock.prototype, \"size\", void 0);\r\n    __decorate([\r\n        serialization_1.property(BaseTextBlock.weightProperty)\r\n    ], BaseTextBlock.prototype, \"weight\", void 0);\r\n    __decorate([\r\n        serialization_1.property(BaseTextBlock.colorProperty)\r\n    ], BaseTextBlock.prototype, \"color\", void 0);\r\n    __decorate([\r\n        serialization_1.property(BaseTextBlock.fontTypeProperty)\r\n    ], BaseTextBlock.prototype, \"fontType\", void 0);\r\n    __decorate([\r\n        serialization_1.property(BaseTextBlock.isSubtleProperty)\r\n    ], BaseTextBlock.prototype, \"isSubtle\", void 0);\r\n    __decorate([\r\n        serialization_1.property(BaseTextBlock.textProperty)\r\n    ], BaseTextBlock.prototype, \"text\", null);\r\n    __decorate([\r\n        serialization_1.property(BaseTextBlock.selectActionProperty)\r\n    ], BaseTextBlock.prototype, \"selectAction\", void 0);\r\n    return BaseTextBlock;\r\n}(CardElement));\r\nexports.BaseTextBlock = BaseTextBlock;\r\nvar TextBlock = /** @class */ (function (_super) {\r\n    __extends(TextBlock, _super);\r\n    function TextBlock() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.wrap = false;\r\n        _this._treatAsPlainText = true;\r\n        _this.useMarkdown = true;\r\n        return _this;\r\n    }\r\n    TextBlock.prototype.restoreOriginalContent = function () {\r\n        if (this.renderedElement !== undefined) {\r\n            if (this.maxLines && this.maxLines > 0) {\r\n                this.renderedElement.style.maxHeight = this._computedLineHeight * this.maxLines + \"px\";\r\n            }\r\n            this.renderedElement.innerHTML = this._originalInnerHtml;\r\n        }\r\n    };\r\n    TextBlock.prototype.truncateIfSupported = function (maxHeight) {\r\n        if (this.renderedElement !== undefined) {\r\n            // For now, only truncate TextBlocks that contain just a single\r\n            // paragraph -- since the maxLines calculation doesn't take into\r\n            // account Markdown lists\r\n            var children = this.renderedElement.children;\r\n            var isTextOnly = !children.length;\r\n            var truncationSupported = isTextOnly || children.length == 1 && children[0].tagName.toLowerCase() == 'p';\r\n            if (truncationSupported) {\r\n                var element = isTextOnly ? this.renderedElement : children[0];\r\n                Utils.truncate(element, maxHeight, this._computedLineHeight);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    TextBlock.prototype.setText = function (value) {\r\n        _super.prototype.setText.call(this, value);\r\n        this._processedText = undefined;\r\n    };\r\n    TextBlock.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._processedText = undefined;\r\n        if (this.text) {\r\n            var preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);\r\n            var hostConfig = this.hostConfig;\r\n            var element = void 0;\r\n            if (this.forElementId) {\r\n                var labelElement = document.createElement(\"label\");\r\n                labelElement.htmlFor = this.forElementId;\r\n                element = labelElement;\r\n            }\r\n            else {\r\n                element = document.createElement(\"div\");\r\n            }\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-textBlock\"));\r\n            element.style.overflow = \"hidden\";\r\n            this.applyStylesTo(element);\r\n            if (this.selectAction) {\r\n                element.onclick = function (e) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    if (_this.selectAction) {\r\n                        _this.selectAction.execute();\r\n                    }\r\n                };\r\n                if (hostConfig.supportsInteractivity) {\r\n                    element.tabIndex = 0;\r\n                    element.setAttribute(\"role\", this.selectAction.getAriaRole());\r\n                    if (this.selectAction.title) {\r\n                        element.setAttribute(\"aria-label\", this.selectAction.title);\r\n                        element.title = this.selectAction.title;\r\n                    }\r\n                    element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n                }\r\n            }\r\n            if (!this._processedText) {\r\n                this._treatAsPlainText = true;\r\n                var formattedText = TextFormatters.formatText(this.lang, preProcessedText);\r\n                if (this.useMarkdown && formattedText) {\r\n                    if (shared_1.GlobalSettings.allowMarkForTextHighlighting) {\r\n                        formattedText = formattedText.replace(/<mark>/g, \"===\").replace(/<\\/mark>/g, \"/==/\");\r\n                    }\r\n                    var markdownProcessingResult = AdaptiveCard.applyMarkdown(formattedText);\r\n                    if (markdownProcessingResult.didProcess && markdownProcessingResult.outputHtml) {\r\n                        this._processedText = markdownProcessingResult.outputHtml;\r\n                        this._treatAsPlainText = false;\r\n                        // Only process <mark> tag if markdown processing was applied because\r\n                        // markdown processing is also responsible for sanitizing the input string\r\n                        if (shared_1.GlobalSettings.allowMarkForTextHighlighting && this._processedText) {\r\n                            var markStyle = \"\";\r\n                            var effectiveStyle = this.getEffectiveStyleDefinition();\r\n                            if (effectiveStyle.highlightBackgroundColor) {\r\n                                markStyle += \"background-color: \" + effectiveStyle.highlightBackgroundColor + \";\";\r\n                            }\r\n                            if (effectiveStyle.highlightForegroundColor) {\r\n                                markStyle += \"color: \" + effectiveStyle.highlightForegroundColor + \";\";\r\n                            }\r\n                            if (markStyle) {\r\n                                markStyle = 'style=\"' + markStyle + '\"';\r\n                            }\r\n                            this._processedText = this._processedText.replace(/===/g, \"<mark \" + markStyle + \">\").replace(/\\/==\\//g, \"</mark>\");\r\n                        }\r\n                    }\r\n                    else {\r\n                        this._processedText = formattedText;\r\n                        this._treatAsPlainText = true;\r\n                    }\r\n                }\r\n                else {\r\n                    this._processedText = formattedText;\r\n                    this._treatAsPlainText = true;\r\n                }\r\n            }\r\n            if (!this._processedText) {\r\n                this._processedText = \"\";\r\n            }\r\n            if (this._treatAsPlainText) {\r\n                element.innerText = this._processedText;\r\n            }\r\n            else {\r\n                element.innerHTML = this._processedText;\r\n            }\r\n            if (element.firstElementChild instanceof HTMLElement) {\r\n                var firstElementChild = element.firstElementChild;\r\n                firstElementChild.style.marginTop = \"0px\";\r\n                firstElementChild.style.width = \"100%\";\r\n                if (!this.wrap) {\r\n                    firstElementChild.style.overflow = \"hidden\";\r\n                    firstElementChild.style.textOverflow = \"ellipsis\";\r\n                }\r\n            }\r\n            if (element.lastElementChild instanceof HTMLElement) {\r\n                element.lastElementChild.style.marginBottom = \"0px\";\r\n            }\r\n            var anchors = element.getElementsByTagName(\"a\");\r\n            for (var i = 0; i < anchors.length; i++) {\r\n                var anchor = anchors[i];\r\n                anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\r\n                anchor.target = \"_blank\";\r\n                anchor.onclick = function (e) {\r\n                    if (raiseAnchorClickedEvent(_this, e.target)) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                    }\r\n                };\r\n            }\r\n            if (this.wrap) {\r\n                element.style.wordWrap = \"break-word\";\r\n                if (this.maxLines && this.maxLines > 0) {\r\n                    element.style.maxHeight = (this._computedLineHeight * this.maxLines) + \"px\";\r\n                    element.style.overflow = \"hidden\";\r\n                }\r\n            }\r\n            else {\r\n                element.style.whiteSpace = \"nowrap\";\r\n                element.style.textOverflow = \"ellipsis\";\r\n            }\r\n            if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation || shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {\r\n                this._originalInnerHtml = element.innerHTML;\r\n            }\r\n            return element;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    TextBlock.prototype.truncateOverflow = function (maxHeight) {\r\n        if (maxHeight >= this._computedLineHeight) {\r\n            return this.truncateIfSupported(maxHeight);\r\n        }\r\n        return false;\r\n    };\r\n    TextBlock.prototype.undoOverflowTruncation = function () {\r\n        this.restoreOriginalContent();\r\n        if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines) {\r\n            var maxHeight = this._computedLineHeight * this.maxLines;\r\n            this.truncateIfSupported(maxHeight);\r\n        }\r\n    };\r\n    TextBlock.prototype.applyStylesTo = function (targetElement) {\r\n        _super.prototype.applyStylesTo.call(this, targetElement);\r\n        var parentContainer = this.getParentContainer();\r\n        var isRtl = parentContainer ? parentContainer.isRtl() : false;\r\n        switch (this.horizontalAlignment) {\r\n            case Enums.HorizontalAlignment.Center:\r\n                targetElement.style.textAlign = \"center\";\r\n                break;\r\n            case Enums.HorizontalAlignment.Right:\r\n                targetElement.style.textAlign = isRtl ? \"left\" : \"right\";\r\n                break;\r\n            default:\r\n                targetElement.style.textAlign = isRtl ? \"right\" : \"left\";\r\n                break;\r\n        }\r\n        var lineHeights = this.hostConfig.lineHeights;\r\n        if (lineHeights) {\r\n            switch (this.size) {\r\n                case Enums.TextSize.Small:\r\n                    this._computedLineHeight = lineHeights.small;\r\n                    break;\r\n                case Enums.TextSize.Medium:\r\n                    this._computedLineHeight = lineHeights.medium;\r\n                    break;\r\n                case Enums.TextSize.Large:\r\n                    this._computedLineHeight = lineHeights.large;\r\n                    break;\r\n                case Enums.TextSize.ExtraLarge:\r\n                    this._computedLineHeight = lineHeights.extraLarge;\r\n                    break;\r\n                default:\r\n                    this._computedLineHeight = lineHeights.default;\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            // Looks like 1.33 is the magic number to compute line-height\r\n            // from font size.\r\n            this._computedLineHeight = this.getFontSize(this.hostConfig.getFontTypeDefinition(this.fontType)) * 1.33;\r\n        }\r\n        targetElement.style.lineHeight = this._computedLineHeight + \"px\";\r\n    };\r\n    TextBlock.prototype.getJsonTypeName = function () {\r\n        return \"TextBlock\";\r\n    };\r\n    TextBlock.prototype.updateLayout = function (processChildren) {\r\n        if (processChildren === void 0) { processChildren = false; }\r\n        _super.prototype.updateLayout.call(this, processChildren);\r\n        if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines && this.isDisplayed()) {\r\n            // Reset the element's innerHTML in case the available room for\r\n            // content has increased\r\n            this.restoreOriginalContent();\r\n            this.truncateIfSupported(this._computedLineHeight * this.maxLines);\r\n        }\r\n    };\r\n    TextBlock.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"wrap\", false);\r\n    TextBlock.maxLinesProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"maxLines\");\r\n    __decorate([\r\n        serialization_1.property(TextBlock.wrapProperty)\r\n    ], TextBlock.prototype, \"wrap\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TextBlock.maxLinesProperty)\r\n    ], TextBlock.prototype, \"maxLines\", void 0);\r\n    return TextBlock;\r\n}(BaseTextBlock));\r\nexports.TextBlock = TextBlock;\r\nvar TextRun = /** @class */ (function (_super) {\r\n    __extends(TextRun, _super);\r\n    function TextRun() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.italic = false;\r\n        _this.strikethrough = false;\r\n        _this.highlight = false;\r\n        _this.underline = false;\r\n        return _this;\r\n    }\r\n    TextRun.prototype.populateSchema = function (schema) {\r\n        _super.prototype.populateSchema.call(this, schema);\r\n        schema.add(BaseTextBlock.selectActionProperty);\r\n    };\r\n    //#endregion\r\n    TextRun.prototype.internalRender = function () {\r\n        var _this = this;\r\n        if (this.text) {\r\n            var preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);\r\n            var hostConfig = this.hostConfig;\r\n            var formattedText = TextFormatters.formatText(this.lang, preProcessedText);\r\n            if (!formattedText) {\r\n                formattedText = \"\";\r\n            }\r\n            var element = document.createElement(\"span\");\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-textRun\"));\r\n            this.applyStylesTo(element);\r\n            if (this.selectAction && hostConfig.supportsInteractivity) {\r\n                var anchor = document.createElement(\"a\");\r\n                anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\r\n                var href = this.selectAction.getHref();\r\n                anchor.href = href ? href : \"\";\r\n                anchor.target = \"_blank\";\r\n                anchor.onclick = function (e) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    if (_this.selectAction) {\r\n                        _this.selectAction.execute();\r\n                    }\r\n                };\r\n                if (this.selectAction.title) {\r\n                    anchor.setAttribute(\"aria-label\", this.selectAction.title);\r\n                    anchor.title = this.selectAction.title;\r\n                }\r\n                anchor.innerText = formattedText;\r\n                element.appendChild(anchor);\r\n            }\r\n            else {\r\n                element.innerText = formattedText;\r\n            }\r\n            return element;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    TextRun.prototype.applyStylesTo = function (targetElement) {\r\n        _super.prototype.applyStylesTo.call(this, targetElement);\r\n        if (this.italic) {\r\n            targetElement.style.fontStyle = \"italic\";\r\n        }\r\n        if (this.strikethrough) {\r\n            targetElement.style.textDecoration = \"line-through\";\r\n        }\r\n        if (this.highlight) {\r\n            var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\r\n            targetElement.style.backgroundColor = Utils.stringToCssColor(this.isSubtle ? colorDefinition.highlightColors.subtle : colorDefinition.highlightColors.default);\r\n        }\r\n        if (this.underline) {\r\n            targetElement.style.textDecoration = \"underline\";\r\n        }\r\n    };\r\n    TextRun.prototype.getJsonTypeName = function () {\r\n        return \"TextRun\";\r\n    };\r\n    Object.defineProperty(TextRun.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TextRun.prototype, \"isInline\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TextRun.italicProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"italic\", false);\r\n    TextRun.strikethroughProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"strikethrough\", false);\r\n    TextRun.highlightProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"highlight\", false);\r\n    TextRun.underlineProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, \"underline\", false);\r\n    __decorate([\r\n        serialization_1.property(TextRun.italicProperty)\r\n    ], TextRun.prototype, \"italic\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TextRun.strikethroughProperty)\r\n    ], TextRun.prototype, \"strikethrough\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TextRun.highlightProperty)\r\n    ], TextRun.prototype, \"highlight\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TextRun.underlineProperty)\r\n    ], TextRun.prototype, \"underline\", void 0);\r\n    return TextRun;\r\n}(BaseTextBlock));\r\nexports.TextRun = TextRun;\r\nvar RichTextBlock = /** @class */ (function (_super) {\r\n    __extends(RichTextBlock, _super);\r\n    function RichTextBlock() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._inlines = [];\r\n        return _this;\r\n    }\r\n    RichTextBlock.prototype.internalAddInline = function (inline, forceAdd) {\r\n        if (forceAdd === void 0) { forceAdd = false; }\r\n        if (!inline.isInline) {\r\n            throw new Error(strings_1.Strings.errors.elementCannotBeUsedAsInline());\r\n        }\r\n        var doAdd = inline.parent === undefined || forceAdd;\r\n        if (!doAdd && inline.parent != this) {\r\n            throw new Error(strings_1.Strings.errors.inlineAlreadyParented());\r\n        }\r\n        else {\r\n            inline.setParent(this);\r\n            this._inlines.push(inline);\r\n        }\r\n    };\r\n    RichTextBlock.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this._inlines = [];\r\n        if (Array.isArray(source[\"inlines\"])) {\r\n            for (var _i = 0, _a = source[\"inlines\"]; _i < _a.length; _i++) {\r\n                var jsonInline = _a[_i];\r\n                var inline = void 0;\r\n                if (typeof jsonInline === \"string\") {\r\n                    var textRun = new TextRun();\r\n                    textRun.text = jsonInline;\r\n                    inline = textRun;\r\n                }\r\n                else {\r\n                    // No fallback for inlines in 1.2\r\n                    inline = context.parseElement(this, jsonInline, false);\r\n                }\r\n                if (inline) {\r\n                    this.internalAddInline(inline, true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    RichTextBlock.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        if (this._inlines.length > 0) {\r\n            var jsonInlines = [];\r\n            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\r\n                var inline = _a[_i];\r\n                jsonInlines.push(inline.toJSON(context));\r\n            }\r\n            context.serializeValue(target, \"inlines\", jsonInlines);\r\n        }\r\n    };\r\n    RichTextBlock.prototype.internalRender = function () {\r\n        if (this._inlines.length > 0) {\r\n            var element = void 0;\r\n            if (this.forElementId) {\r\n                var labelElement = document.createElement(\"label\");\r\n                labelElement.htmlFor = this.forElementId;\r\n                element = labelElement;\r\n            }\r\n            else {\r\n                element = document.createElement(\"div\");\r\n            }\r\n            element.className = this.hostConfig.makeCssClassName(\"ac-richTextBlock\");\r\n            var parentContainer = this.getParentContainer();\r\n            var isRtl = parentContainer ? parentContainer.isRtl() : false;\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.textAlign = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.textAlign = isRtl ? \"left\" : \"right\";\r\n                    break;\r\n                default:\r\n                    element.style.textAlign = isRtl ? \"right\" : \"left\";\r\n                    break;\r\n            }\r\n            var renderedInlines = 0;\r\n            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\r\n                var inline = _a[_i];\r\n                var renderedInline = inline.render();\r\n                if (renderedInline) {\r\n                    element.appendChild(renderedInline);\r\n                    renderedInlines++;\r\n                }\r\n            }\r\n            if (renderedInlines > 0) {\r\n                return element;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    RichTextBlock.prototype.asString = function () {\r\n        var result = \"\";\r\n        for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\r\n            var inline = _a[_i];\r\n            result += inline.asString();\r\n        }\r\n        return result;\r\n    };\r\n    RichTextBlock.prototype.getJsonTypeName = function () {\r\n        return \"RichTextBlock\";\r\n    };\r\n    RichTextBlock.prototype.getInlineCount = function () {\r\n        return this._inlines.length;\r\n    };\r\n    RichTextBlock.prototype.getInlineAt = function (index) {\r\n        if (index >= 0 && index < this._inlines.length) {\r\n            return this._inlines[index];\r\n        }\r\n        else {\r\n            throw new Error(strings_1.Strings.errors.indexOutOfRange(index));\r\n        }\r\n    };\r\n    RichTextBlock.prototype.addInline = function (inline) {\r\n        if (typeof inline === \"string\") {\r\n            this.internalAddInline(new TextRun(inline));\r\n        }\r\n        else {\r\n            this.internalAddInline(inline);\r\n        }\r\n    };\r\n    RichTextBlock.prototype.removeInline = function (inline) {\r\n        var index = this._inlines.indexOf(inline);\r\n        if (index >= 0) {\r\n            this._inlines[index].setParent(undefined);\r\n            this._inlines.splice(index, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return RichTextBlock;\r\n}(CardElement));\r\nexports.RichTextBlock = RichTextBlock;\r\nvar Fact = /** @class */ (function (_super) {\r\n    __extends(Fact, _super);\r\n    function Fact(name, value) {\r\n        var _this = _super.call(this) || this;\r\n        _this.name = name;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    //#endregion\r\n    Fact.prototype.getSchemaKey = function () {\r\n        return \"Fact\";\r\n    };\r\n    //#region Schema\r\n    Fact.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\r\n    Fact.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    __decorate([\r\n        serialization_1.property(Fact.titleProperty)\r\n    ], Fact.prototype, \"name\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Fact.valueProperty)\r\n    ], Fact.prototype, \"value\", void 0);\r\n    return Fact;\r\n}(serialization_1.SerializableObject));\r\nexports.Fact = Fact;\r\nvar FactSet = /** @class */ (function (_super) {\r\n    __extends(FactSet, _super);\r\n    function FactSet() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(FactSet.prototype, \"useDefaultSizing\", {\r\n        //#endregion\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    FactSet.prototype.internalRender = function () {\r\n        var element = undefined;\r\n        var hostConfig = this.hostConfig;\r\n        if (this.facts.length > 0) {\r\n            element = document.createElement(\"table\");\r\n            element.style.borderWidth = \"0px\";\r\n            element.style.borderSpacing = \"0px\";\r\n            element.style.borderStyle = \"none\";\r\n            element.style.borderCollapse = \"collapse\";\r\n            element.style.display = \"block\";\r\n            element.style.overflow = \"hidden\";\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-factset\"));\r\n            element.setAttribute(\"role\", \"presentation\");\r\n            for (var i = 0; i < this.facts.length; i++) {\r\n                var trElement = document.createElement(\"tr\");\r\n                if (i > 0) {\r\n                    trElement.style.marginTop = hostConfig.factSet.spacing + \"px\";\r\n                }\r\n                // Title column\r\n                var tdElement = document.createElement(\"td\");\r\n                tdElement.style.padding = \"0\";\r\n                tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-title\"));\r\n                if (hostConfig.factSet.title.maxWidth) {\r\n                    tdElement.style.maxWidth = hostConfig.factSet.title.maxWidth + \"px\";\r\n                }\r\n                tdElement.style.verticalAlign = \"top\";\r\n                var textBlock = new TextBlock();\r\n                textBlock.setParent(this);\r\n                textBlock.text = (!this.facts[i].name && this.isDesignMode()) ? \"Title\" : this.facts[i].name;\r\n                textBlock.size = hostConfig.factSet.title.size;\r\n                textBlock.color = hostConfig.factSet.title.color;\r\n                textBlock.isSubtle = hostConfig.factSet.title.isSubtle;\r\n                textBlock.weight = hostConfig.factSet.title.weight;\r\n                textBlock.wrap = hostConfig.factSet.title.wrap;\r\n                textBlock.spacing = Enums.Spacing.None;\r\n                Utils.appendChild(tdElement, textBlock.render());\r\n                Utils.appendChild(trElement, tdElement);\r\n                // Spacer column\r\n                tdElement = document.createElement(\"td\");\r\n                tdElement.style.width = \"10px\";\r\n                Utils.appendChild(trElement, tdElement);\r\n                // Value column\r\n                tdElement = document.createElement(\"td\");\r\n                tdElement.style.padding = \"0\";\r\n                tdElement.style.verticalAlign = \"top\";\r\n                tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-value\"));\r\n                textBlock = new TextBlock();\r\n                textBlock.setParent(this);\r\n                textBlock.text = this.facts[i].value;\r\n                textBlock.size = hostConfig.factSet.value.size;\r\n                textBlock.color = hostConfig.factSet.value.color;\r\n                textBlock.isSubtle = hostConfig.factSet.value.isSubtle;\r\n                textBlock.weight = hostConfig.factSet.value.weight;\r\n                textBlock.wrap = hostConfig.factSet.value.wrap;\r\n                textBlock.spacing = Enums.Spacing.None;\r\n                Utils.appendChild(tdElement, textBlock.render());\r\n                Utils.appendChild(trElement, tdElement);\r\n                Utils.appendChild(element, trElement);\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    FactSet.prototype.getJsonTypeName = function () {\r\n        return \"FactSet\";\r\n    };\r\n    //#region Schema\r\n    FactSet.factsProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"facts\", Fact);\r\n    __decorate([\r\n        serialization_1.property(FactSet.factsProperty)\r\n    ], FactSet.prototype, \"facts\", void 0);\r\n    return FactSet;\r\n}(CardElement));\r\nexports.FactSet = FactSet;\r\nvar ImageDimensionProperty = /** @class */ (function (_super) {\r\n    __extends(ImageDimensionProperty, _super);\r\n    function ImageDimensionProperty(targetVersion, name, internalName, fallbackProperty) {\r\n        var _this = _super.call(this, targetVersion, name) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.internalName = internalName;\r\n        _this.fallbackProperty = fallbackProperty;\r\n        return _this;\r\n    }\r\n    ImageDimensionProperty.prototype.getInternalName = function () {\r\n        return this.internalName;\r\n    };\r\n    ImageDimensionProperty.prototype.parse = function (sender, source, context) {\r\n        var result = undefined;\r\n        var sourceValue = source[this.name];\r\n        if (sourceValue === undefined) {\r\n            return this.defaultValue;\r\n        }\r\n        var isValid = false;\r\n        if (typeof sourceValue === \"string\") {\r\n            try {\r\n                var size = shared_1.SizeAndUnit.parse(sourceValue, true);\r\n                if (size.unit == Enums.SizeUnit.Pixel) {\r\n                    result = size.physicalSize;\r\n                    isValid = true;\r\n                }\r\n            }\r\n            catch (_a) {\r\n                // Swallow the exception\r\n            }\r\n            // If the source value isn't valid per this property definition,\r\n            // check its validity per the fallback property, if specified\r\n            if (!isValid && this.fallbackProperty) {\r\n                isValid = this.fallbackProperty.isValidValue(sourceValue, context);\r\n            }\r\n        }\r\n        if (!isValid) {\r\n            context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(sourceValue, this.name));\r\n        }\r\n        return result;\r\n    };\r\n    ImageDimensionProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeValue(target, this.name, typeof value === \"number\" && !isNaN(value) ? value + \"px\" : undefined);\r\n    };\r\n    return ImageDimensionProperty;\r\n}(serialization_1.PropertyDefinition));\r\nvar Image = /** @class */ (function (_super) {\r\n    __extends(Image, _super);\r\n    function Image() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.size = Enums.Size.Auto;\r\n        _this.style = Enums.ImageStyle.Default;\r\n        return _this;\r\n    }\r\n    Image.prototype.populateSchema = function (schema) {\r\n        _super.prototype.populateSchema.call(this, schema);\r\n        schema.remove(CardElement.heightProperty);\r\n    };\r\n    //#endregion\r\n    Image.prototype.applySize = function (element) {\r\n        if (this.pixelWidth || this.pixelHeight) {\r\n            if (this.pixelWidth) {\r\n                element.style.width = this.pixelWidth + \"px\";\r\n            }\r\n            if (this.pixelHeight) {\r\n                element.style.height = this.pixelHeight + \"px\";\r\n            }\r\n        }\r\n        else {\r\n            if (this.maxHeight) {\r\n                // If the image is constrained in height, we set its height property and\r\n                // auto and stretch are ignored (default to medium). THis is necessary for\r\n                // ImageSet which uses a maximum image height as opposed to the cards width\r\n                // as a constraining dimension\r\n                switch (this.size) {\r\n                    case Enums.Size.Small:\r\n                        element.style.height = this.hostConfig.imageSizes.small + \"px\";\r\n                        break;\r\n                    case Enums.Size.Large:\r\n                        element.style.height = this.hostConfig.imageSizes.large + \"px\";\r\n                        break;\r\n                    default:\r\n                        element.style.height = this.hostConfig.imageSizes.medium + \"px\";\r\n                        break;\r\n                }\r\n                element.style.maxHeight = this.maxHeight + \"px\";\r\n            }\r\n            else {\r\n                switch (this.size) {\r\n                    case Enums.Size.Stretch:\r\n                        element.style.width = \"100%\";\r\n                        break;\r\n                    case Enums.Size.Auto:\r\n                        element.style.maxWidth = \"100%\";\r\n                        break;\r\n                    case Enums.Size.Small:\r\n                        element.style.width = this.hostConfig.imageSizes.small + \"px\";\r\n                        break;\r\n                    case Enums.Size.Large:\r\n                        element.style.width = this.hostConfig.imageSizes.large + \"px\";\r\n                        break;\r\n                    case Enums.Size.Medium:\r\n                        element.style.width = this.hostConfig.imageSizes.medium + \"px\";\r\n                        break;\r\n                }\r\n                element.style.maxHeight = \"100%\";\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(Image.prototype, \"useDefaultSizing\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Image.prototype.internalRender = function () {\r\n        var _this = this;\r\n        var element = undefined;\r\n        if (this.url) {\r\n            element = document.createElement(\"div\");\r\n            element.style.display = \"flex\";\r\n            element.style.alignItems = \"flex-start\";\r\n            element.onkeypress = function (e) {\r\n                if (_this.selectAction && (e.keyCode == 13 || e.keyCode == 32)) { // enter or space pressed\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    _this.selectAction.execute();\r\n                }\r\n            };\r\n            element.onclick = function (e) {\r\n                if (_this.selectAction) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    _this.selectAction.execute();\r\n                }\r\n            };\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.justifyContent = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.justifyContent = \"flex-end\";\r\n                    break;\r\n                default:\r\n                    element.style.justifyContent = \"flex-start\";\r\n                    break;\r\n            }\r\n            // Cache hostConfig to avoid walking the parent hierarchy multiple times\r\n            var hostConfig = this.hostConfig;\r\n            var imageElement = document.createElement(\"img\");\r\n            imageElement.onload = function (e) {\r\n                raiseImageLoadedEvent(_this);\r\n            };\r\n            imageElement.onerror = function (e) {\r\n                if (_this.renderedElement) {\r\n                    var card = _this.getRootElement();\r\n                    _this.renderedElement.innerHTML = \"\";\r\n                    if (card && card.designMode) {\r\n                        var errorElement = document.createElement(\"div\");\r\n                        errorElement.style.display = \"flex\";\r\n                        errorElement.style.alignItems = \"center\";\r\n                        errorElement.style.justifyContent = \"center\";\r\n                        errorElement.style.backgroundColor = \"#EEEEEE\";\r\n                        errorElement.style.color = \"black\";\r\n                        errorElement.innerText = \":-(\";\r\n                        errorElement.style.padding = \"10px\";\r\n                        _this.applySize(errorElement);\r\n                        _this.renderedElement.appendChild(errorElement);\r\n                    }\r\n                }\r\n                raiseImageLoadedEvent(_this);\r\n            };\r\n            imageElement.style.minWidth = \"0\";\r\n            imageElement.classList.add(hostConfig.makeCssClassName(\"ac-image\"));\r\n            if (this.selectAction !== undefined && hostConfig.supportsInteractivity) {\r\n                imageElement.tabIndex = 0;\r\n                imageElement.setAttribute(\"role\", this.selectAction.getAriaRole());\r\n                if (this.selectAction.title) {\r\n                    imageElement.setAttribute(\"aria-label\", this.selectAction.title);\r\n                    imageElement.title = this.selectAction.title;\r\n                }\r\n                imageElement.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n            }\r\n            this.applySize(imageElement);\r\n            if (this.style === Enums.ImageStyle.Person) {\r\n                imageElement.style.borderRadius = \"50%\";\r\n                imageElement.style.backgroundPosition = \"50% 50%\";\r\n                imageElement.style.backgroundRepeat = \"no-repeat\";\r\n            }\r\n            imageElement.style.backgroundColor = Utils.stringToCssColor(this.backgroundColor);\r\n            imageElement.src = this.preProcessPropertyValue(Image.urlProperty);\r\n            var altTextProperty = this.preProcessPropertyValue(Image.altTextProperty);\r\n            if (altTextProperty) {\r\n                imageElement.alt = altTextProperty;\r\n            }\r\n            element.appendChild(imageElement);\r\n        }\r\n        return element;\r\n    };\r\n    Image.prototype.getJsonTypeName = function () {\r\n        return \"Image\";\r\n    };\r\n    Image.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result && this.selectAction) {\r\n            result = this.selectAction.getActionById(id);\r\n        }\r\n        return result;\r\n    };\r\n    Image.prototype.getResourceInformation = function () {\r\n        return this.url ? [{ url: this.url, mimeType: \"image\" }] : [];\r\n    };\r\n    Image.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"url\");\r\n    Image.altTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"altText\");\r\n    Image.backgroundColorProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"backgroundColor\");\r\n    Image.styleProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"style\", Enums.ImageStyle, Enums.ImageStyle.Default);\r\n    Image.sizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"size\", Enums.Size, Enums.Size.Auto);\r\n    Image.pixelWidthProperty = new ImageDimensionProperty(serialization_1.Versions.v1_1, \"width\", \"pixelWidth\");\r\n    Image.pixelHeightProperty = new ImageDimensionProperty(serialization_1.Versions.v1_1, \"height\", \"pixelHeight\", CardElement.heightProperty);\r\n    Image.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_1, \"selectAction\", [\"Action.ShowCard\"]);\r\n    __decorate([\r\n        serialization_1.property(Image.urlProperty)\r\n    ], Image.prototype, \"url\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Image.altTextProperty)\r\n    ], Image.prototype, \"altText\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Image.backgroundColorProperty)\r\n    ], Image.prototype, \"backgroundColor\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Image.sizeProperty)\r\n    ], Image.prototype, \"size\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Image.styleProperty)\r\n    ], Image.prototype, \"style\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Image.pixelWidthProperty)\r\n    ], Image.prototype, \"pixelWidth\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Image.pixelHeightProperty)\r\n    ], Image.prototype, \"pixelHeight\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Image.selectActionProperty)\r\n    ], Image.prototype, \"selectAction\", void 0);\r\n    return Image;\r\n}(CardElement));\r\nexports.Image = Image;\r\nvar CardElementContainer = /** @class */ (function (_super) {\r\n    __extends(CardElementContainer, _super);\r\n    function CardElementContainer() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.allowVerticalOverflow = false;\r\n        return _this;\r\n    }\r\n    CardElementContainer.prototype.populateSchema = function (schema) {\r\n        _super.prototype.populateSchema.call(this, schema);\r\n        if (!this.isSelectable) {\r\n            schema.remove(CardElementContainer.selectActionProperty);\r\n        }\r\n    };\r\n    //#endregion\r\n    CardElementContainer.prototype.isElementAllowed = function (element) {\r\n        return this.hostConfig.supportsInteractivity || !element.isInteractive;\r\n    };\r\n    CardElementContainer.prototype.applyPadding = function () {\r\n        _super.prototype.applyPadding.call(this);\r\n        if (!this.renderedElement) {\r\n            return;\r\n        }\r\n        var physicalPadding = new shared_1.SpacingDefinition();\r\n        if (this.getEffectivePadding()) {\r\n            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\r\n        }\r\n        this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\r\n        this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\r\n        this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n        this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\r\n        this.renderedElement.style.marginRight = \"0\";\r\n        this.renderedElement.style.marginLeft = \"0\";\r\n    };\r\n    Object.defineProperty(CardElementContainer.prototype, \"isSelectable\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CardElementContainer.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            var item = this.getItemAt(i);\r\n            if (!this.hostConfig.supportsInteractivity && item.isInteractive) {\r\n                context.addFailure(this, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.interactivityNotAllowed());\r\n            }\r\n            if (!this.isElementAllowed(item)) {\r\n                context.addFailure(this, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(item.getJsonTypeName()));\r\n            }\r\n            item.internalValidateProperties(context);\r\n        }\r\n        if (this._selectAction) {\r\n            this._selectAction.internalValidateProperties(context);\r\n        }\r\n    };\r\n    CardElementContainer.prototype.render = function () {\r\n        var _this = this;\r\n        var element = _super.prototype.render.call(this);\r\n        if (element) {\r\n            var hostConfig = this.hostConfig;\r\n            if (this.allowVerticalOverflow) {\r\n                element.style.overflowX = \"hidden\";\r\n                element.style.overflowY = \"auto\";\r\n            }\r\n            if (element && this.isSelectable && this._selectAction && hostConfig.supportsInteractivity) {\r\n                element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n                element.tabIndex = 0;\r\n                element.setAttribute(\"role\", this._selectAction.getAriaRole());\r\n                if (this._selectAction.title) {\r\n                    element.setAttribute(\"aria-label\", this._selectAction.title);\r\n                    element.title = this._selectAction.title;\r\n                }\r\n                element.onclick = function (e) {\r\n                    if (_this._selectAction !== undefined) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                        _this._selectAction.execute();\r\n                    }\r\n                };\r\n                element.onkeypress = function (e) {\r\n                    if (_this._selectAction !== undefined && (e.keyCode == 13 || e.keyCode == 32)) {\r\n                        // Enter or space pressed\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                        _this._selectAction.execute();\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    CardElementContainer.prototype.updateLayout = function (processChildren) {\r\n        if (processChildren === void 0) { processChildren = true; }\r\n        _super.prototype.updateLayout.call(this, processChildren);\r\n        if (processChildren) {\r\n            for (var i = 0; i < this.getItemCount(); i++) {\r\n                this.getItemAt(i).updateLayout();\r\n            }\r\n        }\r\n    };\r\n    CardElementContainer.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        var result = [];\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            result = result.concat(this.getItemAt(i).getAllInputs(processActions));\r\n        }\r\n        return result;\r\n    };\r\n    CardElementContainer.prototype.getResourceInformation = function () {\r\n        var result = [];\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            result = result.concat(this.getItemAt(i).getResourceInformation());\r\n        }\r\n        return result;\r\n    };\r\n    CardElementContainer.prototype.getElementById = function (id) {\r\n        var result = _super.prototype.getElementById.call(this, id);\r\n        if (!result) {\r\n            for (var i = 0; i < this.getItemCount(); i++) {\r\n                result = this.getItemAt(i).getElementById(id);\r\n                if (result) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    CardElementContainer.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_1, \"selectAction\", [\"Action.ShowCard\"]);\r\n    __decorate([\r\n        serialization_1.property(CardElementContainer.selectActionProperty)\r\n    ], CardElementContainer.prototype, \"_selectAction\", void 0);\r\n    return CardElementContainer;\r\n}(CardElement));\r\nexports.CardElementContainer = CardElementContainer;\r\nvar ImageSet = /** @class */ (function (_super) {\r\n    __extends(ImageSet, _super);\r\n    function ImageSet() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._images = [];\r\n        _this.imageSize = Enums.ImageSize.Medium;\r\n        return _this;\r\n    }\r\n    //#endregion\r\n    ImageSet.prototype.internalRender = function () {\r\n        var element = undefined;\r\n        if (this._images.length > 0) {\r\n            element = document.createElement(\"div\");\r\n            element.style.display = \"flex\";\r\n            element.style.flexWrap = \"wrap\";\r\n            for (var _i = 0, _a = this._images; _i < _a.length; _i++) {\r\n                var image = _a[_i];\r\n                switch (this.imageSize) {\r\n                    case Enums.ImageSize.Small:\r\n                        image.size = Enums.Size.Small;\r\n                        break;\r\n                    case Enums.ImageSize.Large:\r\n                        image.size = Enums.Size.Large;\r\n                        break;\r\n                    default:\r\n                        image.size = Enums.Size.Medium;\r\n                        break;\r\n                }\r\n                image.maxHeight = this.hostConfig.imageSet.maxImageHeight;\r\n                var renderedImage = image.render();\r\n                if (renderedImage) {\r\n                    renderedImage.style.display = \"inline-flex\";\r\n                    renderedImage.style.margin = \"0px\";\r\n                    renderedImage.style.marginRight = \"10px\";\r\n                    Utils.appendChild(element, renderedImage);\r\n                }\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    ImageSet.prototype.getItemCount = function () {\r\n        return this._images.length;\r\n    };\r\n    ImageSet.prototype.getItemAt = function (index) {\r\n        return this._images[index];\r\n    };\r\n    ImageSet.prototype.getFirstVisibleRenderedItem = function () {\r\n        return this._images && this._images.length > 0 ? this._images[0] : undefined;\r\n    };\r\n    ImageSet.prototype.getLastVisibleRenderedItem = function () {\r\n        return this._images && this._images.length > 0 ? this._images[this._images.length - 1] : undefined;\r\n    };\r\n    ImageSet.prototype.removeItem = function (item) {\r\n        if (item instanceof Image) {\r\n            var itemIndex = this._images.indexOf(item);\r\n            if (itemIndex >= 0) {\r\n                this._images.splice(itemIndex, 1);\r\n                item.setParent(undefined);\r\n                this.updateLayout();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ImageSet.prototype.getJsonTypeName = function () {\r\n        return \"ImageSet\";\r\n    };\r\n    ImageSet.prototype.addImage = function (image) {\r\n        if (!image.parent) {\r\n            this._images.push(image);\r\n            image.setParent(this);\r\n        }\r\n        else {\r\n            throw new Error(\"This image already belongs to another ImageSet\");\r\n        }\r\n    };\r\n    ImageSet.prototype.indexOf = function (cardElement) {\r\n        return cardElement instanceof Image ? this._images.indexOf(cardElement) : -1;\r\n    };\r\n    ImageSet.imagesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"images\", Image, function (sender, item) { item.setParent(sender); });\r\n    ImageSet.imageSizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"imageSize\", Enums.ImageSize, Enums.ImageSize.Medium);\r\n    __decorate([\r\n        serialization_1.property(ImageSet.imagesProperty)\r\n    ], ImageSet.prototype, \"_images\", void 0);\r\n    __decorate([\r\n        serialization_1.property(ImageSet.imageSizeProperty)\r\n    ], ImageSet.prototype, \"imageSize\", void 0);\r\n    return ImageSet;\r\n}(CardElementContainer));\r\nexports.ImageSet = ImageSet;\r\nvar MediaSource = /** @class */ (function (_super) {\r\n    __extends(MediaSource, _super);\r\n    function MediaSource(url, mimeType) {\r\n        var _this = _super.call(this) || this;\r\n        _this.url = url;\r\n        _this.mimeType = mimeType;\r\n        return _this;\r\n    }\r\n    //#endregion\r\n    MediaSource.prototype.getSchemaKey = function () {\r\n        return \"MediaSource\";\r\n    };\r\n    MediaSource.prototype.isValid = function () {\r\n        return this.mimeType && this.url ? true : false;\r\n    };\r\n    MediaSource.prototype.render = function () {\r\n        var result = undefined;\r\n        if (this.isValid()) {\r\n            result = document.createElement(\"source\");\r\n            result.src = this.url;\r\n            result.type = this.mimeType;\r\n        }\r\n        return result;\r\n    };\r\n    //#region Schema\r\n    MediaSource.mimeTypeProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"mimeType\");\r\n    MediaSource.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"url\");\r\n    __decorate([\r\n        serialization_1.property(MediaSource.mimeTypeProperty)\r\n    ], MediaSource.prototype, \"mimeType\", void 0);\r\n    __decorate([\r\n        serialization_1.property(MediaSource.urlProperty)\r\n    ], MediaSource.prototype, \"url\", void 0);\r\n    return MediaSource;\r\n}(serialization_1.SerializableObject));\r\nexports.MediaSource = MediaSource;\r\nvar Media = /** @class */ (function (_super) {\r\n    __extends(Media, _super);\r\n    function Media() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.sources = [];\r\n        return _this;\r\n    }\r\n    Media.prototype.getPosterUrl = function () {\r\n        return this.poster ? this.poster : this.hostConfig.media.defaultPoster;\r\n    };\r\n    Media.prototype.processSources = function () {\r\n        this._selectedSources = [];\r\n        this._selectedMediaType = undefined;\r\n        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\r\n            var source = _a[_i];\r\n            var mimeComponents = source.mimeType ? source.mimeType.split('/') : [];\r\n            if (mimeComponents.length == 2) {\r\n                if (!this._selectedMediaType) {\r\n                    var index = Media.supportedMediaTypes.indexOf(mimeComponents[0]);\r\n                    if (index >= 0) {\r\n                        this._selectedMediaType = Media.supportedMediaTypes[index];\r\n                    }\r\n                }\r\n                if (mimeComponents[0] == this._selectedMediaType) {\r\n                    this._selectedSources.push(source);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Media.prototype.handlePlayButtonInvoke = function (event) {\r\n        if (this.hostConfig.media.allowInlinePlayback) {\r\n            event.preventDefault();\r\n            event.cancelBubble = true;\r\n            if (this.renderedElement) {\r\n                var mediaPlayerElement = this.renderMediaPlayer();\r\n                this.renderedElement.innerHTML = \"\";\r\n                this.renderedElement.appendChild(mediaPlayerElement);\r\n                mediaPlayerElement.play();\r\n            }\r\n        }\r\n        else {\r\n            if (Media.onPlay) {\r\n                event.preventDefault();\r\n                event.cancelBubble = true;\r\n                Media.onPlay(this);\r\n            }\r\n        }\r\n    };\r\n    Media.prototype.renderPoster = function () {\r\n        var _this = this;\r\n        var playButtonArrowWidth = 12;\r\n        var playButtonArrowHeight = 15;\r\n        var posterRootElement = document.createElement(\"div\");\r\n        posterRootElement.className = this.hostConfig.makeCssClassName(\"ac-media-poster\");\r\n        posterRootElement.setAttribute(\"role\", \"contentinfo\");\r\n        posterRootElement.setAttribute(\"aria-label\", this.altText ? this.altText : \"Media content\");\r\n        posterRootElement.style.position = \"relative\";\r\n        posterRootElement.style.display = \"flex\";\r\n        var posterUrl = this.getPosterUrl();\r\n        if (posterUrl) {\r\n            var posterImageElement_1 = document.createElement(\"img\");\r\n            posterImageElement_1.style.width = \"100%\";\r\n            posterImageElement_1.style.height = \"100%\";\r\n            posterImageElement_1.setAttribute(\"role\", \"presentation\");\r\n            posterImageElement_1.onerror = function (e) {\r\n                if (posterImageElement_1.parentNode) {\r\n                    posterImageElement_1.parentNode.removeChild(posterImageElement_1);\r\n                }\r\n                posterRootElement.classList.add(\"empty\");\r\n                posterRootElement.style.minHeight = \"150px\";\r\n            };\r\n            posterImageElement_1.src = posterUrl;\r\n            posterRootElement.appendChild(posterImageElement_1);\r\n        }\r\n        else {\r\n            posterRootElement.classList.add(\"empty\");\r\n            posterRootElement.style.minHeight = \"150px\";\r\n        }\r\n        if (this.hostConfig.supportsInteractivity && this._selectedSources.length > 0) {\r\n            var playButtonOuterElement = document.createElement(\"div\");\r\n            playButtonOuterElement.tabIndex = 0;\r\n            playButtonOuterElement.setAttribute(\"role\", \"button\");\r\n            playButtonOuterElement.setAttribute(\"aria-label\", \"Play media\");\r\n            playButtonOuterElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton\");\r\n            playButtonOuterElement.style.display = \"flex\";\r\n            playButtonOuterElement.style.alignItems = \"center\";\r\n            playButtonOuterElement.style.justifyContent = \"center\";\r\n            playButtonOuterElement.onclick = function (e) {\r\n                _this.handlePlayButtonInvoke(e);\r\n            };\r\n            playButtonOuterElement.onkeypress = function (e) {\r\n                if (e.keyCode == 13 || e.keyCode == 32) { // space or enter\r\n                    _this.handlePlayButtonInvoke(e);\r\n                }\r\n            };\r\n            var playButtonInnerElement = document.createElement(\"div\");\r\n            playButtonInnerElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton-arrow\");\r\n            playButtonInnerElement.style.width = playButtonArrowWidth + \"px\";\r\n            playButtonInnerElement.style.height = playButtonArrowHeight + \"px\";\r\n            playButtonInnerElement.style.borderTopWidth = (playButtonArrowHeight / 2) + \"px\";\r\n            playButtonInnerElement.style.borderBottomWidth = (playButtonArrowHeight / 2) + \"px\";\r\n            playButtonInnerElement.style.borderLeftWidth = playButtonArrowWidth + \"px\";\r\n            playButtonInnerElement.style.borderRightWidth = \"0\";\r\n            playButtonInnerElement.style.borderStyle = \"solid\";\r\n            playButtonInnerElement.style.borderTopColor = \"transparent\";\r\n            playButtonInnerElement.style.borderRightColor = \"transparent\";\r\n            playButtonInnerElement.style.borderBottomColor = \"transparent\";\r\n            playButtonInnerElement.style.transform = \"translate(\" + (playButtonArrowWidth / 10) + \"px,0px)\";\r\n            playButtonOuterElement.appendChild(playButtonInnerElement);\r\n            var playButtonContainer = document.createElement(\"div\");\r\n            playButtonContainer.style.position = \"absolute\";\r\n            playButtonContainer.style.left = \"0\";\r\n            playButtonContainer.style.top = \"0\";\r\n            playButtonContainer.style.width = \"100%\";\r\n            playButtonContainer.style.height = \"100%\";\r\n            playButtonContainer.style.display = \"flex\";\r\n            playButtonContainer.style.justifyContent = \"center\";\r\n            playButtonContainer.style.alignItems = \"center\";\r\n            playButtonContainer.appendChild(playButtonOuterElement);\r\n            posterRootElement.appendChild(playButtonContainer);\r\n        }\r\n        return posterRootElement;\r\n    };\r\n    Media.prototype.renderMediaPlayer = function () {\r\n        var mediaElement;\r\n        if (this._selectedMediaType == \"video\") {\r\n            var videoPlayer = document.createElement(\"video\");\r\n            var posterUrl = this.getPosterUrl();\r\n            if (posterUrl) {\r\n                videoPlayer.poster = posterUrl;\r\n            }\r\n            mediaElement = videoPlayer;\r\n        }\r\n        else {\r\n            mediaElement = document.createElement(\"audio\");\r\n        }\r\n        mediaElement.setAttribute(\"webkit-playsinline\", \"\");\r\n        mediaElement.setAttribute(\"playsinline\", \"\");\r\n        mediaElement.autoplay = true;\r\n        mediaElement.controls = true;\r\n        if (Utils.isMobileOS()) {\r\n            mediaElement.muted = true;\r\n        }\r\n        mediaElement.preload = \"none\";\r\n        mediaElement.style.width = \"100%\";\r\n        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\r\n            var source = _a[_i];\r\n            var renderedSource = source.render();\r\n            Utils.appendChild(mediaElement, renderedSource);\r\n        }\r\n        return mediaElement;\r\n    };\r\n    Media.prototype.internalRender = function () {\r\n        var element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-media\");\r\n        this.processSources();\r\n        element.appendChild(this.renderPoster());\r\n        return element;\r\n    };\r\n    Media.prototype.getJsonTypeName = function () {\r\n        return \"Media\";\r\n    };\r\n    Media.prototype.getResourceInformation = function () {\r\n        var result = [];\r\n        var posterUrl = this.getPosterUrl();\r\n        if (posterUrl) {\r\n            result.push({ url: posterUrl, mimeType: \"image\" });\r\n        }\r\n        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\r\n            var mediaSource = _a[_i];\r\n            if (mediaSource.isValid()) {\r\n                result.push({\r\n                    url: mediaSource.url,\r\n                    mimeType: mediaSource.mimeType\r\n                });\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(Media.prototype, \"selectedMediaType\", {\r\n        get: function () {\r\n            return this._selectedMediaType;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Media.sourcesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_1, \"sources\", MediaSource);\r\n    Media.posterProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"poster\");\r\n    Media.altTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"altText\");\r\n    //#endregion\r\n    Media.supportedMediaTypes = [\"audio\", \"video\"];\r\n    __decorate([\r\n        serialization_1.property(Media.sourcesProperty)\r\n    ], Media.prototype, \"sources\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Media.posterProperty)\r\n    ], Media.prototype, \"poster\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Media.altTextProperty)\r\n    ], Media.prototype, \"altText\", void 0);\r\n    return Media;\r\n}(CardElement));\r\nexports.Media = Media;\r\nvar Input = /** @class */ (function (_super) {\r\n    __extends(Input, _super);\r\n    function Input() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Input.prototype.getAllLabelIds = function () {\r\n        var labelIds = [];\r\n        if (this._renderedLabelElement) {\r\n            labelIds.push(this._renderedLabelElement.id);\r\n        }\r\n        if (this._renderedErrorMessageElement) {\r\n            labelIds.push(this._renderedErrorMessageElement.id);\r\n        }\r\n        return labelIds;\r\n    };\r\n    Input.prototype.updateInputControlAriaLabelledBy = function () {\r\n        if (this._renderedInputControlElement) {\r\n            var labelIds = this.getAllLabelIds();\r\n            if (this._renderedLabelElement) {\r\n                labelIds.push(this._renderedLabelElement.id);\r\n            }\r\n            if (this._renderedErrorMessageElement) {\r\n                labelIds.push(this._renderedErrorMessageElement.id);\r\n            }\r\n            if (labelIds.length > 0) {\r\n                this._renderedInputControlElement.setAttribute(\"aria-labelledby\", labelIds.join(\" \"));\r\n            }\r\n            else {\r\n                this._renderedInputControlElement.removeAttribute(\"aria-labelledby\");\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(Input.prototype, \"isNullable\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Input.prototype, \"renderedInputControlElement\", {\r\n        get: function () {\r\n            return this._renderedInputControlElement;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Input.prototype, \"inputControlContainerElement\", {\r\n        get: function () {\r\n            return this._inputControlContainerElement;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Input.prototype.overrideInternalRender = function () {\r\n        var hostConfig = this.hostConfig;\r\n        this._outerContainerElement = document.createElement(\"div\");\r\n        this._outerContainerElement.style.display = \"flex\";\r\n        this._outerContainerElement.style.flexDirection = \"column\";\r\n        var renderedInputControlId = Utils.generateUniqueId();\r\n        if (this.label) {\r\n            var labelRichTextBlock = new RichTextBlock();\r\n            labelRichTextBlock.setParent(this);\r\n            labelRichTextBlock.forElementId = renderedInputControlId;\r\n            var labelInline = new TextRun(this.label);\r\n            labelRichTextBlock.addInline(labelInline);\r\n            if (this.isRequired) {\r\n                labelInline.init(hostConfig.inputs.label.requiredInputs);\r\n                var isRequiredCueInline = new TextRun(hostConfig.inputs.label.requiredInputs.suffix);\r\n                isRequiredCueInline.color = hostConfig.inputs.label.requiredInputs.suffixColor;\r\n                isRequiredCueInline.ariaHidden = true;\r\n                labelRichTextBlock.addInline(isRequiredCueInline);\r\n            }\r\n            else {\r\n                labelInline.init(hostConfig.inputs.label.optionalInputs);\r\n            }\r\n            this._renderedLabelElement = labelRichTextBlock.render();\r\n            if (this._renderedLabelElement) {\r\n                this._renderedLabelElement.id = Utils.generateUniqueId();\r\n                this._renderedLabelElement.style.marginBottom = hostConfig.getEffectiveSpacing(hostConfig.inputs.label.inputSpacing) + \"px\";\r\n                this._outerContainerElement.appendChild(this._renderedLabelElement);\r\n            }\r\n        }\r\n        this._inputControlContainerElement = document.createElement(\"div\");\r\n        this._inputControlContainerElement.className = hostConfig.makeCssClassName(\"ac-input-container\");\r\n        this._inputControlContainerElement.style.display = \"flex\";\r\n        this._renderedInputControlElement = this.internalRender();\r\n        if (this._renderedInputControlElement) {\r\n            this._renderedInputControlElement.id = renderedInputControlId;\r\n            this._renderedInputControlElement.style.minWidth = \"0px\";\r\n            if (this.isNullable && this.isRequired) {\r\n                this._renderedInputControlElement.setAttribute(\"aria-required\", \"true\");\r\n                this._renderedInputControlElement.classList.add(hostConfig.makeCssClassName(\"ac-input-required\"));\r\n            }\r\n            this._inputControlContainerElement.appendChild(this._renderedInputControlElement);\r\n            this._outerContainerElement.appendChild(this._inputControlContainerElement);\r\n            this.updateInputControlAriaLabelledBy();\r\n            return this._outerContainerElement;\r\n        }\r\n        return undefined;\r\n    };\r\n    Input.prototype.valueChanged = function () {\r\n        if (this.isValid()) {\r\n            this.resetValidationFailureCue();\r\n        }\r\n        if (this.onValueChanged) {\r\n            this.onValueChanged(this);\r\n        }\r\n        raiseInputValueChangedEvent(this);\r\n    };\r\n    Input.prototype.resetValidationFailureCue = function () {\r\n        if (this.renderedInputControlElement) {\r\n            this.renderedInputControlElement.classList.remove(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\r\n            this.updateInputControlAriaLabelledBy();\r\n            if (this._renderedErrorMessageElement) {\r\n                this._outerContainerElement.removeChild(this._renderedErrorMessageElement);\r\n                this._renderedErrorMessageElement = undefined;\r\n            }\r\n        }\r\n    };\r\n    Input.prototype.showValidationErrorMessage = function () {\r\n        if (this.renderedElement && this.errorMessage && shared_1.GlobalSettings.displayInputValidationErrors) {\r\n            var errorMessageTextBlock = new TextBlock();\r\n            errorMessageTextBlock.setParent(this);\r\n            errorMessageTextBlock.text = this.errorMessage;\r\n            errorMessageTextBlock.wrap = true;\r\n            errorMessageTextBlock.init(this.hostConfig.inputs.errorMessage);\r\n            this._renderedErrorMessageElement = errorMessageTextBlock.render();\r\n            if (this._renderedErrorMessageElement) {\r\n                this._renderedErrorMessageElement.id = Utils.generateUniqueId();\r\n                this._outerContainerElement.appendChild(this._renderedErrorMessageElement);\r\n                this.updateInputControlAriaLabelledBy();\r\n            }\r\n        }\r\n    };\r\n    Input.prototype.focus = function () {\r\n        if (this._renderedInputControlElement) {\r\n            this._renderedInputControlElement.focus();\r\n        }\r\n    };\r\n    Input.prototype.isValid = function () {\r\n        return true;\r\n    };\r\n    Input.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (!this.id) {\r\n            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.inputsMustHaveUniqueId());\r\n        }\r\n        if (this.isRequired) {\r\n            if (!this.label) {\r\n                context.addFailure(this, Enums.ValidationEvent.RequiredInputsShouldHaveLabel, \"Required inputs should have a label\");\r\n            }\r\n            if (!this.errorMessage) {\r\n                context.addFailure(this, Enums.ValidationEvent.RequiredInputsShouldHaveErrorMessage, \"Required inputs should have an error message\");\r\n            }\r\n        }\r\n    };\r\n    Input.prototype.validateValue = function () {\r\n        this.resetValidationFailureCue();\r\n        var result = this.isRequired ? this.isSet() && this.isValid() : this.isValid();\r\n        if (!result && this.renderedInputControlElement) {\r\n            this.renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\r\n            this.showValidationErrorMessage();\r\n        }\r\n        return result;\r\n    };\r\n    Input.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        return [this];\r\n    };\r\n    Object.defineProperty(Input.prototype, \"isInteractive\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    Input.labelProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, \"label\", true);\r\n    Input.isRequiredProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, \"isRequired\", false);\r\n    Input.errorMessageProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, \"errorMessage\", true);\r\n    __decorate([\r\n        serialization_1.property(Input.labelProperty)\r\n    ], Input.prototype, \"label\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Input.isRequiredProperty)\r\n    ], Input.prototype, \"isRequired\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Input.errorMessageProperty)\r\n    ], Input.prototype, \"errorMessage\", void 0);\r\n    return Input;\r\n}(CardElement));\r\nexports.Input = Input;\r\nvar TextInput = /** @class */ (function (_super) {\r\n    __extends(TextInput, _super);\r\n    function TextInput() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.isMultiline = false;\r\n        _this.style = Enums.InputTextStyle.Text;\r\n        return _this;\r\n    }\r\n    //#endregion\r\n    TextInput.prototype.setupInput = function (input) {\r\n        var _this = this;\r\n        input.style.flex = \"1 1 auto\";\r\n        input.tabIndex = 0;\r\n        if (this.placeholder) {\r\n            input.placeholder = this.placeholder;\r\n            input.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n        if (this.defaultValue) {\r\n            input.value = this.defaultValue;\r\n        }\r\n        if (this.maxLength && this.maxLength > 0) {\r\n            input.maxLength = this.maxLength;\r\n        }\r\n        input.oninput = function () { _this.valueChanged(); };\r\n        input.onkeypress = function (e) {\r\n            // Ctrl+Enter pressed\r\n            if (e.ctrlKey && e.code === \"Enter\" && _this.inlineAction) {\r\n                _this.inlineAction.execute();\r\n            }\r\n        };\r\n    };\r\n    TextInput.prototype.internalRender = function () {\r\n        var result;\r\n        if (this.isMultiline) {\r\n            result = document.createElement(\"textarea\");\r\n            result.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\", \"ac-multiline\");\r\n        }\r\n        else {\r\n            result = document.createElement(\"input\");\r\n            result.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\");\r\n            result.type = Enums.InputTextStyle[this.style].toLowerCase();\r\n        }\r\n        this.setupInput(result);\r\n        return result;\r\n    };\r\n    TextInput.prototype.overrideInternalRender = function () {\r\n        var _this = this;\r\n        var renderedInputControl = _super.prototype.overrideInternalRender.call(this);\r\n        if (this.inlineAction) {\r\n            var button_1 = document.createElement(\"button\");\r\n            button_1.className = this.hostConfig.makeCssClassName(\"ac-inlineActionButton\");\r\n            button_1.onclick = function (e) {\r\n                e.preventDefault();\r\n                e.cancelBubble = true;\r\n                if (_this.inlineAction) {\r\n                    _this.inlineAction.execute();\r\n                }\r\n            };\r\n            if (this.inlineAction.iconUrl) {\r\n                button_1.classList.add(\"iconOnly\");\r\n                var icon_1 = document.createElement(\"img\");\r\n                icon_1.style.height = \"100%\";\r\n                icon_1.setAttribute(\"role\", \"presentation\");\r\n                // The below trick is necessary as a workaround in Chrome where the icon is initially displayed\r\n                // at its native size then resized to 100% of the button's height. This cfreates an unpleasant\r\n                // flicker. On top of that, Chrome's flex implementation fails to prperly re-layout the button\r\n                // after the image has loaded and been gicven its final size. The below trick also fixes that.\r\n                icon_1.style.display = \"none\";\r\n                icon_1.onload = function () {\r\n                    icon_1.style.removeProperty(\"display\");\r\n                };\r\n                icon_1.onerror = function () {\r\n                    button_1.removeChild(icon_1);\r\n                    button_1.classList.remove(\"iconOnly\");\r\n                    button_1.classList.add(\"textOnly\");\r\n                    button_1.textContent = _this.inlineAction && _this.inlineAction.title ? _this.inlineAction.title : strings_1.Strings.defaults.inlineActionTitle();\r\n                };\r\n                icon_1.src = this.inlineAction.iconUrl;\r\n                button_1.appendChild(icon_1);\r\n                button_1.title = this.inlineAction.title ? this.inlineAction.title : strings_1.Strings.defaults.inlineActionTitle();\r\n            }\r\n            else {\r\n                button_1.classList.add(\"textOnly\");\r\n                button_1.textContent = this.inlineAction.title ? this.inlineAction.title : strings_1.Strings.defaults.inlineActionTitle();\r\n            }\r\n            button_1.style.marginLeft = \"8px\";\r\n            this.inputControlContainerElement.appendChild(button_1);\r\n        }\r\n        return renderedInputControl;\r\n    };\r\n    TextInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Text\";\r\n    };\r\n    TextInput.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result && this.inlineAction) {\r\n            result = this.inlineAction.getActionById(id);\r\n        }\r\n        return result;\r\n    };\r\n    TextInput.prototype.isSet = function () {\r\n        return this.value ? true : false;\r\n    };\r\n    TextInput.prototype.isValid = function () {\r\n        if (!this.value) {\r\n            return true;\r\n        }\r\n        if (this.regex) {\r\n            return new RegExp(this.regex, \"g\").test(this.value);\r\n        }\r\n        return true;\r\n    };\r\n    Object.defineProperty(TextInput.prototype, \"value\", {\r\n        get: function () {\r\n            if (this.renderedInputControlElement) {\r\n                if (this.isMultiline) {\r\n                    return this.renderedInputControlElement.value;\r\n                }\r\n                else {\r\n                    return this.renderedInputControlElement.value;\r\n                }\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TextInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    TextInput.maxLengthProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"maxLength\");\r\n    TextInput.isMultilineProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"isMultiline\", false);\r\n    TextInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\r\n    TextInput.styleProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"style\", Enums.InputTextStyle, Enums.InputTextStyle.Text);\r\n    TextInput.inlineActionProperty = new ActionProperty(serialization_1.Versions.v1_0, \"inlineAction\", [\"Action.ShowCard\"]);\r\n    TextInput.regexProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, \"regex\", true);\r\n    __decorate([\r\n        serialization_1.property(TextInput.valueProperty)\r\n    ], TextInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TextInput.maxLengthProperty)\r\n    ], TextInput.prototype, \"maxLength\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TextInput.isMultilineProperty)\r\n    ], TextInput.prototype, \"isMultiline\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TextInput.placeholderProperty)\r\n    ], TextInput.prototype, \"placeholder\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TextInput.styleProperty)\r\n    ], TextInput.prototype, \"style\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TextInput.inlineActionProperty)\r\n    ], TextInput.prototype, \"inlineAction\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TextInput.regexProperty)\r\n    ], TextInput.prototype, \"regex\", void 0);\r\n    return TextInput;\r\n}(Input));\r\nexports.TextInput = TextInput;\r\nvar ToggleInput = /** @class */ (function (_super) {\r\n    __extends(ToggleInput, _super);\r\n    function ToggleInput() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.valueOn = \"true\";\r\n        _this.valueOff = \"false\";\r\n        _this.wrap = false;\r\n        return _this;\r\n    }\r\n    ToggleInput.prototype.updateInputControlAriaLabelledBy = function () {\r\n        if (this._checkboxInputElement) {\r\n            var joinedLabelIds = this.getAllLabelIds().join(\" \");\r\n            if (this._checkboxInputLabelElement && this._checkboxInputLabelElement.id) {\r\n                joinedLabelIds += \" \" + this._checkboxInputLabelElement.id;\r\n            }\r\n            if (joinedLabelIds) {\r\n                this._checkboxInputElement.setAttribute(\"aria-labelledby\", joinedLabelIds);\r\n            }\r\n            else {\r\n                this._checkboxInputElement.removeAttribute(\"aria-labelledby\");\r\n            }\r\n        }\r\n    };\r\n    ToggleInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        var element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-toggleInput\");\r\n        element.style.width = \"100%\";\r\n        element.style.display = \"flex\";\r\n        element.style.alignItems = \"center\";\r\n        this._checkboxInputElement = document.createElement(\"input\");\r\n        this._checkboxInputElement.id = Utils.generateUniqueId();\r\n        this._checkboxInputElement.type = \"checkbox\";\r\n        this._checkboxInputElement.style.display = \"inline-block\";\r\n        this._checkboxInputElement.style.verticalAlign = \"middle\";\r\n        this._checkboxInputElement.style.margin = \"0\";\r\n        this._checkboxInputElement.style.flex = \"0 0 auto\";\r\n        if (this.title) {\r\n            this._checkboxInputElement.setAttribute(\"aria-label\", this.title);\r\n        }\r\n        if (this.isRequired) {\r\n            this._checkboxInputElement.setAttribute(\"aria-required\", \"true\");\r\n        }\r\n        this._checkboxInputElement.tabIndex = 0;\r\n        if (this.defaultValue == this.valueOn) {\r\n            this._checkboxInputElement.checked = true;\r\n        }\r\n        this._checkboxInputElement.onchange = function () { _this.valueChanged(); };\r\n        Utils.appendChild(element, this._checkboxInputElement);\r\n        if (this.title || this.isDesignMode()) {\r\n            var label = new TextBlock();\r\n            label.setParent(this);\r\n            label.forElementId = this._checkboxInputElement.id;\r\n            label.hostConfig = this.hostConfig;\r\n            label.text = !this.title ? this.getJsonTypeName() : this.title;\r\n            label.useMarkdown = shared_1.GlobalSettings.useMarkdownInRadioButtonAndCheckbox;\r\n            label.wrap = this.wrap;\r\n            this._checkboxInputLabelElement = label.render();\r\n            if (this._checkboxInputLabelElement) {\r\n                this._checkboxInputLabelElement.id = Utils.generateUniqueId();\r\n                this._checkboxInputLabelElement.style.display = \"inline-block\";\r\n                this._checkboxInputLabelElement.style.flex = \"1 1 auto\";\r\n                this._checkboxInputLabelElement.style.marginLeft = \"6px\";\r\n                this._checkboxInputLabelElement.style.verticalAlign = \"middle\";\r\n                var spacerElement = document.createElement(\"div\");\r\n                spacerElement.style.width = \"6px\";\r\n                Utils.appendChild(element, spacerElement);\r\n                Utils.appendChild(element, this._checkboxInputLabelElement);\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    Object.defineProperty(ToggleInput.prototype, \"isNullable\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ToggleInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Toggle\";\r\n    };\r\n    ToggleInput.prototype.focus = function () {\r\n        if (this._checkboxInputElement) {\r\n            this._checkboxInputElement.focus();\r\n        }\r\n    };\r\n    ToggleInput.prototype.isSet = function () {\r\n        if (this.isRequired) {\r\n            return this.value === this.valueOn;\r\n        }\r\n        return this.value ? true : false;\r\n    };\r\n    Object.defineProperty(ToggleInput.prototype, \"value\", {\r\n        get: function () {\r\n            if (this._checkboxInputElement) {\r\n                return this._checkboxInputElement.checked ? this.valueOn : this.valueOff;\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ToggleInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    ToggleInput.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\r\n    ToggleInput.valueOnProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"valueOn\", true, undefined, \"true\", function (sender) { return \"true\"; });\r\n    ToggleInput.valueOffProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"valueOff\", true, undefined, \"false\", function (sender) { return \"false\"; });\r\n    ToggleInput.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"wrap\", false);\r\n    __decorate([\r\n        serialization_1.property(ToggleInput.valueProperty)\r\n    ], ToggleInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        serialization_1.property(ToggleInput.titleProperty)\r\n    ], ToggleInput.prototype, \"title\", void 0);\r\n    __decorate([\r\n        serialization_1.property(ToggleInput.valueOnProperty)\r\n    ], ToggleInput.prototype, \"valueOn\", void 0);\r\n    __decorate([\r\n        serialization_1.property(ToggleInput.valueOffProperty)\r\n    ], ToggleInput.prototype, \"valueOff\", void 0);\r\n    __decorate([\r\n        serialization_1.property(ToggleInput.wrapProperty)\r\n    ], ToggleInput.prototype, \"wrap\", void 0);\r\n    return ToggleInput;\r\n}(Input));\r\nexports.ToggleInput = ToggleInput;\r\nvar Choice = /** @class */ (function (_super) {\r\n    __extends(Choice, _super);\r\n    function Choice(title, value) {\r\n        var _this = _super.call(this) || this;\r\n        _this.title = title;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    //#endregion\r\n    Choice.prototype.getSchemaKey = function () {\r\n        return \"Choice\";\r\n    };\r\n    //#region Schema\r\n    Choice.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\r\n    Choice.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    __decorate([\r\n        serialization_1.property(Choice.titleProperty)\r\n    ], Choice.prototype, \"title\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Choice.valueProperty)\r\n    ], Choice.prototype, \"value\", void 0);\r\n    return Choice;\r\n}(serialization_1.SerializableObject));\r\nexports.Choice = Choice;\r\nvar ChoiceSetInput = /** @class */ (function (_super) {\r\n    __extends(ChoiceSetInput, _super);\r\n    function ChoiceSetInput() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.isMultiSelect = false;\r\n        _this.wrap = false;\r\n        _this.choices = [];\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ChoiceSetInput.prototype, \"isCompact\", {\r\n        get: function () {\r\n            return this.style !== \"expanded\";\r\n        },\r\n        set: function (value) {\r\n            this.style = value ? undefined : \"expanded\";\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ChoiceSetInput.getUniqueCategoryName = function () {\r\n        var uniqueCategoryName = \"__ac-category\" + ChoiceSetInput.uniqueCategoryCounter;\r\n        ChoiceSetInput.uniqueCategoryCounter++;\r\n        return uniqueCategoryName;\r\n    };\r\n    ChoiceSetInput.prototype.renderCompoundInput = function (cssClassName, type, defaultValues) {\r\n        var _this = this;\r\n        var element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-input\", cssClassName);\r\n        element.style.width = \"100%\";\r\n        this._toggleInputs = [];\r\n        this._labels = [];\r\n        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\r\n            var choice = _a[_i];\r\n            var input = document.createElement(\"input\");\r\n            input.id = Utils.generateUniqueId();\r\n            input.type = type;\r\n            input.style.margin = \"0\";\r\n            input.style.display = \"inline-block\";\r\n            input.style.verticalAlign = \"middle\";\r\n            input.style.flex = \"0 0 auto\";\r\n            input.name = this.id ? this.id : this._uniqueCategoryName;\r\n            if (this.isRequired) {\r\n                input.setAttribute(\"aria-required\", \"true\");\r\n            }\r\n            if (choice.value) {\r\n                input.value = choice.value;\r\n            }\r\n            if (choice.title) {\r\n                input.setAttribute(\"aria-label\", choice.title);\r\n            }\r\n            if (defaultValues && choice.value) {\r\n                if (defaultValues.indexOf(choice.value) >= 0) {\r\n                    input.checked = true;\r\n                }\r\n            }\r\n            input.onchange = function () { _this.valueChanged(); };\r\n            this._toggleInputs.push(input);\r\n            var compoundInput = document.createElement(\"div\");\r\n            compoundInput.style.display = \"flex\";\r\n            compoundInput.style.alignItems = \"center\";\r\n            Utils.appendChild(compoundInput, input);\r\n            var label = new TextBlock();\r\n            label.setParent(this);\r\n            label.forElementId = input.id;\r\n            label.hostConfig = this.hostConfig;\r\n            label.text = choice.title ? choice.title : \"Choice \" + this._toggleInputs.length;\r\n            label.useMarkdown = shared_1.GlobalSettings.useMarkdownInRadioButtonAndCheckbox;\r\n            label.wrap = this.wrap;\r\n            var labelElement = label.render();\r\n            this._labels.push(labelElement);\r\n            if (labelElement) {\r\n                labelElement.id = Utils.generateUniqueId();\r\n                labelElement.style.display = \"inline-block\";\r\n                labelElement.style.flex = \"1 1 auto\";\r\n                labelElement.style.marginLeft = \"6px\";\r\n                labelElement.style.verticalAlign = \"middle\";\r\n                var spacerElement = document.createElement(\"div\");\r\n                spacerElement.style.width = \"6px\";\r\n                Utils.appendChild(compoundInput, spacerElement);\r\n                Utils.appendChild(compoundInput, labelElement);\r\n            }\r\n            Utils.appendChild(element, compoundInput);\r\n        }\r\n        return element;\r\n    };\r\n    ChoiceSetInput.prototype.updateInputControlAriaLabelledBy = function () {\r\n        if (this.isMultiSelect || this.style === \"expanded\") {\r\n            var labelIds = this.getAllLabelIds();\r\n            for (var i = 0; i < this._toggleInputs.length; i++) {\r\n                var joinedLabelIds = labelIds.join(\" \");\r\n                var label = this._labels[i];\r\n                if (label && label.id) {\r\n                    joinedLabelIds += \" \" + label.id;\r\n                }\r\n                if (joinedLabelIds) {\r\n                    this._toggleInputs[i].setAttribute(\"aria-labelledby\", joinedLabelIds);\r\n                }\r\n                else {\r\n                    this._toggleInputs[i].removeAttribute(\"aria-labelledby\");\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            _super.prototype.updateInputControlAriaLabelledBy.call(this);\r\n        }\r\n    };\r\n    // Make sure `aria-current` is applied to the currently-selected item\r\n    ChoiceSetInput.prototype.internalApplyAriaCurrent = function () {\r\n        var options = this._selectElement.options;\r\n        if (options) {\r\n            for (var i = 0; i < options.length; i++) {\r\n                if (options[i].selected) {\r\n                    options[i].setAttribute(\"aria-current\", \"true\");\r\n                }\r\n                else {\r\n                    options[i].removeAttribute(\"aria-current\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._uniqueCategoryName = ChoiceSetInput.getUniqueCategoryName();\r\n        if (this.isMultiSelect) {\r\n            // Render as a list of toggle inputs\r\n            return this.renderCompoundInput(\"ac-choiceSetInput-multiSelect\", \"checkbox\", this.defaultValue ? this.defaultValue.split(this.hostConfig.choiceSetInputValueSeparator) : undefined);\r\n        }\r\n        else {\r\n            if (this.style === \"expanded\") {\r\n                // Render as a series of radio buttons\r\n                return this.renderCompoundInput(\"ac-choiceSetInput-expanded\", \"radio\", this.defaultValue ? [this.defaultValue] : undefined);\r\n            }\r\n            else {\r\n                // Render as a combo box\r\n                this._selectElement = document.createElement(\"select\");\r\n                this._selectElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-multichoiceInput\", \"ac-choiceSetInput-compact\");\r\n                this._selectElement.style.width = \"100%\";\r\n                var option = document.createElement(\"option\");\r\n                option.selected = true;\r\n                option.disabled = true;\r\n                option.hidden = true;\r\n                option.value = \"\";\r\n                if (this.placeholder) {\r\n                    option.text = this.placeholder;\r\n                }\r\n                Utils.appendChild(this._selectElement, option);\r\n                for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\r\n                    var choice = _a[_i];\r\n                    var option_1 = document.createElement(\"option\");\r\n                    option_1.value = choice.value;\r\n                    option_1.text = choice.title;\r\n                    option_1.setAttribute(\"aria-label\", choice.title);\r\n                    if (choice.value == this.defaultValue) {\r\n                        option_1.selected = true;\r\n                    }\r\n                    Utils.appendChild(this._selectElement, option_1);\r\n                }\r\n                this._selectElement.onchange = function () {\r\n                    _this.internalApplyAriaCurrent();\r\n                    _this.valueChanged();\r\n                };\r\n                this.internalApplyAriaCurrent();\r\n                return this._selectElement;\r\n            }\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.ChoiceSet\";\r\n    };\r\n    ChoiceSetInput.prototype.focus = function () {\r\n        if (this.isMultiSelect || this.style === \"expanded\") {\r\n            if (this._toggleInputs.length > 0) {\r\n                this._toggleInputs[0].focus();\r\n            }\r\n        }\r\n        else {\r\n            _super.prototype.focus.call(this);\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (this.choices.length == 0) {\r\n            context.addFailure(this, Enums.ValidationEvent.CollectionCantBeEmpty, strings_1.Strings.errors.choiceSetMustHaveAtLeastOneChoice());\r\n        }\r\n        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\r\n            var choice = _a[_i];\r\n            if (!choice.title || !choice.value) {\r\n                context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.choiceSetChoicesMustHaveTitleAndValue());\r\n            }\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.isSet = function () {\r\n        return this.value ? true : false;\r\n    };\r\n    Object.defineProperty(ChoiceSetInput.prototype, \"value\", {\r\n        get: function () {\r\n            if (!this.isMultiSelect) {\r\n                if (this.isCompact) {\r\n                    if (this._selectElement) {\r\n                        return this._selectElement.selectedIndex > 0 ? this._selectElement.value : undefined;\r\n                    }\r\n                    return undefined;\r\n                }\r\n                else {\r\n                    if (!this._toggleInputs || this._toggleInputs.length == 0) {\r\n                        return undefined;\r\n                    }\r\n                    for (var _i = 0, _a = this._toggleInputs; _i < _a.length; _i++) {\r\n                        var toggleInput = _a[_i];\r\n                        if (toggleInput.checked) {\r\n                            return toggleInput.value;\r\n                        }\r\n                    }\r\n                    return undefined;\r\n                }\r\n            }\r\n            else {\r\n                if (!this._toggleInputs || this._toggleInputs.length == 0) {\r\n                    return undefined;\r\n                }\r\n                var result = \"\";\r\n                for (var _b = 0, _c = this._toggleInputs; _b < _c.length; _b++) {\r\n                    var toggleInput = _c[_b];\r\n                    if (toggleInput.checked) {\r\n                        if (result != \"\") {\r\n                            result += this.hostConfig.choiceSetInputValueSeparator;\r\n                        }\r\n                        result += toggleInput.value;\r\n                    }\r\n                }\r\n                return result ? result : undefined;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ChoiceSetInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    ChoiceSetInput.choicesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"choices\", Choice);\r\n    ChoiceSetInput.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_0, \"style\", [\r\n        { value: \"compact\" },\r\n        { value: \"expanded\" }\r\n    ], \"compact\");\r\n    ChoiceSetInput.isMultiSelectProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"isMultiSelect\", false);\r\n    ChoiceSetInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\r\n    ChoiceSetInput.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"wrap\", false);\r\n    //#endregion\r\n    ChoiceSetInput.uniqueCategoryCounter = 0;\r\n    __decorate([\r\n        serialization_1.property(ChoiceSetInput.valueProperty)\r\n    ], ChoiceSetInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        serialization_1.property(ChoiceSetInput.styleProperty)\r\n    ], ChoiceSetInput.prototype, \"style\", void 0);\r\n    __decorate([\r\n        serialization_1.property(ChoiceSetInput.isMultiSelectProperty)\r\n    ], ChoiceSetInput.prototype, \"isMultiSelect\", void 0);\r\n    __decorate([\r\n        serialization_1.property(ChoiceSetInput.placeholderProperty)\r\n    ], ChoiceSetInput.prototype, \"placeholder\", void 0);\r\n    __decorate([\r\n        serialization_1.property(ChoiceSetInput.wrapProperty)\r\n    ], ChoiceSetInput.prototype, \"wrap\", void 0);\r\n    __decorate([\r\n        serialization_1.property(ChoiceSetInput.choicesProperty)\r\n    ], ChoiceSetInput.prototype, \"choices\", void 0);\r\n    return ChoiceSetInput;\r\n}(Input));\r\nexports.ChoiceSetInput = ChoiceSetInput;\r\nvar NumberInput = /** @class */ (function (_super) {\r\n    __extends(NumberInput, _super);\r\n    function NumberInput() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    NumberInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._numberInputElement = document.createElement(\"input\");\r\n        this._numberInputElement.setAttribute(\"type\", \"number\");\r\n        if (this.min) {\r\n            this._numberInputElement.setAttribute(\"min\", this.min.toString());\r\n        }\r\n        if (this.max) {\r\n            this._numberInputElement.setAttribute(\"max\", this.max.toString());\r\n        }\r\n        this._numberInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-numberInput\");\r\n        this._numberInputElement.style.width = \"100%\";\r\n        this._numberInputElement.tabIndex = 0;\r\n        if (this.defaultValue !== undefined) {\r\n            this._numberInputElement.valueAsNumber = this.defaultValue;\r\n        }\r\n        if (this.placeholder) {\r\n            this._numberInputElement.placeholder = this.placeholder;\r\n            this._numberInputElement.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n        this._numberInputElement.oninput = function () { _this.valueChanged(); };\r\n        return this._numberInputElement;\r\n    };\r\n    NumberInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Number\";\r\n    };\r\n    NumberInput.prototype.isSet = function () {\r\n        return this.value !== undefined && !isNaN(this.value);\r\n    };\r\n    NumberInput.prototype.isValid = function () {\r\n        if (!this.value) {\r\n            return !this.isRequired;\r\n        }\r\n        var result = true;\r\n        if (this.min !== undefined) {\r\n            result = result && (this.value >= this.min);\r\n        }\r\n        if (this.max !== undefined) {\r\n            result = result && (this.value <= this.max);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(NumberInput.prototype, \"value\", {\r\n        get: function () {\r\n            return this._numberInputElement ? this._numberInputElement.valueAsNumber : undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    NumberInput.valueProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"value\");\r\n    NumberInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\r\n    NumberInput.minProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"min\");\r\n    NumberInput.maxProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"max\");\r\n    __decorate([\r\n        serialization_1.property(NumberInput.valueProperty)\r\n    ], NumberInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        serialization_1.property(NumberInput.minProperty)\r\n    ], NumberInput.prototype, \"min\", void 0);\r\n    __decorate([\r\n        serialization_1.property(NumberInput.maxProperty)\r\n    ], NumberInput.prototype, \"max\", void 0);\r\n    __decorate([\r\n        serialization_1.property(NumberInput.placeholderProperty)\r\n    ], NumberInput.prototype, \"placeholder\", void 0);\r\n    return NumberInput;\r\n}(Input));\r\nexports.NumberInput = NumberInput;\r\nvar DateInput = /** @class */ (function (_super) {\r\n    __extends(DateInput, _super);\r\n    function DateInput() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DateInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._dateInputElement = document.createElement(\"input\");\r\n        this._dateInputElement.setAttribute(\"type\", \"date\");\r\n        if (this.min) {\r\n            this._dateInputElement.setAttribute(\"min\", this.min);\r\n        }\r\n        if (this.max) {\r\n            this._dateInputElement.setAttribute(\"max\", this.max);\r\n        }\r\n        if (this.placeholder) {\r\n            this._dateInputElement.placeholder = this.placeholder;\r\n            this._dateInputElement.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n        this._dateInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-dateInput\");\r\n        this._dateInputElement.style.width = \"100%\";\r\n        this._dateInputElement.oninput = function () { _this.valueChanged(); };\r\n        if (this.defaultValue) {\r\n            this._dateInputElement.value = this.defaultValue;\r\n        }\r\n        return this._dateInputElement;\r\n    };\r\n    DateInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Date\";\r\n    };\r\n    DateInput.prototype.isSet = function () {\r\n        return this.value ? true : false;\r\n    };\r\n    DateInput.prototype.isValid = function () {\r\n        if (!this.value) {\r\n            return !this.isRequired;\r\n        }\r\n        var valueAsDate = new Date(this.value);\r\n        var result = true;\r\n        if (this.min) {\r\n            var minDate = new Date(this.min);\r\n            result = result && (valueAsDate >= minDate);\r\n        }\r\n        if (this.max) {\r\n            var maxDate = new Date(this.max);\r\n            result = result && (valueAsDate <= maxDate);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(DateInput.prototype, \"value\", {\r\n        get: function () {\r\n            return this._dateInputElement ? this._dateInputElement.value : undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    DateInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    DateInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\r\n    DateInput.minProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"min\");\r\n    DateInput.maxProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"max\");\r\n    __decorate([\r\n        serialization_1.property(DateInput.valueProperty)\r\n    ], DateInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        serialization_1.property(DateInput.minProperty)\r\n    ], DateInput.prototype, \"min\", void 0);\r\n    __decorate([\r\n        serialization_1.property(DateInput.maxProperty)\r\n    ], DateInput.prototype, \"max\", void 0);\r\n    __decorate([\r\n        serialization_1.property(DateInput.placeholderProperty)\r\n    ], DateInput.prototype, \"placeholder\", void 0);\r\n    return DateInput;\r\n}(Input));\r\nexports.DateInput = DateInput;\r\nvar TimeProperty = /** @class */ (function (_super) {\r\n    __extends(TimeProperty, _super);\r\n    function TimeProperty(targetVersion, name) {\r\n        var _this = _super.call(this, targetVersion, name, function (sender, property, source, context) {\r\n            var value = source[property.name];\r\n            if (typeof value === \"string\" && value && /^[0-9]{2}:[0-9]{2}$/.test(value)) {\r\n                return value;\r\n            }\r\n            return undefined;\r\n        }, function (sender, property, target, value, context) {\r\n            context.serializeValue(target, property.name, value);\r\n        }) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        return _this;\r\n    }\r\n    return TimeProperty;\r\n}(serialization_1.CustomProperty));\r\nexports.TimeProperty = TimeProperty;\r\nvar TimeInput = /** @class */ (function (_super) {\r\n    __extends(TimeInput, _super);\r\n    function TimeInput() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TimeInput.convertTimeStringToDate = function (timeString) {\r\n        return new Date(\"1973-09-04T\" + timeString + \":00Z\");\r\n    };\r\n    TimeInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._timeInputElement = document.createElement(\"input\");\r\n        this._timeInputElement.setAttribute(\"type\", \"time\");\r\n        this._timeInputElement.setAttribute(\"min\", this.min);\r\n        this._timeInputElement.setAttribute(\"max\", this.max);\r\n        this._timeInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-timeInput\");\r\n        this._timeInputElement.style.width = \"100%\";\r\n        this._timeInputElement.oninput = function () { _this.valueChanged(); };\r\n        if (this.placeholder) {\r\n            this._timeInputElement.placeholder = this.placeholder;\r\n            this._timeInputElement.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n        if (this.defaultValue) {\r\n            this._timeInputElement.value = this.defaultValue;\r\n        }\r\n        return this._timeInputElement;\r\n    };\r\n    TimeInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Time\";\r\n    };\r\n    TimeInput.prototype.isSet = function () {\r\n        return this.value ? true : false;\r\n    };\r\n    TimeInput.prototype.isValid = function () {\r\n        if (!this.value) {\r\n            return !this.isRequired;\r\n        }\r\n        var valueAsDate = TimeInput.convertTimeStringToDate(this.value);\r\n        var result = true;\r\n        if (this.min) {\r\n            var minDate = TimeInput.convertTimeStringToDate(this.min);\r\n            result = result && (valueAsDate >= minDate);\r\n        }\r\n        if (this.max) {\r\n            var maxDate = TimeInput.convertTimeStringToDate(this.max);\r\n            result = result && (valueAsDate <= maxDate);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(TimeInput.prototype, \"value\", {\r\n        get: function () {\r\n            return this._timeInputElement ? this._timeInputElement.value : undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    TimeInput.valueProperty = new TimeProperty(serialization_1.Versions.v1_0, \"value\");\r\n    TimeInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\r\n    TimeInput.minProperty = new TimeProperty(serialization_1.Versions.v1_0, \"min\");\r\n    TimeInput.maxProperty = new TimeProperty(serialization_1.Versions.v1_0, \"max\");\r\n    __decorate([\r\n        serialization_1.property(TimeInput.valueProperty)\r\n    ], TimeInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TimeInput.minProperty)\r\n    ], TimeInput.prototype, \"min\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TimeInput.maxProperty)\r\n    ], TimeInput.prototype, \"max\", void 0);\r\n    __decorate([\r\n        serialization_1.property(TimeInput.placeholderProperty)\r\n    ], TimeInput.prototype, \"placeholder\", void 0);\r\n    return TimeInput;\r\n}(Input));\r\nexports.TimeInput = TimeInput;\r\nvar ActionButton = /** @class */ (function () {\r\n    function ActionButton(action, parentContainerStyle) {\r\n        this._state = 0 /* Normal */;\r\n        this.action = action;\r\n        this._parentContainerStyle = parentContainerStyle;\r\n    }\r\n    ActionButton.prototype.updateCssStyle = function () {\r\n        var _a, _b;\r\n        if (this.action.parent && this.action.renderedElement) {\r\n            var hostConfig = this.action.parent.hostConfig;\r\n            this.action.renderedElement.className = hostConfig.makeCssClassName(\"ac-pushButton\");\r\n            if (this._parentContainerStyle) {\r\n                this.action.renderedElement.classList.add(\"style-\" + this._parentContainerStyle);\r\n            }\r\n            this.action.updateActionButtonCssStyle(this.action.renderedElement, this._state);\r\n            this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"expanded\"));\r\n            this.action.renderedElement.classList.remove(hostConfig.makeCssClassName(\"subdued\"));\r\n            switch (this._state) {\r\n                case 1 /* Expanded */:\r\n                    this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"expanded\"));\r\n                    break;\r\n                case 2 /* Subdued */:\r\n                    this.action.renderedElement.classList.add(hostConfig.makeCssClassName(\"subdued\"));\r\n                    break;\r\n            }\r\n            if (this.action.style) {\r\n                if (this.action.style === Enums.ActionStyle.Positive) {\r\n                    (_a = this.action.renderedElement.classList).add.apply(_a, hostConfig.makeCssClassNames(\"primary\", \"style-positive\"));\r\n                }\r\n                else {\r\n                    (_b = this.action.renderedElement.classList).add.apply(_b, hostConfig.makeCssClassNames(\"style-\" + this.action.style.toLowerCase()));\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ActionButton.prototype.render = function () {\r\n        var _this = this;\r\n        this.action.render();\r\n        if (this.action.renderedElement) {\r\n            this.action.renderedElement.onclick = function (e) {\r\n                e.preventDefault();\r\n                e.cancelBubble = true;\r\n                _this.click();\r\n            };\r\n            this.updateCssStyle();\r\n        }\r\n    };\r\n    ActionButton.prototype.click = function () {\r\n        if (this.onClick !== undefined) {\r\n            this.onClick(this);\r\n        }\r\n    };\r\n    Object.defineProperty(ActionButton.prototype, \"state\", {\r\n        get: function () {\r\n            return this._state;\r\n        },\r\n        set: function (value) {\r\n            this._state = value;\r\n            this.updateCssStyle();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ActionButton;\r\n}());\r\nvar Action = /** @class */ (function (_super) {\r\n    __extends(Action, _super);\r\n    function Action() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.style = Enums.ActionStyle.Default;\r\n        return _this;\r\n    }\r\n    Action.prototype.getDefaultSerializationContext = function () {\r\n        return new SerializationContext();\r\n    };\r\n    Action.prototype.addCssClasses = function (element) {\r\n        // Do nothing in base implementation\r\n    };\r\n    Action.prototype.internalGetReferencedInputs = function () {\r\n        return {};\r\n    };\r\n    Action.prototype.internalPrepareForExecution = function (inputs) {\r\n        // Do nothing in base implementation\r\n    };\r\n    Action.prototype.internalValidateInputs = function (referencedInputs) {\r\n        var result = [];\r\n        if (!this.ignoreInputValidation && referencedInputs) {\r\n            for (var _i = 0, _a = Object.keys(referencedInputs); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                var input = referencedInputs[key];\r\n                if (!input.validateValue()) {\r\n                    result.push(input);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Action.prototype.shouldSerialize = function (context) {\r\n        return context.actionRegistry.findByName(this.getJsonTypeName()) !== undefined;\r\n    };\r\n    Action.prototype.raiseExecuteActionEvent = function () {\r\n        if (this.onExecute) {\r\n            this.onExecute(this);\r\n        }\r\n        raiseExecuteActionEvent(this);\r\n    };\r\n    Action.prototype.getHref = function () {\r\n        return \"\";\r\n    };\r\n    Action.prototype.getAriaRole = function () {\r\n        return \"button\";\r\n    };\r\n    Action.prototype.updateActionButtonCssStyle = function (actionButtonElement, buttonState) {\r\n        if (buttonState === void 0) { buttonState = 0 /* Normal */; }\r\n        // Do nothing in base implementation\r\n    };\r\n    Action.prototype.parse = function (source, context) {\r\n        return _super.prototype.parse.call(this, source, context ? context : new SerializationContext());\r\n    };\r\n    Action.prototype.render = function (baseCssClass) {\r\n        if (baseCssClass === void 0) { baseCssClass = \"ac-pushButton\"; }\r\n        // Cache hostConfig for perf\r\n        var hostConfig = this.hostConfig;\r\n        var buttonElement = document.createElement(\"button\");\r\n        this.addCssClasses(buttonElement);\r\n        if (this.title) {\r\n            buttonElement.setAttribute(\"aria-label\", this.title);\r\n        }\r\n        buttonElement.type = \"button\";\r\n        buttonElement.style.display = \"flex\";\r\n        buttonElement.style.alignItems = \"center\";\r\n        buttonElement.style.justifyContent = \"center\";\r\n        buttonElement.setAttribute(\"role\", this.getAriaRole());\r\n        var titleElement = document.createElement(\"div\");\r\n        titleElement.style.overflow = \"hidden\";\r\n        titleElement.style.textOverflow = \"ellipsis\";\r\n        if (!(hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle || hostConfig.actions.allowTitleToWrap)) {\r\n            titleElement.style.whiteSpace = \"nowrap\";\r\n        }\r\n        if (this.title) {\r\n            titleElement.innerText = this.title;\r\n        }\r\n        if (!this.iconUrl) {\r\n            buttonElement.classList.add(\"noIcon\");\r\n            buttonElement.appendChild(titleElement);\r\n        }\r\n        else {\r\n            var iconElement = document.createElement(\"img\");\r\n            iconElement.src = this.iconUrl;\r\n            iconElement.style.width = hostConfig.actions.iconSize + \"px\";\r\n            iconElement.style.height = hostConfig.actions.iconSize + \"px\";\r\n            iconElement.style.flex = \"0 0 auto\";\r\n            if (hostConfig.actions.iconPlacement == Enums.ActionIconPlacement.AboveTitle) {\r\n                buttonElement.classList.add(\"iconAbove\");\r\n                buttonElement.style.flexDirection = \"column\";\r\n                if (this.title) {\r\n                    iconElement.style.marginBottom = \"6px\";\r\n                }\r\n            }\r\n            else {\r\n                buttonElement.classList.add(\"iconLeft\");\r\n                iconElement.style.maxHeight = \"100%\";\r\n                if (this.title) {\r\n                    iconElement.style.marginRight = \"6px\";\r\n                }\r\n            }\r\n            buttonElement.appendChild(iconElement);\r\n            buttonElement.appendChild(titleElement);\r\n        }\r\n        this._renderedElement = buttonElement;\r\n    };\r\n    Action.prototype.execute = function () {\r\n        if (this._actionCollection) {\r\n            this._actionCollection.actionExecuted(this);\r\n        }\r\n        this.raiseExecuteActionEvent();\r\n    };\r\n    Action.prototype.prepareForExecution = function () {\r\n        var referencedInputs = this.getReferencedInputs();\r\n        var invalidInputs = this.internalValidateInputs(referencedInputs);\r\n        if (invalidInputs.length > 0) {\r\n            invalidInputs[0].focus();\r\n            return false;\r\n        }\r\n        this.internalPrepareForExecution(referencedInputs);\r\n        return true;\r\n    };\r\n    ;\r\n    Action.prototype.remove = function () {\r\n        if (this._actionCollection) {\r\n            return this._actionCollection.removeAction(this);\r\n        }\r\n        return false;\r\n    };\r\n    Action.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        return [];\r\n    };\r\n    Action.prototype.getResourceInformation = function () {\r\n        return this.iconUrl ? [{ url: this.iconUrl, mimeType: \"image\" }] : [];\r\n    };\r\n    Action.prototype.getActionById = function (id) {\r\n        return this.id === id ? this : undefined;\r\n    };\r\n    Action.prototype.getReferencedInputs = function () {\r\n        return this.internalGetReferencedInputs();\r\n    };\r\n    /**\r\n     * Validates the inputs associated with this action.\r\n     *\r\n     * @returns A list of inputs that failed validation, or an empty array if no input failed validation.\r\n     */\r\n    Action.prototype.validateInputs = function () {\r\n        return this.internalValidateInputs(this.getReferencedInputs());\r\n    };\r\n    Object.defineProperty(Action.prototype, \"isPrimary\", {\r\n        get: function () {\r\n            return this.style == Enums.ActionStyle.Positive;\r\n        },\r\n        set: function (value) {\r\n            if (value) {\r\n                this.style = Enums.ActionStyle.Positive;\r\n            }\r\n            else {\r\n                if (this.style == Enums.ActionStyle.Positive) {\r\n                    this.style = Enums.ActionStyle.Default;\r\n                }\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Action.prototype, \"ignoreInputValidation\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Action.prototype, \"hostConfig\", {\r\n        get: function () {\r\n            return this.parent ? this.parent.hostConfig : host_config_1.defaultHostConfig;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Action.prototype, \"parent\", {\r\n        get: function () {\r\n            return this._parent;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Action.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\r\n    Action.iconUrlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"iconUrl\");\r\n    Action.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_2, \"style\", [\r\n        { value: Enums.ActionStyle.Default },\r\n        { value: Enums.ActionStyle.Positive },\r\n        { value: Enums.ActionStyle.Destructive }\r\n    ], Enums.ActionStyle.Default);\r\n    // TODO: Revise this when finalizing input validation\r\n    Action.ignoreInputValidationProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, \"ignoreInputValidation\", false);\r\n    __decorate([\r\n        serialization_1.property(Action.titleProperty)\r\n    ], Action.prototype, \"title\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Action.iconUrlProperty)\r\n    ], Action.prototype, \"iconUrl\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Action.styleProperty)\r\n    ], Action.prototype, \"style\", void 0);\r\n    return Action;\r\n}(card_object_1.CardObject));\r\nexports.Action = Action;\r\nvar SubmitAction = /** @class */ (function (_super) {\r\n    __extends(SubmitAction, _super);\r\n    function SubmitAction() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._ignoreInputValidation = false;\r\n        _this._isPrepared = false;\r\n        return _this;\r\n    }\r\n    SubmitAction.prototype.internalGetReferencedInputs = function () {\r\n        var result = {};\r\n        var current = this.parent;\r\n        var inputs = [];\r\n        while (current) {\r\n            inputs = inputs.concat(current.getAllInputs(false));\r\n            current = current.parent;\r\n        }\r\n        for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\r\n            var input = inputs_1[_i];\r\n            if (input.id) {\r\n                result[input.id] = input;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    SubmitAction.prototype.internalPrepareForExecution = function (inputs) {\r\n        if (this._originalData) {\r\n            this._processedData = JSON.parse(JSON.stringify(this._originalData));\r\n        }\r\n        else {\r\n            this._processedData = {};\r\n        }\r\n        if (this._processedData && inputs) {\r\n            for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                var input = inputs[key];\r\n                if (input.id) {\r\n                    this._processedData[input.id] = input.value;\r\n                }\r\n            }\r\n        }\r\n        this._isPrepared = true;\r\n    };\r\n    SubmitAction.prototype.getJsonTypeName = function () {\r\n        return SubmitAction.JsonTypeName;\r\n    };\r\n    Object.defineProperty(SubmitAction.prototype, \"ignoreInputValidation\", {\r\n        get: function () {\r\n            return this._ignoreInputValidation;\r\n        },\r\n        set: function (value) {\r\n            this._ignoreInputValidation = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SubmitAction.prototype, \"data\", {\r\n        get: function () {\r\n            return this._isPrepared ? this._processedData : this._originalData;\r\n        },\r\n        set: function (value) {\r\n            this._originalData = value;\r\n            this._isPrepared = false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    SubmitAction.dataProperty = new serialization_1.PropertyDefinition(serialization_1.Versions.v1_0, \"data\");\r\n    //#endregion\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    SubmitAction.JsonTypeName = \"Action.Submit\";\r\n    __decorate([\r\n        serialization_1.property(SubmitAction.dataProperty)\r\n    ], SubmitAction.prototype, \"_originalData\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Action.ignoreInputValidationProperty)\r\n    ], SubmitAction.prototype, \"_ignoreInputValidation\", void 0);\r\n    return SubmitAction;\r\n}(Action));\r\nexports.SubmitAction = SubmitAction;\r\nvar OpenUrlAction = /** @class */ (function (_super) {\r\n    __extends(OpenUrlAction, _super);\r\n    function OpenUrlAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OpenUrlAction.prototype.getJsonTypeName = function () {\r\n        return OpenUrlAction.JsonTypeName;\r\n    };\r\n    OpenUrlAction.prototype.getAriaRole = function () {\r\n        return \"link\";\r\n    };\r\n    OpenUrlAction.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (!this.url) {\r\n            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet(\"url\"));\r\n        }\r\n    };\r\n    OpenUrlAction.prototype.getHref = function () {\r\n        return this.url;\r\n    };\r\n    //#region Schema\r\n    OpenUrlAction.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"url\");\r\n    //#endregion\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    OpenUrlAction.JsonTypeName = \"Action.OpenUrl\";\r\n    __decorate([\r\n        serialization_1.property(OpenUrlAction.urlProperty)\r\n    ], OpenUrlAction.prototype, \"url\", void 0);\r\n    return OpenUrlAction;\r\n}(Action));\r\nexports.OpenUrlAction = OpenUrlAction;\r\nvar ToggleVisibilityAction = /** @class */ (function (_super) {\r\n    __extends(ToggleVisibilityAction, _super);\r\n    function ToggleVisibilityAction() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.targetElements = {};\r\n        return _this;\r\n    }\r\n    ToggleVisibilityAction.prototype.updateAriaControlsAttribute = function () {\r\n        // apply aria labels to make it clear which elements this action will toggle\r\n        if (this.targetElements) {\r\n            var elementIds = Object.keys(this.targetElements);\r\n            if (this._renderedElement) {\r\n                if (elementIds.length > 0) {\r\n                    this._renderedElement.setAttribute(\"aria-controls\", elementIds.join(\" \"));\r\n                }\r\n                else {\r\n                    this._renderedElement.removeAttribute(\"aria-controls\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ToggleVisibilityAction.prototype.getJsonTypeName = function () {\r\n        return ToggleVisibilityAction.JsonTypeName;\r\n    };\r\n    ToggleVisibilityAction.prototype.render = function (baseCssClass) {\r\n        if (baseCssClass === void 0) { baseCssClass = \"ac-pushButton\"; }\r\n        _super.prototype.render.call(this, baseCssClass);\r\n        this.updateAriaControlsAttribute();\r\n    };\r\n    ToggleVisibilityAction.prototype.execute = function () {\r\n        if (this.parent) {\r\n            for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {\r\n                var elementId = _a[_i];\r\n                var targetElement = this.parent.getRootElement().getElementById(elementId);\r\n                if (targetElement) {\r\n                    if (typeof this.targetElements[elementId] === \"boolean\") {\r\n                        targetElement.isVisible = this.targetElements[elementId];\r\n                    }\r\n                    else {\r\n                        targetElement.isVisible = !targetElement.isVisible;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ToggleVisibilityAction.prototype.addTargetElement = function (elementId, isVisible) {\r\n        if (isVisible === void 0) { isVisible = undefined; }\r\n        this.targetElements[elementId] = isVisible;\r\n        this.updateAriaControlsAttribute();\r\n    };\r\n    ToggleVisibilityAction.prototype.removeTargetElement = function (elementId) {\r\n        delete this.targetElements[elementId];\r\n        this.updateAriaControlsAttribute();\r\n    };\r\n    ToggleVisibilityAction.targetElementsProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_2, \"targetElements\", function (sender, property, source, context) {\r\n        var result = {};\r\n        if (Array.isArray(source[property.name])) {\r\n            for (var _i = 0, _a = source[property.name]; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                if (typeof item === \"string\") {\r\n                    result[item] = undefined;\r\n                }\r\n                else if (typeof item === \"object\") {\r\n                    var elementId = item[\"elementId\"];\r\n                    if (typeof elementId === \"string\") {\r\n                        result[elementId] = Utils.parseBool(item[\"isVisible\"]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }, function (sender, property, target, value, context) {\r\n        var targetElements = [];\r\n        for (var _i = 0, _a = Object.keys(value); _i < _a.length; _i++) {\r\n            var id = _a[_i];\r\n            if (typeof value[id] === \"boolean\") {\r\n                targetElements.push({\r\n                    elementId: id,\r\n                    isVisible: value[id]\r\n                });\r\n            }\r\n            else {\r\n                targetElements.push(id);\r\n            }\r\n        }\r\n        context.serializeArray(target, property.name, targetElements);\r\n    }, {}, function (sender) { return {}; });\r\n    //#endregion\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    ToggleVisibilityAction.JsonTypeName = \"Action.ToggleVisibility\";\r\n    __decorate([\r\n        serialization_1.property(ToggleVisibilityAction.targetElementsProperty)\r\n    ], ToggleVisibilityAction.prototype, \"targetElements\", void 0);\r\n    return ToggleVisibilityAction;\r\n}(Action));\r\nexports.ToggleVisibilityAction = ToggleVisibilityAction;\r\nvar StringWithSubstitutionProperty = /** @class */ (function (_super) {\r\n    __extends(StringWithSubstitutionProperty, _super);\r\n    function StringWithSubstitutionProperty(targetVersion, name) {\r\n        var _this = _super.call(this, targetVersion, name, undefined, function () { return new shared_1.StringWithSubstitutions(); }) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        return _this;\r\n    }\r\n    StringWithSubstitutionProperty.prototype.parse = function (sender, source, context) {\r\n        var result = new shared_1.StringWithSubstitutions();\r\n        result.set(Utils.parseString(source[this.name]));\r\n        return result;\r\n    };\r\n    StringWithSubstitutionProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeValue(target, this.name, value.getOriginal());\r\n    };\r\n    return StringWithSubstitutionProperty;\r\n}(serialization_1.PropertyDefinition));\r\nvar HttpHeader = /** @class */ (function (_super) {\r\n    __extends(HttpHeader, _super);\r\n    //#endregion\r\n    function HttpHeader(name, value) {\r\n        if (name === void 0) { name = \"\"; }\r\n        if (value === void 0) { value = \"\"; }\r\n        var _this = _super.call(this) || this;\r\n        _this.name = name;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    HttpHeader.prototype.getSchemaKey = function () {\r\n        return \"HttpHeader\";\r\n    };\r\n    HttpHeader.prototype.getReferencedInputs = function (inputs, referencedInputs) {\r\n        this._value.getReferencedInputs(inputs, referencedInputs);\r\n    };\r\n    HttpHeader.prototype.prepareForExecution = function (inputs) {\r\n        this._value.substituteInputValues(inputs, shared_1.ContentTypes.applicationXWwwFormUrlencoded);\r\n    };\r\n    Object.defineProperty(HttpHeader.prototype, \"value\", {\r\n        get: function () {\r\n            return this._value.get();\r\n        },\r\n        set: function (newValue) {\r\n            this._value.set(newValue);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    HttpHeader.nameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"name\");\r\n    HttpHeader.valueProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, \"value\");\r\n    __decorate([\r\n        serialization_1.property(HttpHeader.nameProperty)\r\n    ], HttpHeader.prototype, \"name\", void 0);\r\n    __decorate([\r\n        serialization_1.property(HttpHeader.valueProperty)\r\n    ], HttpHeader.prototype, \"_value\", void 0);\r\n    return HttpHeader;\r\n}(serialization_1.SerializableObject));\r\nexports.HttpHeader = HttpHeader;\r\nvar HttpAction = /** @class */ (function (_super) {\r\n    __extends(HttpAction, _super);\r\n    function HttpAction() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._ignoreInputValidation = false;\r\n        return _this;\r\n    }\r\n    HttpAction.prototype.populateSchema = function (schema) {\r\n        _super.prototype.populateSchema.call(this, schema);\r\n        schema.add(Action.ignoreInputValidationProperty);\r\n    };\r\n    HttpAction.prototype.internalGetReferencedInputs = function () {\r\n        var allInputs = this.parent ? this.parent.getRootElement().getAllInputs() : [];\r\n        var result = {};\r\n        this._url.getReferencedInputs(allInputs, result);\r\n        for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\r\n            var header = _a[_i];\r\n            header.getReferencedInputs(allInputs, result);\r\n        }\r\n        this._body.getReferencedInputs(allInputs, result);\r\n        return result;\r\n    };\r\n    HttpAction.prototype.internalPrepareForExecution = function (inputs) {\r\n        if (inputs) {\r\n            this._url.substituteInputValues(inputs, shared_1.ContentTypes.applicationXWwwFormUrlencoded);\r\n            var contentType = shared_1.ContentTypes.applicationJson;\r\n            for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\r\n                var header = _a[_i];\r\n                header.prepareForExecution(inputs);\r\n                if (header.name && header.name.toLowerCase() == \"content-type\") {\r\n                    contentType = header.value;\r\n                }\r\n            }\r\n            this._body.substituteInputValues(inputs, contentType);\r\n        }\r\n    };\r\n    ;\r\n    HttpAction.prototype.getJsonTypeName = function () {\r\n        return HttpAction.JsonTypeName;\r\n    };\r\n    HttpAction.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (!this.url) {\r\n            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet(\"url\"));\r\n        }\r\n        if (this.headers.length > 0) {\r\n            for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\r\n                var header = _a[_i];\r\n                if (!header.name) {\r\n                    context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.actionHttpHeadersMustHaveNameAndValue());\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(HttpAction.prototype, \"ignoreInputValidation\", {\r\n        get: function () {\r\n            return this._ignoreInputValidation;\r\n        },\r\n        set: function (value) {\r\n            this._ignoreInputValidation = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HttpAction.prototype, \"url\", {\r\n        get: function () {\r\n            return this._url.get();\r\n        },\r\n        set: function (value) {\r\n            this._url.set(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HttpAction.prototype, \"body\", {\r\n        get: function () {\r\n            return this._body.get();\r\n        },\r\n        set: function (value) {\r\n            this._body.set(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    HttpAction.urlProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, \"url\");\r\n    HttpAction.bodyProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, \"body\");\r\n    HttpAction.methodProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"method\");\r\n    HttpAction.headersProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"headers\", HttpHeader);\r\n    //#endregion\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    HttpAction.JsonTypeName = \"Action.Http\";\r\n    __decorate([\r\n        serialization_1.property(HttpAction.urlProperty)\r\n    ], HttpAction.prototype, \"_url\", void 0);\r\n    __decorate([\r\n        serialization_1.property(HttpAction.bodyProperty)\r\n    ], HttpAction.prototype, \"_body\", void 0);\r\n    __decorate([\r\n        serialization_1.property(HttpAction.methodProperty)\r\n    ], HttpAction.prototype, \"method\", void 0);\r\n    __decorate([\r\n        serialization_1.property(HttpAction.headersProperty)\r\n    ], HttpAction.prototype, \"headers\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Action.ignoreInputValidationProperty)\r\n    ], HttpAction.prototype, \"_ignoreInputValidation\", void 0);\r\n    return HttpAction;\r\n}(Action));\r\nexports.HttpAction = HttpAction;\r\nvar ShowCardAction = /** @class */ (function (_super) {\r\n    __extends(ShowCardAction, _super);\r\n    function ShowCardAction() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.card = new InlineAdaptiveCard();\r\n        return _this;\r\n    }\r\n    ShowCardAction.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        var jsonCard = source[\"card\"];\r\n        if (jsonCard) {\r\n            this.card.parse(jsonCard, context);\r\n        }\r\n        else {\r\n            context.logParseEvent(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.showCardMustHaveCard());\r\n        }\r\n    };\r\n    ShowCardAction.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        if (this.card) {\r\n            context.serializeValue(target, \"card\", this.card.toJSON(context));\r\n        }\r\n    };\r\n    ShowCardAction.prototype.addCssClasses = function (element) {\r\n        _super.prototype.addCssClasses.call(this, element);\r\n        if (this.parent) {\r\n            element.classList.add(this.parent.hostConfig.makeCssClassName(\"expandable\"));\r\n        }\r\n    };\r\n    ShowCardAction.prototype.raiseExecuteActionEvent = function () {\r\n        if (this.hostConfig.actions.showCard.actionMode === Enums.ShowCardActionMode.Popup) {\r\n            // Only raise the event in Popup mode.\r\n            _super.prototype.raiseExecuteActionEvent.call(this);\r\n        }\r\n    };\r\n    ShowCardAction.prototype.getJsonTypeName = function () {\r\n        return ShowCardAction.JsonTypeName;\r\n    };\r\n    ShowCardAction.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        this.card.internalValidateProperties(context);\r\n    };\r\n    ShowCardAction.prototype.updateActionButtonCssStyle = function (actionButtonElement, buttonState) {\r\n        if (buttonState === void 0) { buttonState = 0 /* Normal */; }\r\n        _super.prototype.updateActionButtonCssStyle.call(this, actionButtonElement);\r\n        if (this.parent) {\r\n            actionButtonElement.classList.add(this.parent.hostConfig.makeCssClassName(\"expandable\"));\r\n            actionButtonElement.setAttribute(\"aria-expanded\", (buttonState === 1 /* Expanded */).toString());\r\n        }\r\n    };\r\n    ShowCardAction.prototype.setParent = function (value) {\r\n        _super.prototype.setParent.call(this, value);\r\n        this.card.setParent(value);\r\n    };\r\n    ShowCardAction.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        return this.card.getAllInputs(processActions);\r\n    };\r\n    ShowCardAction.prototype.getResourceInformation = function () {\r\n        return _super.prototype.getResourceInformation.call(this).concat(this.card.getResourceInformation());\r\n    };\r\n    ShowCardAction.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result) {\r\n            result = this.card.getActionById(id);\r\n        }\r\n        return result;\r\n    };\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    ShowCardAction.JsonTypeName = \"Action.ShowCard\";\r\n    return ShowCardAction;\r\n}(Action));\r\nexports.ShowCardAction = ShowCardAction;\r\nvar ActionCollection = /** @class */ (function () {\r\n    function ActionCollection(owner) {\r\n        this._renderedActionCount = 0;\r\n        this.items = [];\r\n        this.buttons = [];\r\n        this._owner = owner;\r\n    }\r\n    ActionCollection.prototype.isActionAllowed = function (action) {\r\n        var forbiddenTypes = this._owner.getForbiddenActionTypes();\r\n        if (forbiddenTypes) {\r\n            for (var _i = 0, forbiddenTypes_1 = forbiddenTypes; _i < forbiddenTypes_1.length; _i++) {\r\n                var forbiddenType = forbiddenTypes_1[_i];\r\n                if (action.constructor === forbiddenType) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    ActionCollection.prototype.refreshContainer = function () {\r\n        this._actionCardContainer.innerHTML = \"\";\r\n        if (!this._actionCard) {\r\n            this._actionCardContainer.style.marginTop = \"0px\";\r\n            return;\r\n        }\r\n        this._actionCardContainer.style.marginTop = this._renderedActionCount > 0 ? this._owner.hostConfig.actions.showCard.inlineTopMargin + \"px\" : \"0px\";\r\n        var padding = this._owner.getEffectivePadding();\r\n        this._owner.getImmediateSurroundingPadding(padding);\r\n        var physicalPadding = this._owner.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n        if (this._actionCard) {\r\n            this._actionCard.style.paddingLeft = physicalPadding.left + \"px\";\r\n            this._actionCard.style.paddingRight = physicalPadding.right + \"px\";\r\n            this._actionCard.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\r\n            this._actionCard.style.marginRight = \"-\" + physicalPadding.right + \"px\";\r\n            if (physicalPadding.bottom != 0 && !this._owner.isDesignMode()) {\r\n                this._actionCard.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n                this._actionCard.style.marginBottom = \"-\" + physicalPadding.bottom + \"px\";\r\n            }\r\n            Utils.appendChild(this._actionCardContainer, this._actionCard);\r\n        }\r\n    };\r\n    ActionCollection.prototype.layoutChanged = function () {\r\n        this._owner.getRootElement().updateLayout();\r\n    };\r\n    ActionCollection.prototype.showActionCard = function (action, suppressStyle, raiseEvent) {\r\n        if (suppressStyle === void 0) { suppressStyle = false; }\r\n        if (raiseEvent === void 0) { raiseEvent = true; }\r\n        action.card.suppressStyle = suppressStyle;\r\n        // Always re-render a ShowCard action in design mode; reuse already rendered ShowCard (if available) otherwise\r\n        var renderedCard = action.card.renderedElement && !this._owner.isDesignMode() ? action.card.renderedElement : action.card.render();\r\n        this._actionCard = renderedCard;\r\n        this._expandedAction = action;\r\n        this.refreshContainer();\r\n        if (raiseEvent) {\r\n            this.layoutChanged();\r\n            raiseInlineCardExpandedEvent(action, true);\r\n        }\r\n    };\r\n    ActionCollection.prototype.collapseExpandedAction = function () {\r\n        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\r\n            var button = _a[_i];\r\n            button.state = 0 /* Normal */;\r\n        }\r\n        var previouslyExpandedAction = this._expandedAction;\r\n        this._expandedAction = undefined;\r\n        this._actionCard = undefined;\r\n        this.refreshContainer();\r\n        if (previouslyExpandedAction) {\r\n            this.layoutChanged();\r\n            raiseInlineCardExpandedEvent(previouslyExpandedAction, false);\r\n        }\r\n    };\r\n    ActionCollection.prototype.expandShowCardAction = function (action, raiseEvent) {\r\n        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\r\n            var button = _a[_i];\r\n            if (button.action !== action) {\r\n                button.state = 2 /* Subdued */;\r\n            }\r\n            else {\r\n                button.state = 1 /* Expanded */;\r\n            }\r\n        }\r\n        this.showActionCard(action, !(this._owner.isAtTheVeryLeft() && this._owner.isAtTheVeryRight()), raiseEvent);\r\n    };\r\n    ActionCollection.prototype.getParentContainer = function () {\r\n        if (this._owner instanceof Container) {\r\n            return this._owner;\r\n        }\r\n        else {\r\n            return this._owner.getParentContainer();\r\n        }\r\n    };\r\n    ActionCollection.prototype.findActionButton = function (action) {\r\n        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\r\n            var actionButton = _a[_i];\r\n            if (actionButton.action == action) {\r\n                return actionButton;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    ActionCollection.prototype.actionExecuted = function (action) {\r\n        if (!(action instanceof ShowCardAction)) {\r\n            this.collapseExpandedAction();\r\n        }\r\n        else {\r\n            if (action === this._expandedAction) {\r\n                this.collapseExpandedAction();\r\n            }\r\n            else {\r\n                this.expandShowCardAction(action, true);\r\n            }\r\n        }\r\n    };\r\n    ActionCollection.prototype.parse = function (source, context) {\r\n        this.clear();\r\n        if (Array.isArray(source)) {\r\n            for (var _i = 0, source_1 = source; _i < source_1.length; _i++) {\r\n                var jsonAction = source_1[_i];\r\n                var action = context.parseAction(this._owner, jsonAction, [], !this._owner.isDesignMode());\r\n                if (action) {\r\n                    this.addAction(action);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ActionCollection.prototype.toJSON = function (target, propertyName, context) {\r\n        context.serializeArray(target, propertyName, this.items);\r\n    };\r\n    ActionCollection.prototype.getActionById = function (id) {\r\n        var result = undefined;\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            result = item.getActionById(id);\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    ActionCollection.prototype.validateProperties = function (context) {\r\n        if (this._owner.hostConfig.actions.maxActions && this.items.length > this._owner.hostConfig.actions.maxActions) {\r\n            context.addFailure(this._owner, Enums.ValidationEvent.TooManyActions, strings_1.Strings.errors.tooManyActions(this._owner.hostConfig.actions.maxActions));\r\n        }\r\n        if (this.items.length > 0 && !this._owner.hostConfig.supportsInteractivity) {\r\n            context.addFailure(this._owner, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.interactivityNotAllowed());\r\n        }\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (!this.isActionAllowed(item)) {\r\n                context.addFailure(this._owner, Enums.ValidationEvent.ActionTypeNotAllowed, strings_1.Strings.errors.actionTypeNotAllowed(item.getJsonTypeName()));\r\n            }\r\n            item.internalValidateProperties(context);\r\n        }\r\n    };\r\n    ActionCollection.prototype.render = function (orientation, isDesignMode) {\r\n        // Cache hostConfig for better perf\r\n        var hostConfig = this._owner.hostConfig;\r\n        if (!hostConfig.supportsInteractivity) {\r\n            return undefined;\r\n        }\r\n        var element = document.createElement(\"div\");\r\n        var maxActions = hostConfig.actions.maxActions ? Math.min(hostConfig.actions.maxActions, this.items.length) : this.items.length;\r\n        this._actionCardContainer = document.createElement(\"div\");\r\n        this._renderedActionCount = 0;\r\n        if (hostConfig.actions.preExpandSingleShowCardAction && maxActions == 1 && this.items[0] instanceof ShowCardAction && this.isActionAllowed(this.items[0])) {\r\n            this.showActionCard(this.items[0], true);\r\n            this._renderedActionCount = 1;\r\n        }\r\n        else {\r\n            var buttonStrip = document.createElement(\"div\");\r\n            buttonStrip.className = hostConfig.makeCssClassName(\"ac-actionSet\");\r\n            buttonStrip.style.display = \"flex\";\r\n            buttonStrip.setAttribute(\"role\", \"menubar\");\r\n            if (orientation == Enums.Orientation.Horizontal) {\r\n                buttonStrip.style.flexDirection = \"row\";\r\n                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\r\n                    switch (this._owner.horizontalAlignment) {\r\n                        case Enums.HorizontalAlignment.Center:\r\n                            buttonStrip.style.justifyContent = \"center\";\r\n                            break;\r\n                        case Enums.HorizontalAlignment.Right:\r\n                            buttonStrip.style.justifyContent = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.justifyContent = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n                else {\r\n                    switch (hostConfig.actions.actionAlignment) {\r\n                        case Enums.ActionAlignment.Center:\r\n                            buttonStrip.style.justifyContent = \"center\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Right:\r\n                            buttonStrip.style.justifyContent = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.justifyContent = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                buttonStrip.style.flexDirection = \"column\";\r\n                if (this._owner.horizontalAlignment && hostConfig.actions.actionAlignment != Enums.ActionAlignment.Stretch) {\r\n                    switch (this._owner.horizontalAlignment) {\r\n                        case Enums.HorizontalAlignment.Center:\r\n                            buttonStrip.style.alignItems = \"center\";\r\n                            break;\r\n                        case Enums.HorizontalAlignment.Right:\r\n                            buttonStrip.style.alignItems = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.alignItems = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n                else {\r\n                    switch (hostConfig.actions.actionAlignment) {\r\n                        case Enums.ActionAlignment.Center:\r\n                            buttonStrip.style.alignItems = \"center\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Right:\r\n                            buttonStrip.style.alignItems = \"flex-end\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Stretch:\r\n                            buttonStrip.style.alignItems = \"stretch\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.alignItems = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            var parentContainer = this.getParentContainer();\r\n            if (parentContainer) {\r\n                var parentContainerStyle = parentContainer.getEffectiveStyle();\r\n                var allowedActions = this.items.filter(this.isActionAllowed.bind(this));\r\n                for (var i = 0; i < allowedActions.length; i++) {\r\n                    var actionButton = this.findActionButton(allowedActions[i]);\r\n                    if (!actionButton) {\r\n                        actionButton = new ActionButton(allowedActions[i], parentContainerStyle);\r\n                        actionButton.onClick = function (ab) { ab.action.execute(); };\r\n                        this.buttons.push(actionButton);\r\n                    }\r\n                    actionButton.render();\r\n                    if (actionButton.action.renderedElement) {\r\n                        actionButton.action.renderedElement.setAttribute(\"aria-posinset\", (i + 1).toString());\r\n                        actionButton.action.renderedElement.setAttribute(\"aria-setsize\", allowedActions.length.toString());\r\n                        actionButton.action.renderedElement.setAttribute(\"role\", \"menuitem\");\r\n                        if (hostConfig.actions.actionsOrientation == Enums.Orientation.Horizontal && hostConfig.actions.actionAlignment == Enums.ActionAlignment.Stretch) {\r\n                            actionButton.action.renderedElement.style.flex = \"0 1 100%\";\r\n                        }\r\n                        else {\r\n                            actionButton.action.renderedElement.style.flex = \"0 1 auto\";\r\n                        }\r\n                        buttonStrip.appendChild(actionButton.action.renderedElement);\r\n                        this._renderedActionCount++;\r\n                        if (this._renderedActionCount >= hostConfig.actions.maxActions || i == this.items.length - 1) {\r\n                            break;\r\n                        }\r\n                        else if (hostConfig.actions.buttonSpacing > 0) {\r\n                            var spacer = document.createElement(\"div\");\r\n                            if (orientation === Enums.Orientation.Horizontal) {\r\n                                spacer.style.flex = \"0 0 auto\";\r\n                                spacer.style.width = hostConfig.actions.buttonSpacing + \"px\";\r\n                            }\r\n                            else {\r\n                                spacer.style.height = hostConfig.actions.buttonSpacing + \"px\";\r\n                            }\r\n                            Utils.appendChild(buttonStrip, spacer);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            var buttonStripContainer = document.createElement(\"div\");\r\n            buttonStripContainer.style.overflow = \"hidden\";\r\n            buttonStripContainer.appendChild(buttonStrip);\r\n            Utils.appendChild(element, buttonStripContainer);\r\n        }\r\n        Utils.appendChild(element, this._actionCardContainer);\r\n        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\r\n            var button = _a[_i];\r\n            if (button.state == 1 /* Expanded */) {\r\n                this.expandShowCardAction(button.action, false);\r\n                break;\r\n            }\r\n        }\r\n        return this._renderedActionCount > 0 ? element : undefined;\r\n    };\r\n    ActionCollection.prototype.addAction = function (action) {\r\n        if (!action) {\r\n            throw new Error(\"The action parameter cannot be null.\");\r\n        }\r\n        if ((!action.parent || action.parent === this._owner) && this.items.indexOf(action) < 0) {\r\n            this.items.push(action);\r\n            if (!action.parent) {\r\n                action.setParent(this._owner);\r\n            }\r\n            action[\"_actionCollection\"] = this;\r\n        }\r\n        else {\r\n            throw new Error(strings_1.Strings.errors.actionAlreadyParented());\r\n        }\r\n    };\r\n    ActionCollection.prototype.removeAction = function (action) {\r\n        if (this.expandedAction && this._expandedAction == action) {\r\n            this.collapseExpandedAction();\r\n        }\r\n        var actionIndex = this.items.indexOf(action);\r\n        if (actionIndex >= 0) {\r\n            this.items.splice(actionIndex, 1);\r\n            action.setParent(undefined);\r\n            action[\"_actionCollection\"] = undefined;\r\n            for (var i = 0; i < this.buttons.length; i++) {\r\n                if (this.buttons[i].action == action) {\r\n                    this.buttons.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ActionCollection.prototype.clear = function () {\r\n        this.items = [];\r\n        this.buttons = [];\r\n        this._expandedAction = undefined;\r\n        this._renderedActionCount = 0;\r\n    };\r\n    ActionCollection.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        var result = [];\r\n        if (processActions) {\r\n            for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n                var action = _a[_i];\r\n                result = result.concat(action.getAllInputs());\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    ActionCollection.prototype.getResourceInformation = function () {\r\n        var result = [];\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var action = _a[_i];\r\n            result = result.concat(action.getResourceInformation());\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(ActionCollection.prototype, \"renderedActionCount\", {\r\n        get: function () {\r\n            return this._renderedActionCount;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActionCollection.prototype, \"expandedAction\", {\r\n        get: function () {\r\n            return this._expandedAction;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ActionCollection;\r\n}());\r\nvar ActionSet = /** @class */ (function (_super) {\r\n    __extends(ActionSet, _super);\r\n    function ActionSet() {\r\n        var _this = _super.call(this) || this;\r\n        _this._actionCollection = new ActionCollection(_this);\r\n        return _this;\r\n    }\r\n    ActionSet.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this._actionCollection.parse(source[\"actions\"], context);\r\n    };\r\n    ActionSet.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        this._actionCollection.toJSON(target, \"actions\", context);\r\n    };\r\n    ActionSet.prototype.internalRender = function () {\r\n        return this._actionCollection.render(this.orientation !== undefined ? this.orientation : this.hostConfig.actions.actionsOrientation, this.isDesignMode());\r\n    };\r\n    ActionSet.prototype.isBleedingAtBottom = function () {\r\n        if (this._actionCollection.renderedActionCount == 0) {\r\n            return _super.prototype.isBleedingAtBottom.call(this);\r\n        }\r\n        else {\r\n            if (this._actionCollection.items.length == 1) {\r\n                return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;\r\n            }\r\n            else {\r\n                return this._actionCollection.expandedAction !== undefined;\r\n            }\r\n        }\r\n    };\r\n    ActionSet.prototype.getJsonTypeName = function () {\r\n        return \"ActionSet\";\r\n    };\r\n    ActionSet.prototype.getActionCount = function () {\r\n        return this._actionCollection.items.length;\r\n    };\r\n    ActionSet.prototype.getActionAt = function (index) {\r\n        if (index >= 0 && index < this.getActionCount()) {\r\n            return this._actionCollection.items[index];\r\n        }\r\n        else {\r\n            return _super.prototype.getActionAt.call(this, index);\r\n        }\r\n    };\r\n    ActionSet.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        this._actionCollection.validateProperties(context);\r\n    };\r\n    ActionSet.prototype.addAction = function (action) {\r\n        this._actionCollection.addAction(action);\r\n    };\r\n    ActionSet.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        return processActions ? this._actionCollection.getAllInputs() : [];\r\n    };\r\n    ActionSet.prototype.getResourceInformation = function () {\r\n        return this._actionCollection.getResourceInformation();\r\n    };\r\n    Object.defineProperty(ActionSet.prototype, \"isInteractive\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    ActionSet.orientationProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_1, \"orientation\", Enums.Orientation);\r\n    __decorate([\r\n        serialization_1.property(ActionSet.orientationProperty)\r\n    ], ActionSet.prototype, \"orientation\", void 0);\r\n    return ActionSet;\r\n}(CardElement));\r\nexports.ActionSet = ActionSet;\r\nvar StylableCardElementContainer = /** @class */ (function (_super) {\r\n    __extends(StylableCardElementContainer, _super);\r\n    function StylableCardElementContainer() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._bleed = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"style\", {\r\n        get: function () {\r\n            if (this.allowCustomStyle) {\r\n                var style = this.getValue(StylableCardElementContainer.styleProperty);\r\n                if (style && this.hostConfig.containerStyles.getStyleByName(style)) {\r\n                    return style;\r\n                }\r\n            }\r\n            return undefined;\r\n        },\r\n        set: function (value) {\r\n            this.setValue(StylableCardElementContainer.styleProperty, value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#endregion\r\n    StylableCardElementContainer.prototype.adjustRenderedElementSize = function (renderedElement) {\r\n        _super.prototype.adjustRenderedElementSize.call(this, renderedElement);\r\n        if (this.minPixelHeight) {\r\n            renderedElement.style.minHeight = this.minPixelHeight + \"px\";\r\n        }\r\n    };\r\n    StylableCardElementContainer.prototype.applyBackground = function () {\r\n        if (this.renderedElement) {\r\n            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.style, this.hostConfig.containerStyles.getStyleByName(this.defaultStyle));\r\n            if (styleDefinition.backgroundColor) {\r\n                var bgColor = Utils.stringToCssColor(styleDefinition.backgroundColor);\r\n                this.renderedElement.style.backgroundColor = bgColor;\r\n                this.renderedElement.style.border = \"1px solid \" + bgColor;\r\n            }\r\n        }\r\n    };\r\n    StylableCardElementContainer.prototype.applyPadding = function () {\r\n        _super.prototype.applyPadding.call(this);\r\n        if (!this.renderedElement) {\r\n            return;\r\n        }\r\n        var physicalPadding = new shared_1.SpacingDefinition();\r\n        if (this.getEffectivePadding()) {\r\n            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\r\n        }\r\n        this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\r\n        this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\r\n        this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n        this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\r\n        if (this.isBleeding()) {\r\n            // Bleed into the first parent that does have padding\r\n            var padding = new shared_1.PaddingDefinition();\r\n            this.getImmediateSurroundingPadding(padding);\r\n            var surroundingPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n            this.renderedElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\r\n            this.renderedElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\r\n            if (!this.isDesignMode()) {\r\n                this.renderedElement.style.marginTop = \"-\" + surroundingPadding.top + \"px\";\r\n                this.renderedElement.style.marginBottom = \"-\" + surroundingPadding.bottom + \"px\";\r\n            }\r\n            if (this.separatorElement && this.separatorOrientation == Enums.Orientation.Horizontal) {\r\n                this.separatorElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\r\n                this.separatorElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\r\n            }\r\n        }\r\n        else {\r\n            this.renderedElement.style.marginRight = \"0\";\r\n            this.renderedElement.style.marginLeft = \"0\";\r\n            this.renderedElement.style.marginTop = \"0\";\r\n            this.renderedElement.style.marginBottom = \"0\";\r\n            if (this.separatorElement) {\r\n                this.separatorElement.style.marginRight = \"0\";\r\n                this.separatorElement.style.marginLeft = \"0\";\r\n            }\r\n        }\r\n    };\r\n    StylableCardElementContainer.prototype.getHasBackground = function () {\r\n        var currentElement = this.parent;\r\n        while (currentElement) {\r\n            var currentElementHasBackgroundImage = currentElement instanceof Container ? currentElement.backgroundImage.isValid() : false;\r\n            if (currentElement instanceof StylableCardElementContainer) {\r\n                if (this.hasExplicitStyle && (currentElement.getEffectiveStyle() != this.getEffectiveStyle() || currentElementHasBackgroundImage)) {\r\n                    return true;\r\n                }\r\n            }\r\n            currentElement = currentElement.parent;\r\n        }\r\n        return false;\r\n    };\r\n    StylableCardElementContainer.prototype.getDefaultPadding = function () {\r\n        return this.getHasBackground() ?\r\n            new shared_1.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding) : _super.prototype.getDefaultPadding.call(this);\r\n    };\r\n    StylableCardElementContainer.prototype.getHasExpandedAction = function () {\r\n        return false;\r\n    };\r\n    StylableCardElementContainer.prototype.getBleed = function () {\r\n        return this._bleed;\r\n    };\r\n    StylableCardElementContainer.prototype.setBleed = function (value) {\r\n        this._bleed = value;\r\n    };\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"renderedActionCount\", {\r\n        get: function () {\r\n            return 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"hasExplicitStyle\", {\r\n        get: function () {\r\n            return this.getValue(StylableCardElementContainer.styleProperty) !== undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"allowCustomStyle\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    StylableCardElementContainer.prototype.isBleeding = function () {\r\n        return (this.getHasBackground() || this.hostConfig.alwaysAllowBleed) && this.getBleed();\r\n    };\r\n    StylableCardElementContainer.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        var explicitStyle = this.getValue(StylableCardElementContainer.styleProperty);\r\n        if (explicitStyle !== undefined) {\r\n            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(explicitStyle);\r\n            if (!styleDefinition) {\r\n                context.addFailure(this, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(explicitStyle, \"style\"));\r\n            }\r\n        }\r\n    };\r\n    StylableCardElementContainer.prototype.render = function () {\r\n        var renderedElement = _super.prototype.render.call(this);\r\n        if (renderedElement && this.getHasBackground()) {\r\n            this.applyBackground();\r\n        }\r\n        return renderedElement;\r\n    };\r\n    StylableCardElementContainer.prototype.getEffectiveStyle = function () {\r\n        var effectiveStyle = this.style;\r\n        return effectiveStyle ? effectiveStyle : _super.prototype.getEffectiveStyle.call(this);\r\n    };\r\n    StylableCardElementContainer.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_0, \"style\", [\r\n        { value: Enums.ContainerStyle.Default },\r\n        { value: Enums.ContainerStyle.Emphasis },\r\n        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Accent },\r\n        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Good },\r\n        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Attention },\r\n        { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Warning }\r\n    ]);\r\n    StylableCardElementContainer.bleedProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"bleed\", false);\r\n    StylableCardElementContainer.minHeightProperty = new serialization_1.PixelSizeProperty(serialization_1.Versions.v1_2, \"minHeight\");\r\n    __decorate([\r\n        serialization_1.property(StylableCardElementContainer.styleProperty)\r\n    ], StylableCardElementContainer.prototype, \"style\", null);\r\n    __decorate([\r\n        serialization_1.property(StylableCardElementContainer.bleedProperty)\r\n    ], StylableCardElementContainer.prototype, \"_bleed\", void 0);\r\n    __decorate([\r\n        serialization_1.property(StylableCardElementContainer.minHeightProperty)\r\n    ], StylableCardElementContainer.prototype, \"minPixelHeight\", void 0);\r\n    return StylableCardElementContainer;\r\n}(CardElementContainer));\r\nexports.StylableCardElementContainer = StylableCardElementContainer;\r\nvar BackgroundImage = /** @class */ (function (_super) {\r\n    __extends(BackgroundImage, _super);\r\n    function BackgroundImage() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    //#endregion\r\n    BackgroundImage.prototype.getSchemaKey = function () {\r\n        return \"BackgroundImage\";\r\n    };\r\n    BackgroundImage.prototype.internalParse = function (source, context) {\r\n        if (typeof source === \"string\") {\r\n            this.resetDefaultValues();\r\n            this.url = source;\r\n        }\r\n        else {\r\n            return _super.prototype.internalParse.call(this, source, context);\r\n        }\r\n    };\r\n    BackgroundImage.prototype.apply = function (element) {\r\n        if (this.url && element.renderedElement) {\r\n            element.renderedElement.style.backgroundImage = \"url('\" + element.preProcessPropertyValue(BackgroundImage.urlProperty, this.url) + \"')\";\r\n            switch (this.fillMode) {\r\n                case Enums.FillMode.Repeat:\r\n                    element.renderedElement.style.backgroundRepeat = \"repeat\";\r\n                    break;\r\n                case Enums.FillMode.RepeatHorizontally:\r\n                    element.renderedElement.style.backgroundRepeat = \"repeat-x\";\r\n                    break;\r\n                case Enums.FillMode.RepeatVertically:\r\n                    element.renderedElement.style.backgroundRepeat = \"repeat-y\";\r\n                    break;\r\n                case Enums.FillMode.Cover:\r\n                default:\r\n                    element.renderedElement.style.backgroundRepeat = \"no-repeat\";\r\n                    element.renderedElement.style.backgroundSize = \"cover\";\r\n                    break;\r\n            }\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.renderedElement.style.backgroundPositionX = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.renderedElement.style.backgroundPositionX = \"right\";\r\n                    break;\r\n            }\r\n            switch (this.verticalAlignment) {\r\n                case Enums.VerticalAlignment.Center:\r\n                    element.renderedElement.style.backgroundPositionY = \"center\";\r\n                    break;\r\n                case Enums.VerticalAlignment.Bottom:\r\n                    element.renderedElement.style.backgroundPositionY = \"bottom\";\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    BackgroundImage.prototype.isValid = function () {\r\n        return this.url ? true : false;\r\n    };\r\n    //#region Schema\r\n    BackgroundImage.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"url\");\r\n    BackgroundImage.fillModeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"fillMode\", Enums.FillMode, Enums.FillMode.Cover);\r\n    BackgroundImage.horizontalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"horizontalAlignment\", Enums.HorizontalAlignment, Enums.HorizontalAlignment.Left);\r\n    BackgroundImage.verticalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"verticalAlignment\", Enums.VerticalAlignment, Enums.VerticalAlignment.Top);\r\n    __decorate([\r\n        serialization_1.property(BackgroundImage.urlProperty)\r\n    ], BackgroundImage.prototype, \"url\", void 0);\r\n    __decorate([\r\n        serialization_1.property(BackgroundImage.fillModeProperty)\r\n    ], BackgroundImage.prototype, \"fillMode\", void 0);\r\n    __decorate([\r\n        serialization_1.property(BackgroundImage.horizontalAlignmentProperty)\r\n    ], BackgroundImage.prototype, \"horizontalAlignment\", void 0);\r\n    __decorate([\r\n        serialization_1.property(BackgroundImage.verticalAlignmentProperty)\r\n    ], BackgroundImage.prototype, \"verticalAlignment\", void 0);\r\n    return BackgroundImage;\r\n}(serialization_1.SerializableObject));\r\nexports.BackgroundImage = BackgroundImage;\r\nvar Container = /** @class */ (function (_super) {\r\n    __extends(Container, _super);\r\n    function Container() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.verticalContentAlignment = Enums.VerticalAlignment.Top;\r\n        //#endregion\r\n        _this._items = [];\r\n        _this._renderedItems = [];\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Container.prototype, \"backgroundImage\", {\r\n        get: function () {\r\n            return this.getValue(Container.backgroundImageProperty);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Container.prototype.insertItemAt = function (item, index, forceInsert) {\r\n        if (!item.parent || forceInsert) {\r\n            if (item.isStandalone) {\r\n                if (index < 0 || index >= this._items.length) {\r\n                    this._items.push(item);\r\n                }\r\n                else {\r\n                    this._items.splice(index, 0, item);\r\n                }\r\n                item.setParent(this);\r\n            }\r\n            else {\r\n                throw new Error(strings_1.Strings.errors.elementTypeNotStandalone(item.getJsonTypeName()));\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(strings_1.Strings.errors.elementAlreadyParented());\r\n        }\r\n    };\r\n    Container.prototype.supportsExcplitiHeight = function () {\r\n        return true;\r\n    };\r\n    Container.prototype.getItemsCollectionPropertyName = function () {\r\n        return \"items\";\r\n    };\r\n    Container.prototype.applyBackground = function () {\r\n        if (this.backgroundImage.isValid() && this.renderedElement) {\r\n            this.backgroundImage.apply(this);\r\n        }\r\n        _super.prototype.applyBackground.call(this);\r\n    };\r\n    Container.prototype.internalRender = function () {\r\n        this._renderedItems = [];\r\n        // Cache hostConfig to avoid walking the parent hierarchy several times\r\n        var hostConfig = this.hostConfig;\r\n        var element = document.createElement(\"div\");\r\n        if (this.rtl !== undefined && this.rtl) {\r\n            element.dir = \"rtl\";\r\n        }\r\n        element.classList.add(hostConfig.makeCssClassName(\"ac-container\"));\r\n        element.style.display = \"flex\";\r\n        element.style.flexDirection = \"column\";\r\n        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {\r\n            // Forces the container to be at least as tall as its content.\r\n            //\r\n            // Fixes a quirk in Chrome where, for nested flex elements, the\r\n            // inner element's height would never exceed the outer element's\r\n            // height. This caused overflow truncation to break -- containers\r\n            // would always be measured as not overflowing, since their heights\r\n            // were constrained by their parents as opposed to truly reflecting\r\n            // the height of their content.\r\n            //\r\n            // See the \"Browser Rendering Notes\" section of this answer:\r\n            // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size\r\n            element.style.minHeight = '-webkit-min-content';\r\n        }\r\n        switch (this.verticalContentAlignment) {\r\n            case Enums.VerticalAlignment.Center:\r\n                element.style.justifyContent = \"center\";\r\n                break;\r\n            case Enums.VerticalAlignment.Bottom:\r\n                element.style.justifyContent = \"flex-end\";\r\n                break;\r\n            default:\r\n                element.style.justifyContent = \"flex-start\";\r\n                break;\r\n        }\r\n        if (this._items.length > 0) {\r\n            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                var renderedItem = this.isElementAllowed(item) ? item.render() : undefined;\r\n                if (renderedItem) {\r\n                    if (this._renderedItems.length > 0 && item.separatorElement) {\r\n                        item.separatorElement.style.flex = \"0 0 auto\";\r\n                        Utils.appendChild(element, item.separatorElement);\r\n                    }\r\n                    Utils.appendChild(element, renderedItem);\r\n                    this._renderedItems.push(item);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (this.isDesignMode()) {\r\n                var placeholderElement = this.createPlaceholderElement();\r\n                placeholderElement.style.width = \"100%\";\r\n                placeholderElement.style.height = \"100%\";\r\n                element.appendChild(placeholderElement);\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    Container.prototype.truncateOverflow = function (maxHeight) {\r\n        if (this.renderedElement) {\r\n            // Add 1 to account for rounding differences between browsers\r\n            var boundary_1 = this.renderedElement.offsetTop + maxHeight + 1;\r\n            var handleElement_1 = function (cardElement) {\r\n                var elt = cardElement.renderedElement;\r\n                if (elt) {\r\n                    switch (Utils.getFitStatus(elt, boundary_1)) {\r\n                        case Enums.ContainerFitStatus.FullyInContainer:\r\n                            var sizeChanged = cardElement['resetOverflow']();\r\n                            // If the element's size changed after resetting content,\r\n                            // we have to check if it still fits fully in the card\r\n                            if (sizeChanged) {\r\n                                handleElement_1(cardElement);\r\n                            }\r\n                            break;\r\n                        case Enums.ContainerFitStatus.Overflowing:\r\n                            var maxHeight_1 = boundary_1 - elt.offsetTop;\r\n                            cardElement['handleOverflow'](maxHeight_1);\r\n                            break;\r\n                        case Enums.ContainerFitStatus.FullyOutOfContainer:\r\n                            cardElement['handleOverflow'](0);\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                handleElement_1(item);\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Container.prototype.undoOverflowTruncation = function () {\r\n        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            item['resetOverflow']();\r\n        }\r\n    };\r\n    Container.prototype.getHasBackground = function () {\r\n        return this.backgroundImage.isValid() || _super.prototype.getHasBackground.call(this);\r\n    };\r\n    Container.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this.clear();\r\n        this.setShouldFallback(false);\r\n        var jsonItems = source[this.getItemsCollectionPropertyName()];\r\n        if (Array.isArray(jsonItems)) {\r\n            for (var _i = 0, jsonItems_1 = jsonItems; _i < jsonItems_1.length; _i++) {\r\n                var item = jsonItems_1[_i];\r\n                var element = context.parseElement(this, item, !this.isDesignMode());\r\n                if (element) {\r\n                    this.insertItemAt(element, -1, true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Container.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        context.serializeArray(target, this.getItemsCollectionPropertyName(), this._items);\r\n    };\r\n    Object.defineProperty(Container.prototype, \"isSelectable\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Container.prototype.getItemCount = function () {\r\n        return this._items.length;\r\n    };\r\n    Container.prototype.getItemAt = function (index) {\r\n        return this._items[index];\r\n    };\r\n    Container.prototype.getFirstVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\r\n            for (var _i = 0, _a = this._renderedItems; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                if (item.isVisible) {\r\n                    return item;\r\n                }\r\n            }\r\n            ;\r\n        }\r\n        return undefined;\r\n    };\r\n    Container.prototype.getLastVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\r\n            for (var i = this._renderedItems.length - 1; i >= 0; i--) {\r\n                if (this._renderedItems[i].isVisible) {\r\n                    return this._renderedItems[i];\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    Container.prototype.getJsonTypeName = function () {\r\n        return \"Container\";\r\n    };\r\n    Container.prototype.isFirstElement = function (element) {\r\n        var designMode = this.isDesignMode();\r\n        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.isVisible || designMode) {\r\n                return item == element;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Container.prototype.isLastElement = function (element) {\r\n        var designMode = this.isDesignMode();\r\n        for (var i = this._items.length - 1; i >= 0; i--) {\r\n            if (this._items[i].isVisible || designMode) {\r\n                return this._items[i] == element;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Container.prototype.isRtl = function () {\r\n        if (this.rtl !== undefined) {\r\n            return this.rtl;\r\n        }\r\n        else {\r\n            var parentContainer = this.getParentContainer();\r\n            return parentContainer ? parentContainer.isRtl() : false;\r\n        }\r\n    };\r\n    Container.prototype.isBleedingAtTop = function () {\r\n        var firstRenderedItem = this.getFirstVisibleRenderedItem();\r\n        return this.isBleeding() || (firstRenderedItem ? firstRenderedItem.isBleedingAtTop() : false);\r\n    };\r\n    Container.prototype.isBleedingAtBottom = function () {\r\n        var lastRenderedItem = this.getLastVisibleRenderedItem();\r\n        return this.isBleeding() || (lastRenderedItem ? lastRenderedItem.isBleedingAtBottom() && lastRenderedItem.getEffectiveStyle() == this.getEffectiveStyle() : false);\r\n    };\r\n    Container.prototype.indexOf = function (cardElement) {\r\n        return this._items.indexOf(cardElement);\r\n    };\r\n    Container.prototype.addItem = function (item) {\r\n        this.insertItemAt(item, -1, false);\r\n    };\r\n    Container.prototype.insertItemBefore = function (item, insertBefore) {\r\n        this.insertItemAt(item, this._items.indexOf(insertBefore), false);\r\n    };\r\n    Container.prototype.insertItemAfter = function (item, insertAfter) {\r\n        this.insertItemAt(item, this._items.indexOf(insertAfter) + 1, false);\r\n    };\r\n    Container.prototype.removeItem = function (item) {\r\n        var itemIndex = this._items.indexOf(item);\r\n        if (itemIndex >= 0) {\r\n            this._items.splice(itemIndex, 1);\r\n            item.setParent(undefined);\r\n            this.updateLayout();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Container.prototype.clear = function () {\r\n        this._items = [];\r\n        this._renderedItems = [];\r\n    };\r\n    Container.prototype.getResourceInformation = function () {\r\n        var result = _super.prototype.getResourceInformation.call(this);\r\n        if (this.backgroundImage.isValid()) {\r\n            result.push({\r\n                url: this.backgroundImage.url,\r\n                mimeType: \"image\"\r\n            });\r\n        }\r\n        return result;\r\n    };\r\n    Container.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result) {\r\n            if (this.selectAction) {\r\n                result = this.selectAction.getActionById(id);\r\n            }\r\n            if (!result) {\r\n                for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n                    var item = _a[_i];\r\n                    result = item.getActionById(id);\r\n                    if (result) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(Container.prototype, \"padding\", {\r\n        get: function () {\r\n            return this.getPadding();\r\n        },\r\n        set: function (value) {\r\n            this.setPadding(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Container.prototype, \"selectAction\", {\r\n        get: function () {\r\n            return this._selectAction;\r\n        },\r\n        set: function (value) {\r\n            this._selectAction = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Container.prototype, \"bleed\", {\r\n        get: function () {\r\n            return this.getBleed();\r\n        },\r\n        set: function (value) {\r\n            this.setBleed(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Container.backgroundImageProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_0, \"backgroundImage\", BackgroundImage);\r\n    Container.verticalContentAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_1, \"verticalContentAlignment\", Enums.VerticalAlignment, Enums.VerticalAlignment.Top);\r\n    Container.rtlProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"rtl\");\r\n    __decorate([\r\n        serialization_1.property(Container.backgroundImageProperty)\r\n    ], Container.prototype, \"backgroundImage\", null);\r\n    __decorate([\r\n        serialization_1.property(Container.verticalContentAlignmentProperty)\r\n    ], Container.prototype, \"verticalContentAlignment\", void 0);\r\n    __decorate([\r\n        serialization_1.property(Container.rtlProperty)\r\n    ], Container.prototype, \"rtl\", void 0);\r\n    return Container;\r\n}(StylableCardElementContainer));\r\nexports.Container = Container;\r\nvar Column = /** @class */ (function (_super) {\r\n    __extends(Column, _super);\r\n    function Column(width) {\r\n        if (width === void 0) { width = \"stretch\"; }\r\n        var _this = _super.call(this) || this;\r\n        _this.width = \"stretch\";\r\n        //#endregion\r\n        _this._computedWeight = 0;\r\n        _this.width = width;\r\n        return _this;\r\n    }\r\n    Column.prototype.adjustRenderedElementSize = function (renderedElement) {\r\n        var minDesignTimeColumnHeight = 20;\r\n        if (this.isDesignMode()) {\r\n            renderedElement.style.minWidth = \"20px\";\r\n            renderedElement.style.minHeight = (!this.minPixelHeight ? minDesignTimeColumnHeight : Math.max(this.minPixelHeight, minDesignTimeColumnHeight)) + \"px\";\r\n        }\r\n        else {\r\n            renderedElement.style.minWidth = \"0\";\r\n            if (this.minPixelHeight) {\r\n                renderedElement.style.minHeight = this.minPixelHeight + \"px\";\r\n            }\r\n        }\r\n        if (this.width === \"auto\") {\r\n            renderedElement.style.flex = \"0 1 auto\";\r\n        }\r\n        else if (this.width === \"stretch\") {\r\n            renderedElement.style.flex = \"1 1 50px\";\r\n        }\r\n        else if (this.width instanceof shared_1.SizeAndUnit) {\r\n            if (this.width.unit == Enums.SizeUnit.Pixel) {\r\n                renderedElement.style.flex = \"0 0 auto\";\r\n                renderedElement.style.width = this.width.physicalSize + \"px\";\r\n            }\r\n            else {\r\n                renderedElement.style.flex = \"1 1 \" + (this._computedWeight > 0 ? this._computedWeight : this.width.physicalSize) + \"%\";\r\n            }\r\n        }\r\n    };\r\n    Column.prototype.shouldSerialize = function (context) {\r\n        return true;\r\n    };\r\n    Object.defineProperty(Column.prototype, \"separatorOrientation\", {\r\n        get: function () {\r\n            return Enums.Orientation.Vertical;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Column.prototype.getJsonTypeName = function () {\r\n        return \"Column\";\r\n    };\r\n    Object.defineProperty(Column.prototype, \"hasVisibleSeparator\", {\r\n        get: function () {\r\n            if (this.parent && this.parent instanceof ColumnSet) {\r\n                return this.separatorElement !== undefined && !this.parent.isLeftMostElement(this);\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Column.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    Column.widthProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, \"width\", function (sender, property, source, context) {\r\n        var result = property.defaultValue;\r\n        var value = source[property.name];\r\n        var invalidWidth = false;\r\n        if (typeof value === \"number\" && !isNaN(value)) {\r\n            result = new shared_1.SizeAndUnit(value, Enums.SizeUnit.Weight);\r\n        }\r\n        else if (value === \"auto\" || value === \"stretch\") {\r\n            result = value;\r\n        }\r\n        else if (typeof value === \"string\") {\r\n            try {\r\n                result = shared_1.SizeAndUnit.parse(value);\r\n                if (result.unit === Enums.SizeUnit.Pixel && property.targetVersion.compareTo(context.targetVersion) > 0) {\r\n                    invalidWidth = true;\r\n                }\r\n            }\r\n            catch (e) {\r\n                invalidWidth = true;\r\n            }\r\n        }\r\n        else {\r\n            invalidWidth = true;\r\n        }\r\n        if (invalidWidth) {\r\n            context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidColumnWidth(value));\r\n            result = \"auto\";\r\n        }\r\n        return result;\r\n    }, function (sender, property, target, value, context) {\r\n        if (value instanceof shared_1.SizeAndUnit) {\r\n            if (value.unit === Enums.SizeUnit.Pixel) {\r\n                context.serializeValue(target, \"width\", value.physicalSize + \"px\");\r\n            }\r\n            else {\r\n                context.serializeNumber(target, \"width\", value.physicalSize);\r\n            }\r\n        }\r\n        else {\r\n            context.serializeValue(target, \"width\", value);\r\n        }\r\n    }, \"stretch\");\r\n    __decorate([\r\n        serialization_1.property(Column.widthProperty)\r\n    ], Column.prototype, \"width\", void 0);\r\n    return Column;\r\n}(Container));\r\nexports.Column = Column;\r\nvar ColumnSet = /** @class */ (function (_super) {\r\n    __extends(ColumnSet, _super);\r\n    function ColumnSet() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._columns = [];\r\n        return _this;\r\n    }\r\n    ColumnSet.prototype.createColumnInstance = function (source, context) {\r\n        return context.parseCardObject(this, source, [], // Forbidden types not supported for elements for now\r\n        !this.isDesignMode(), function (typeName) {\r\n            return !typeName || typeName === \"Column\" ? new Column() : undefined;\r\n        }, function (typeName, errorType) {\r\n            context.logParseEvent(undefined, Enums.ValidationEvent.ElementTypeNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(typeName));\r\n        });\r\n    };\r\n    ColumnSet.prototype.internalRender = function () {\r\n        this._renderedColumns = [];\r\n        if (this._columns.length > 0) {\r\n            // Cache hostConfig to avoid walking the parent hierarchy several times\r\n            var hostConfig = this.hostConfig;\r\n            var element = document.createElement(\"div\");\r\n            element.className = hostConfig.makeCssClassName(\"ac-columnSet\");\r\n            element.style.display = \"flex\";\r\n            if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {\r\n                // See comment in Container.internalRender()\r\n                element.style.minHeight = '-webkit-min-content';\r\n            }\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.justifyContent = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.justifyContent = \"flex-end\";\r\n                    break;\r\n                default:\r\n                    element.style.justifyContent = \"flex-start\";\r\n                    break;\r\n            }\r\n            var totalWeight = 0;\r\n            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n                var column = _a[_i];\r\n                if (column.width instanceof shared_1.SizeAndUnit && (column.width.unit == Enums.SizeUnit.Weight)) {\r\n                    totalWeight += column.width.physicalSize;\r\n                }\r\n            }\r\n            for (var _b = 0, _c = this._columns; _b < _c.length; _b++) {\r\n                var column = _c[_b];\r\n                if (column.width instanceof shared_1.SizeAndUnit && column.width.unit == Enums.SizeUnit.Weight && totalWeight > 0) {\r\n                    var computedWeight = 100 / totalWeight * column.width.physicalSize;\r\n                    // Best way to emulate \"internal\" access I know of\r\n                    column[\"_computedWeight\"] = computedWeight;\r\n                }\r\n                var renderedColumn = column.render();\r\n                if (renderedColumn) {\r\n                    if (this._renderedColumns.length > 0 && column.separatorElement) {\r\n                        column.separatorElement.style.flex = \"0 0 auto\";\r\n                        Utils.appendChild(element, column.separatorElement);\r\n                    }\r\n                    Utils.appendChild(element, renderedColumn);\r\n                    this._renderedColumns.push(column);\r\n                }\r\n            }\r\n            return this._renderedColumns.length > 0 ? element : undefined;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    ColumnSet.prototype.truncateOverflow = function (maxHeight) {\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            column['handleOverflow'](maxHeight);\r\n        }\r\n        return true;\r\n    };\r\n    ColumnSet.prototype.undoOverflowTruncation = function () {\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            column['resetOverflow']();\r\n        }\r\n    };\r\n    Object.defineProperty(ColumnSet.prototype, \"isSelectable\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ColumnSet.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this._columns = [];\r\n        this._renderedColumns = [];\r\n        var jsonColumns = source[\"columns\"];\r\n        if (Array.isArray(jsonColumns)) {\r\n            for (var _i = 0, jsonColumns_1 = jsonColumns; _i < jsonColumns_1.length; _i++) {\r\n                var item = jsonColumns_1[_i];\r\n                var column = this.createColumnInstance(item, context);\r\n                if (column) {\r\n                    this._columns.push(column);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ColumnSet.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        context.serializeArray(target, \"columns\", this._columns);\r\n    };\r\n    ColumnSet.prototype.isFirstElement = function (element) {\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            if (column.isVisible) {\r\n                return column == element;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.isBleedingAtTop = function () {\r\n        if (this.isBleeding()) {\r\n            return true;\r\n        }\r\n        if (this._renderedColumns && this._renderedColumns.length > 0) {\r\n            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n                var column = _a[_i];\r\n                if (column.isBleedingAtTop()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.isBleedingAtBottom = function () {\r\n        if (this.isBleeding()) {\r\n            return true;\r\n        }\r\n        if (this._renderedColumns && this._renderedColumns.length > 0) {\r\n            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n                var column = _a[_i];\r\n                if (column.isBleedingAtBottom()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.getItemCount = function () {\r\n        return this._columns.length;\r\n    };\r\n    ColumnSet.prototype.getFirstVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\r\n            return this._renderedColumns[0];\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    ColumnSet.prototype.getLastVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\r\n            return this._renderedColumns[this._renderedColumns.length - 1];\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    ColumnSet.prototype.getColumnAt = function (index) {\r\n        return this._columns[index];\r\n    };\r\n    ColumnSet.prototype.getItemAt = function (index) {\r\n        return this.getColumnAt(index);\r\n    };\r\n    ColumnSet.prototype.getJsonTypeName = function () {\r\n        return \"ColumnSet\";\r\n    };\r\n    ColumnSet.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        var weightedColumns = 0;\r\n        var stretchedColumns = 0;\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            if (typeof column.width === \"number\") {\r\n                weightedColumns++;\r\n            }\r\n            else if (column.width === \"stretch\") {\r\n                stretchedColumns++;\r\n            }\r\n        }\r\n        if (weightedColumns > 0 && stretchedColumns > 0) {\r\n            context.addFailure(this, Enums.ValidationEvent.Hint, strings_1.Strings.hints.dontUseWeightedAndStrecthedColumnsInSameSet());\r\n        }\r\n    };\r\n    ColumnSet.prototype.addColumn = function (column) {\r\n        if (!column.parent) {\r\n            this._columns.push(column);\r\n            column.setParent(this);\r\n        }\r\n        else {\r\n            throw new Error(strings_1.Strings.errors.columnAlreadyBelongsToAnotherSet());\r\n        }\r\n    };\r\n    ColumnSet.prototype.removeItem = function (item) {\r\n        if (item instanceof Column) {\r\n            var itemIndex = this._columns.indexOf(item);\r\n            if (itemIndex >= 0) {\r\n                this._columns.splice(itemIndex, 1);\r\n                item.setParent(undefined);\r\n                this.updateLayout();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.indexOf = function (cardElement) {\r\n        return cardElement instanceof Column ? this._columns.indexOf(cardElement) : -1;\r\n    };\r\n    ColumnSet.prototype.isLeftMostElement = function (element) {\r\n        return this._columns.indexOf(element) == 0;\r\n    };\r\n    ColumnSet.prototype.isRightMostElement = function (element) {\r\n        return this._columns.indexOf(element) == this._columns.length - 1;\r\n    };\r\n    ColumnSet.prototype.isTopElement = function (element) {\r\n        return this._columns.indexOf(element) >= 0;\r\n    };\r\n    ColumnSet.prototype.isBottomElement = function (element) {\r\n        return this._columns.indexOf(element) >= 0;\r\n    };\r\n    ColumnSet.prototype.getActionById = function (id) {\r\n        var result = undefined;\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            result = column.getActionById(id);\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(ColumnSet.prototype, \"bleed\", {\r\n        get: function () {\r\n            return this.getBleed();\r\n        },\r\n        set: function (value) {\r\n            this.setBleed(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnSet.prototype, \"padding\", {\r\n        get: function () {\r\n            return this.getPadding();\r\n        },\r\n        set: function (value) {\r\n            this.setPadding(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnSet.prototype, \"selectAction\", {\r\n        get: function () {\r\n            return this._selectAction;\r\n        },\r\n        set: function (value) {\r\n            this._selectAction = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ColumnSet;\r\n}(StylableCardElementContainer));\r\nexports.ColumnSet = ColumnSet;\r\nfunction raiseImageLoadedEvent(image) {\r\n    var card = image.getRootElement();\r\n    var onImageLoadedHandler = (card && card.onImageLoaded) ? card.onImageLoaded : AdaptiveCard.onImageLoaded;\r\n    if (onImageLoadedHandler) {\r\n        onImageLoadedHandler(image);\r\n    }\r\n}\r\nfunction raiseAnchorClickedEvent(element, anchor) {\r\n    var card = element.getRootElement();\r\n    var onAnchorClickedHandler = (card && card.onAnchorClicked) ? card.onAnchorClicked : AdaptiveCard.onAnchorClicked;\r\n    return onAnchorClickedHandler !== undefined ? onAnchorClickedHandler(element, anchor) : false;\r\n}\r\nfunction raiseExecuteActionEvent(action) {\r\n    var card = action.parent ? action.parent.getRootElement() : undefined;\r\n    var onExecuteActionHandler = (card && card.onExecuteAction) ? card.onExecuteAction : AdaptiveCard.onExecuteAction;\r\n    if (action.prepareForExecution() && onExecuteActionHandler) {\r\n        onExecuteActionHandler(action);\r\n    }\r\n}\r\nfunction raiseInlineCardExpandedEvent(action, isExpanded) {\r\n    var card = action.parent ? action.parent.getRootElement() : undefined;\r\n    var onInlineCardExpandedHandler = (card && card.onInlineCardExpanded) ? card.onInlineCardExpanded : AdaptiveCard.onInlineCardExpanded;\r\n    if (onInlineCardExpandedHandler) {\r\n        onInlineCardExpandedHandler(action, isExpanded);\r\n    }\r\n}\r\nfunction raiseInputValueChangedEvent(input) {\r\n    var card = input.getRootElement();\r\n    var onInputValueChangedHandler = (card && card.onInputValueChanged) ? card.onInputValueChanged : AdaptiveCard.onInputValueChanged;\r\n    if (onInputValueChangedHandler) {\r\n        onInputValueChangedHandler(input);\r\n    }\r\n}\r\nfunction raiseElementVisibilityChangedEvent(element, shouldUpdateLayout) {\r\n    if (shouldUpdateLayout === void 0) { shouldUpdateLayout = true; }\r\n    var rootElement = element.getRootElement();\r\n    if (shouldUpdateLayout) {\r\n        rootElement.updateLayout();\r\n    }\r\n    var card = rootElement;\r\n    var onElementVisibilityChangedHandler = (card && card.onElementVisibilityChanged) ? card.onElementVisibilityChanged : AdaptiveCard.onElementVisibilityChanged;\r\n    if (onElementVisibilityChangedHandler !== undefined) {\r\n        onElementVisibilityChangedHandler(element);\r\n    }\r\n}\r\nvar ContainerWithActions = /** @class */ (function (_super) {\r\n    __extends(ContainerWithActions, _super);\r\n    function ContainerWithActions() {\r\n        var _this = _super.call(this) || this;\r\n        _this._actionCollection = new ActionCollection(_this);\r\n        return _this;\r\n    }\r\n    ContainerWithActions.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this._actionCollection.parse(source[\"actions\"], context);\r\n    };\r\n    ContainerWithActions.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        this._actionCollection.toJSON(target, \"actions\", context);\r\n    };\r\n    ContainerWithActions.prototype.internalRender = function () {\r\n        var element = _super.prototype.internalRender.call(this);\r\n        if (element) {\r\n            var renderedActions = this._actionCollection.render(this.hostConfig.actions.actionsOrientation, false);\r\n            if (renderedActions) {\r\n                Utils.appendChild(element, Utils.renderSeparation(this.hostConfig, {\r\n                    spacing: this.hostConfig.getEffectiveSpacing(this.hostConfig.actions.spacing)\r\n                }, Enums.Orientation.Horizontal));\r\n                Utils.appendChild(element, renderedActions);\r\n            }\r\n            if (this.renderIfEmpty) {\r\n                return element;\r\n            }\r\n            else {\r\n                return element.children.length > 0 ? element : undefined;\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    ContainerWithActions.prototype.getHasExpandedAction = function () {\r\n        if (this.renderedActionCount == 0) {\r\n            return false;\r\n        }\r\n        else if (this.renderedActionCount == 1) {\r\n            return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;\r\n        }\r\n        else {\r\n            return this._actionCollection.expandedAction !== undefined;\r\n        }\r\n    };\r\n    Object.defineProperty(ContainerWithActions.prototype, \"renderedActionCount\", {\r\n        get: function () {\r\n            return this._actionCollection.renderedActionCount;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ContainerWithActions.prototype, \"renderIfEmpty\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ContainerWithActions.prototype.getActionCount = function () {\r\n        return this._actionCollection.items.length;\r\n    };\r\n    ContainerWithActions.prototype.getActionAt = function (index) {\r\n        if (index >= 0 && index < this.getActionCount()) {\r\n            return this._actionCollection.items[index];\r\n        }\r\n        else {\r\n            return _super.prototype.getActionAt.call(this, index);\r\n        }\r\n    };\r\n    ContainerWithActions.prototype.getActionById = function (id) {\r\n        var result = this._actionCollection.getActionById(id);\r\n        return result ? result : _super.prototype.getActionById.call(this, id);\r\n    };\r\n    ContainerWithActions.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (this._actionCollection) {\r\n            this._actionCollection.validateProperties(context);\r\n        }\r\n    };\r\n    ContainerWithActions.prototype.isLastElement = function (element) {\r\n        return _super.prototype.isLastElement.call(this, element) && this._actionCollection.items.length == 0;\r\n    };\r\n    ContainerWithActions.prototype.addAction = function (action) {\r\n        this._actionCollection.addAction(action);\r\n    };\r\n    ContainerWithActions.prototype.clear = function () {\r\n        _super.prototype.clear.call(this);\r\n        this._actionCollection.clear();\r\n    };\r\n    ContainerWithActions.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        var result = _super.prototype.getAllInputs.call(this, processActions);\r\n        if (processActions) {\r\n            result = result.concat(this._actionCollection.getAllInputs(processActions));\r\n        }\r\n        return result;\r\n    };\r\n    ContainerWithActions.prototype.getResourceInformation = function () {\r\n        return _super.prototype.getResourceInformation.call(this).concat(this._actionCollection.getResourceInformation());\r\n    };\r\n    ContainerWithActions.prototype.isBleedingAtBottom = function () {\r\n        if (this._actionCollection.renderedActionCount == 0) {\r\n            return _super.prototype.isBleedingAtBottom.call(this);\r\n        }\r\n        else {\r\n            if (this._actionCollection.items.length == 1) {\r\n                return this._actionCollection.expandedAction !== undefined && !this.hostConfig.actions.preExpandSingleShowCardAction;\r\n            }\r\n            else {\r\n                return this._actionCollection.expandedAction !== undefined;\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(ContainerWithActions.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ContainerWithActions;\r\n}(Container));\r\nexports.ContainerWithActions = ContainerWithActions;\r\n// @dynamic\r\nvar AdaptiveCard = /** @class */ (function (_super) {\r\n    __extends(AdaptiveCard, _super);\r\n    function AdaptiveCard() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.designMode = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AdaptiveCard, \"processMarkdown\", {\r\n        get: function () {\r\n            throw new Error(strings_1.Strings.errors.processMarkdownEventRemoved());\r\n        },\r\n        set: function (value) {\r\n            throw new Error(strings_1.Strings.errors.processMarkdownEventRemoved());\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    AdaptiveCard.applyMarkdown = function (text) {\r\n        var result = {\r\n            didProcess: false\r\n        };\r\n        if (AdaptiveCard.onProcessMarkdown) {\r\n            AdaptiveCard.onProcessMarkdown(text, result);\r\n        }\r\n        else if (window.markdownit) {\r\n            // Check for markdownit\r\n            var markdownIt = window.markdownit;\r\n            result.outputHtml = markdownIt().render(text);\r\n            result.didProcess = true;\r\n        }\r\n        else {\r\n            console.warn(strings_1.Strings.errors.markdownProcessingNotEnabled);\r\n        }\r\n        return result;\r\n    };\r\n    AdaptiveCard.prototype.isVersionSupported = function () {\r\n        if (this.bypassVersionCheck) {\r\n            return true;\r\n        }\r\n        else {\r\n            var unsupportedVersion = !this.version ||\r\n                !this.version.isValid ||\r\n                (this.maxVersion.major < this.version.major) ||\r\n                (this.maxVersion.major == this.version.major && this.maxVersion.minor < this.version.minor);\r\n            return !unsupportedVersion;\r\n        }\r\n    };\r\n    AdaptiveCard.prototype.getDefaultSerializationContext = function () {\r\n        return new SerializationContext(this.version);\r\n    };\r\n    AdaptiveCard.prototype.getItemsCollectionPropertyName = function () {\r\n        return \"body\";\r\n    };\r\n    AdaptiveCard.prototype.internalParse = function (source, context) {\r\n        this._fallbackCard = undefined;\r\n        var fallbackElement = context.parseElement(undefined, source[\"fallback\"], !this.isDesignMode());\r\n        if (fallbackElement) {\r\n            this._fallbackCard = new AdaptiveCard();\r\n            this._fallbackCard.addItem(fallbackElement);\r\n        }\r\n        _super.prototype.internalParse.call(this, source, context);\r\n    };\r\n    AdaptiveCard.prototype.internalToJSON = function (target, context) {\r\n        this.setValue(AdaptiveCard.versionProperty, context.targetVersion);\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n    };\r\n    AdaptiveCard.prototype.internalRender = function () {\r\n        var renderedElement = _super.prototype.internalRender.call(this);\r\n        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && renderedElement) {\r\n            // Unlike containers, the root card element should be allowed to\r\n            // be shorter than its content (otherwise the overflow truncation\r\n            // logic would never get triggered)\r\n            renderedElement.style.removeProperty(\"minHeight\");\r\n        }\r\n        return renderedElement;\r\n    };\r\n    AdaptiveCard.prototype.getHasBackground = function () {\r\n        return true;\r\n    };\r\n    AdaptiveCard.prototype.getDefaultPadding = function () {\r\n        return new shared_1.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding);\r\n    };\r\n    AdaptiveCard.prototype.shouldSerialize = function (context) {\r\n        return true;\r\n    };\r\n    Object.defineProperty(AdaptiveCard.prototype, \"renderIfEmpty\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AdaptiveCard.prototype, \"bypassVersionCheck\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AdaptiveCard.prototype, \"allowCustomStyle\", {\r\n        get: function () {\r\n            return this.hostConfig.adaptiveCard && this.hostConfig.adaptiveCard.allowCustomStyle;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AdaptiveCard.prototype, \"hasBackground\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    AdaptiveCard.prototype.getJsonTypeName = function () {\r\n        return \"AdaptiveCard\";\r\n    };\r\n    AdaptiveCard.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (this.getValue(CardElement.typeNameProperty) !== \"AdaptiveCard\") {\r\n            context.addFailure(this, Enums.ValidationEvent.MissingCardType, strings_1.Strings.errors.invalidCardType());\r\n        }\r\n        if (!this.bypassVersionCheck && !this.version) {\r\n            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet(\"version\"));\r\n        }\r\n        else if (!this.isVersionSupported()) {\r\n            context.addFailure(this, Enums.ValidationEvent.UnsupportedCardVersion, strings_1.Strings.errors.unsupportedCardVersion(this.version.toString(), this.maxVersion.toString()));\r\n        }\r\n    };\r\n    AdaptiveCard.prototype.render = function (target) {\r\n        var renderedCard;\r\n        if (this.shouldFallback() && this._fallbackCard) {\r\n            this._fallbackCard.hostConfig = this.hostConfig;\r\n            renderedCard = this._fallbackCard.render();\r\n        }\r\n        else {\r\n            renderedCard = _super.prototype.render.call(this);\r\n            if (renderedCard) {\r\n                renderedCard.classList.add(this.hostConfig.makeCssClassName(\"ac-adaptiveCard\"));\r\n                // Having a tabIndex on the root container for a card can mess up accessibility in some scenarios.\r\n                // However, we've shipped this behavior before, and so can't just turn it off in a point release. For\r\n                // now, to unblock accessibility scenarios for our customers, we've got an option to turn it off. In a\r\n                // future release, we should strongly consider flipping the default such that we *don't* emit a tabIndex\r\n                // by default.\r\n                if (shared_1.GlobalSettings.setTabIndexAtCardRoot) {\r\n                    renderedCard.tabIndex = 0;\r\n                }\r\n                if (this.speak) {\r\n                    renderedCard.setAttribute(\"aria-label\", this.speak);\r\n                }\r\n            }\r\n        }\r\n        if (target) {\r\n            Utils.appendChild(target, renderedCard);\r\n            this.updateLayout();\r\n        }\r\n        return renderedCard;\r\n    };\r\n    AdaptiveCard.prototype.updateLayout = function (processChildren) {\r\n        if (processChildren === void 0) { processChildren = true; }\r\n        _super.prototype.updateLayout.call(this, processChildren);\r\n        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && this.isDisplayed()) {\r\n            var padding = this.hostConfig.getEffectiveSpacing(Enums.Spacing.Default);\r\n            this['handleOverflow'](this.renderedElement.offsetHeight - padding);\r\n        }\r\n    };\r\n    AdaptiveCard.prototype.shouldFallback = function () {\r\n        return _super.prototype.shouldFallback.call(this) || !this.isVersionSupported();\r\n    };\r\n    Object.defineProperty(AdaptiveCard.prototype, \"hasVisibleSeparator\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    AdaptiveCard.schemaUrl = \"http://adaptivecards.io/schemas/adaptive-card.json\";\r\n    //#region Schema\r\n    AdaptiveCard.$schemaProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, \"$schema\", function (sender, property, source, context) {\r\n        return AdaptiveCard.schemaUrl;\r\n    }, function (sender, property, target, value, context) {\r\n        context.serializeValue(target, property.name, AdaptiveCard.schemaUrl);\r\n    });\r\n    AdaptiveCard.versionProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, \"version\", function (sender, property, source, context) {\r\n        var version = serialization_1.Version.parse(source[property.name], context);\r\n        if (version === undefined) {\r\n            version = serialization_1.Versions.latest;\r\n            context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidCardVersion(version.toString()));\r\n        }\r\n        return version;\r\n    }, function (sender, property, target, value, context) {\r\n        if (value !== undefined) {\r\n            context.serializeValue(target, property.name, value.toString());\r\n        }\r\n    }, serialization_1.Versions.v1_0);\r\n    AdaptiveCard.fallbackTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"fallbackText\");\r\n    AdaptiveCard.speakProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"speak\");\r\n    __decorate([\r\n        serialization_1.property(AdaptiveCard.versionProperty)\r\n    ], AdaptiveCard.prototype, \"version\", void 0);\r\n    __decorate([\r\n        serialization_1.property(AdaptiveCard.fallbackTextProperty)\r\n    ], AdaptiveCard.prototype, \"fallbackText\", void 0);\r\n    __decorate([\r\n        serialization_1.property(AdaptiveCard.speakProperty)\r\n    ], AdaptiveCard.prototype, \"speak\", void 0);\r\n    return AdaptiveCard;\r\n}(ContainerWithActions));\r\nexports.AdaptiveCard = AdaptiveCard;\r\nvar InlineAdaptiveCard = /** @class */ (function (_super) {\r\n    __extends(InlineAdaptiveCard, _super);\r\n    function InlineAdaptiveCard() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.suppressStyle = false;\r\n        return _this;\r\n    }\r\n    InlineAdaptiveCard.prototype.getSchemaKey = function () {\r\n        return \"InlineAdaptiveCard\";\r\n    };\r\n    InlineAdaptiveCard.prototype.populateSchema = function (schema) {\r\n        _super.prototype.populateSchema.call(this, schema);\r\n        schema.remove(AdaptiveCard.$schemaProperty, AdaptiveCard.versionProperty);\r\n    };\r\n    //#endregion\r\n    InlineAdaptiveCard.prototype.getDefaultPadding = function () {\r\n        return new shared_1.PaddingDefinition(this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding, this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding);\r\n    };\r\n    Object.defineProperty(InlineAdaptiveCard.prototype, \"bypassVersionCheck\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(InlineAdaptiveCard.prototype, \"defaultStyle\", {\r\n        get: function () {\r\n            if (this.suppressStyle) {\r\n                return Enums.ContainerStyle.Default;\r\n            }\r\n            else {\r\n                return this.hostConfig.actions.showCard.style ? this.hostConfig.actions.showCard.style : Enums.ContainerStyle.Emphasis;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    InlineAdaptiveCard.prototype.render = function (target) {\r\n        var renderedCard = _super.prototype.render.call(this, target);\r\n        if (renderedCard) {\r\n            renderedCard.setAttribute(\"aria-live\", \"polite\");\r\n            renderedCard.removeAttribute(\"tabindex\");\r\n        }\r\n        return renderedCard;\r\n    };\r\n    return InlineAdaptiveCard;\r\n}(AdaptiveCard));\r\nvar GlobalRegistry = /** @class */ (function () {\r\n    function GlobalRegistry() {\r\n    }\r\n    GlobalRegistry.populateWithDefaultElements = function (registry) {\r\n        registry.clear();\r\n        registry.register(\"Container\", Container);\r\n        registry.register(\"TextBlock\", TextBlock);\r\n        registry.register(\"RichTextBlock\", RichTextBlock, serialization_1.Versions.v1_2);\r\n        registry.register(\"TextRun\", TextRun, serialization_1.Versions.v1_2);\r\n        registry.register(\"Image\", Image);\r\n        registry.register(\"ImageSet\", ImageSet);\r\n        registry.register(\"Media\", Media, serialization_1.Versions.v1_1);\r\n        registry.register(\"FactSet\", FactSet);\r\n        registry.register(\"ColumnSet\", ColumnSet);\r\n        registry.register(\"ActionSet\", ActionSet, serialization_1.Versions.v1_2);\r\n        registry.register(\"Input.Text\", TextInput);\r\n        registry.register(\"Input.Date\", DateInput);\r\n        registry.register(\"Input.Time\", TimeInput);\r\n        registry.register(\"Input.Number\", NumberInput);\r\n        registry.register(\"Input.ChoiceSet\", ChoiceSetInput);\r\n        registry.register(\"Input.Toggle\", ToggleInput);\r\n    };\r\n    GlobalRegistry.populateWithDefaultActions = function (registry) {\r\n        registry.clear();\r\n        registry.register(OpenUrlAction.JsonTypeName, OpenUrlAction);\r\n        registry.register(SubmitAction.JsonTypeName, SubmitAction);\r\n        registry.register(ShowCardAction.JsonTypeName, ShowCardAction);\r\n        registry.register(ToggleVisibilityAction.JsonTypeName, ToggleVisibilityAction, serialization_1.Versions.v1_2);\r\n    };\r\n    GlobalRegistry.reset = function () {\r\n        GlobalRegistry.populateWithDefaultElements(GlobalRegistry.elements);\r\n        GlobalRegistry.populateWithDefaultActions(GlobalRegistry.actions);\r\n    };\r\n    GlobalRegistry.elements = new registry_1.CardObjectRegistry();\r\n    GlobalRegistry.actions = new registry_1.CardObjectRegistry();\r\n    return GlobalRegistry;\r\n}());\r\nexports.GlobalRegistry = GlobalRegistry;\r\nGlobalRegistry.reset();\r\nvar SerializationContext = /** @class */ (function (_super) {\r\n    __extends(SerializationContext, _super);\r\n    function SerializationContext() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    SerializationContext.prototype.internalParseCardObject = function (parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent) {\r\n        var result = undefined;\r\n        if (source && typeof source === \"object\") {\r\n            var typeName = Utils.parseString(source[\"type\"]);\r\n            if (typeName) {\r\n                if (forbiddenTypeNames.indexOf(typeName) >= 0) {\r\n                    logParseEvent(typeName, 1 /* ForbiddenType */);\r\n                }\r\n                else {\r\n                    var tryToFallback = false;\r\n                    result = createInstanceCallback(typeName);\r\n                    if (!result) {\r\n                        tryToFallback = shared_1.GlobalSettings.enableFallback && allowFallback;\r\n                        logParseEvent(typeName, 0 /* UnknownType */);\r\n                    }\r\n                    else {\r\n                        result.setParent(parent);\r\n                        result.parse(source, this);\r\n                        tryToFallback = shared_1.GlobalSettings.enableFallback && allowFallback && result.shouldFallback();\r\n                    }\r\n                    if (tryToFallback) {\r\n                        var fallback = source[\"fallback\"];\r\n                        if (!fallback && parent) {\r\n                            parent.setShouldFallback(true);\r\n                        }\r\n                        if (typeof fallback === \"string\" && fallback.toLowerCase() === \"drop\") {\r\n                            result = undefined;\r\n                        }\r\n                        else if (typeof fallback === \"object\") {\r\n                            result = this.internalParseCardObject(parent, fallback, forbiddenTypeNames, true, createInstanceCallback, logParseEvent);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    SerializationContext.prototype.cardObjectParsed = function (o, source) {\r\n        if (o instanceof Action && this.onParseAction) {\r\n            this.onParseAction(o, source, this);\r\n        }\r\n        else if (o instanceof CardElement && this.onParseElement) {\r\n            this.onParseElement(o, source, this);\r\n        }\r\n    };\r\n    SerializationContext.prototype.parseCardObject = function (parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent) {\r\n        var result = this.internalParseCardObject(parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent);\r\n        if (result !== undefined) {\r\n            this.cardObjectParsed(result, source);\r\n        }\r\n        return result;\r\n    };\r\n    SerializationContext.prototype.parseElement = function (parent, source, allowFallback) {\r\n        var _this = this;\r\n        return this.parseCardObject(parent, source, [], // Forbidden types not supported for elements for now\r\n        allowFallback, function (typeName) {\r\n            return _this.elementRegistry.createInstance(typeName, _this.targetVersion);\r\n        }, function (typeName, errorType) {\r\n            if (errorType === 0 /* UnknownType */) {\r\n                _this.logParseEvent(undefined, Enums.ValidationEvent.UnknownElementType, strings_1.Strings.errors.unknownElementType(typeName));\r\n            }\r\n            else {\r\n                _this.logParseEvent(undefined, Enums.ValidationEvent.ElementTypeNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(typeName));\r\n            }\r\n        });\r\n    };\r\n    SerializationContext.prototype.parseAction = function (parent, source, forbiddenActionTypes, allowFallback) {\r\n        var _this = this;\r\n        return this.parseCardObject(parent, source, forbiddenActionTypes, allowFallback, function (typeName) {\r\n            return _this.actionRegistry.createInstance(typeName, _this.targetVersion);\r\n        }, function (typeName, errorType) {\r\n            if (errorType == 0 /* UnknownType */) {\r\n                _this.logParseEvent(undefined, Enums.ValidationEvent.UnknownActionType, strings_1.Strings.errors.unknownActionType(typeName));\r\n            }\r\n            else {\r\n                _this.logParseEvent(undefined, Enums.ValidationEvent.ActionTypeNotAllowed, strings_1.Strings.errors.actionTypeNotAllowed(typeName));\r\n            }\r\n        });\r\n    };\r\n    Object.defineProperty(SerializationContext.prototype, \"elementRegistry\", {\r\n        get: function () {\r\n            return this._elementRegistry ? this._elementRegistry : GlobalRegistry.elements;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    // Not using a property setter here because the setter should accept \"undefined\"\r\n    // whereas the getter should never return undefined.\r\n    SerializationContext.prototype.setElementRegistry = function (value) {\r\n        this._elementRegistry = value;\r\n    };\r\n    Object.defineProperty(SerializationContext.prototype, \"actionRegistry\", {\r\n        get: function () {\r\n            return this._actionRegistry ? this._actionRegistry : GlobalRegistry.actions;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    // Not using a property setter here because the setter should accept \"undefined\"\r\n    // whereas the getter should never return undefined.\r\n    SerializationContext.prototype.setActionRegistry = function (value) {\r\n        this._actionRegistry = value;\r\n    };\r\n    return SerializationContext;\r\n}(serialization_1.BaseSerializationContext));\r\nexports.SerializationContext = SerializationContext;\r\n//# sourceMappingURL=card-elements.js.map"]},"metadata":{},"sourceType":"script"}