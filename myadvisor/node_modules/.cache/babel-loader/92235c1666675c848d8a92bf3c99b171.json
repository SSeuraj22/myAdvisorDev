{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/ubuntu/myAdvisorDev/myadvisor/src/components/Staff/ProgrammesTable.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport paginationFactory, { PaginationProvider, PaginationListStandalone } from 'react-bootstrap-table2-paginator';\nimport ToolkitProvider, { Search, CSVExport } from 'react-bootstrap-table2-toolkit';\nimport filterFactory, { selectFilter } from 'react-bootstrap-table2-filter';\nimport { Modal, Tabs, Tab } from \"react-bootstrap\"; //TABLE SETUP\n\n/*\n    columns is used to display specific columns of the data on the table.\n*/\n\nconst columns = [{\n  dataField: 'name',\n  text: 'Programme',\n  csvText: 'name',\n  sort: true\n}];\n/*\n    selectLevelOptions allows you to filter the level table column\n*/\n\nconst selectLevelOptions = {\n  I: 'I',\n  II: 'II',\n  III: 'III'\n};\n/*\n    selectSemesterOptions allows you to filter the semester table column\n*/\n\nconst selectSemesterOptions = {\n  1: '1',\n  2: '2',\n  3: '3'\n};\n/*\n    selectTypeOptions allows you to filter the type table column\n*/\n\nconst selectTypeOptions = {\n  Core: 'Core',\n  Elective: 'Elective'\n};\n/*\n    coursesColumns is used to display specific columns of the data on the courses table in the modal.\n    It also contains code that enables the columns to be filtered.\n*/\n\nconst coursesColumns = [{\n  dataField: 'level',\n  text: 'Level',\n  sort: true,\n  formatter: cell => selectLevelOptions[cell],\n  filter: selectFilter({\n    options: selectLevelOptions\n  })\n}, {\n  dataField: 'semester',\n  text: 'Semester',\n  sort: true,\n  formatter: cell => selectSemesterOptions[cell],\n  filter: selectFilter({\n    options: selectSemesterOptions\n  })\n}, {\n  dataField: 'type',\n  text: 'Type',\n  sort: true,\n  formatter: cell => selectTypeOptions[cell],\n  filter: selectFilter({\n    options: selectTypeOptions\n  })\n}, {\n  dataField: 'courseCode',\n  text: 'Course Code',\n  sort: true\n}, {\n  dataField: 'courseTitle',\n  text: 'Course Title',\n  sort: true\n}];\n/*\n    defaultSorted and coursesSorted sorts the tables is ascending order based on the name column and level column respectively.\n*/\n\nconst defaultSorted = [{\n  dataField: 'name',\n  order: 'asec'\n}];\nconst coursesSorted = [{\n  dataField: 'level',\n  order: 'asec'\n}];\n/*\n    options and courseOptions is used to configure the tables pagination.\n*/\n\nconst options = {\n  custom: true,\n  paginationSize: 5,\n  pageStartIndex: 1,\n  firstPageText: 'First',\n  prePageText: 'Back',\n  nextPageText: 'Next',\n  lastPageText: 'Last',\n  sizePerPage: 8\n};\nconst courseOptions = {\n  sizePerPage: 8,\n  hideSizePerPage: true,\n  hidePageListOnlyOnePage: true\n};\nconst {\n  SearchBar,\n  ClearSearchButton\n} = Search;\n/*\n    ProgrammesTable is a component that displays the programmes in the system in a table.\n*/\n\nfunction ProgrammesTable({\n  programmes,\n  loading\n}) {\n  _s();\n\n  /*\n      The show state is used to keep track of the visibility of the view programme courses modal.\n      It's initial state is false.\n      handleShow sets the show state to true, which displays the modal.\n      handleClose sets the show state to false, which closes the modal.\n  */\n  const [show, setShow] = useState(false);\n\n  const handleShow = () => setShow(true);\n\n  const handleClose = () => setShow(false);\n  /*\n      The programmeName state is used to keep track of the selected programme name.\n      The programmeCourses state is used to store the courses of the selected programme.\n      The loadingCourses state is used to keep track of getting the courses from the server. \n  */\n\n\n  const [programmeName, setprogrammeName] = useState([]);\n  const [programmeCourses, setProgrammeCourses] = useState([]);\n  const [loadingCourses, setLoadingCourses] = useState(true);\n  /*\n      rowEvents is used to get the programme name of the selected row and get the courses of that programme.\n  */\n\n  const rowEvents = {\n    onClick: (e, row, rowIndex) => {\n      setprogrammeName(row.name);\n      getProgrammeCourses(row.id);\n    }\n  };\n  /*\n      getProgrammeCourses creates a get request to the server that gets all the courses of this specified programme on the system and stores it in the programmeCourses state.\n  */\n\n  async function getProgrammeCourses(id) {\n    try {\n      setShow(true);\n      setProgrammeCourses([]);\n      setLoadingCourses(true);\n      const res = await fetch(\"/programmes/offered-courses/\" + id, {\n        method: \"GET\"\n      });\n      const parseData = await res.json();\n      setProgrammeCourses(parseData);\n      console.log(parseData.type);\n      setLoadingCourses(false);\n    } catch (err) {\n      console.error(err.message);\n    }\n  }\n  /*\n      ToolkitProvider is a wrapper for the BootstrapTable context and the related search, export csv and clear search react contexts.  \n  */\n\n\n  const table = ({\n    paginationProps,\n    paginationTableProps\n  }) => /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ToolkitProvider, {\n      keyField: \"name\",\n      data: programmes,\n      columns: columns,\n      search: true,\n      children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(SearchBar, { ...props.searchProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(ClearSearchButton, { ...props.searchProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(BootstrapTable, { ...props.baseProps,\n          ...paginationTableProps,\n          defaultSorted: defaultSorted,\n          rowEvents: rowEvents,\n          hover: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PaginationListStandalone, { ...paginationProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"d-flex justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"spinner-border text-primary\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"sr-only\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(PaginationProvider, {\n      pagination: paginationFactory(options),\n      children: table\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: handleClose,\n      size: \"xl\",\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: programmeName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: loadingCourses ? /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"d-flex justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"spinner-border text-primary\",\n            role: \"status\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"sr-only\",\n              children: \"Loading...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(ToolkitProvider, {\n          keyField: \"courseCode\",\n          data: programmeCourses,\n          columns: coursesColumns,\n          search: true,\n          children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(SearchBar, { ...props.searchProps\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ClearSearchButton, { ...props.searchProps\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(BootstrapTable, { ...props.baseProps,\n              pagination: paginationFactory(courseOptions),\n              defaultSorted: coursesSorted,\n              filter: filterFactory()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ProgrammesTable, \"9mzKDLm26GSGBqnUz9XeR1OrDYc=\");\n\n_c = ProgrammesTable;\nexport default ProgrammesTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProgrammesTable\");","map":{"version":3,"sources":["/home/ubuntu/myAdvisorDev/myadvisor/src/components/Staff/ProgrammesTable.js"],"names":["React","useState","useEffect","BootstrapTable","paginationFactory","PaginationProvider","PaginationListStandalone","ToolkitProvider","Search","CSVExport","filterFactory","selectFilter","Modal","Tabs","Tab","columns","dataField","text","csvText","sort","selectLevelOptions","I","II","III","selectSemesterOptions","selectTypeOptions","Core","Elective","coursesColumns","formatter","cell","filter","options","defaultSorted","order","coursesSorted","custom","paginationSize","pageStartIndex","firstPageText","prePageText","nextPageText","lastPageText","sizePerPage","courseOptions","hideSizePerPage","hidePageListOnlyOnePage","SearchBar","ClearSearchButton","ProgrammesTable","programmes","loading","show","setShow","handleShow","handleClose","programmeName","setprogrammeName","programmeCourses","setProgrammeCourses","loadingCourses","setLoadingCourses","rowEvents","onClick","e","row","rowIndex","name","getProgrammeCourses","id","res","fetch","method","parseData","json","console","log","type","err","error","message","table","paginationProps","paginationTableProps","props","searchProps","baseProps"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,OAAOC,iBAAP,IAA4BC,kBAA5B,EAAgDC,wBAAhD,QAA+E,kCAA/E;AACA,OAAOC,eAAP,IAA0BC,MAA1B,EAAkCC,SAAlC,QAAmD,gCAAnD;AACA,OAAOC,aAAP,IAAwBC,YAAxB,QAA6C,+BAA7C;AACA,SAASC,KAAT,EAAgBC,IAAhB,EAAsBC,GAAtB,QAAiC,iBAAjC,C,CAEA;;AAEA;AACA;AACA;;AACA,MAAMC,OAAO,GAAG,CACZ;AAAEC,EAAAA,SAAS,EAAE,MAAb;AAAqBC,EAAAA,IAAI,EAAE,WAA3B;AAAwCC,EAAAA,OAAO,EAAE,MAAjD;AAAyDC,EAAAA,IAAI,EAAE;AAA/D,CADY,CAAhB;AAIA;AACA;AACA;;AACA,MAAMC,kBAAkB,GAAG;AACvBC,EAAAA,CAAC,EAAE,GADoB;AAEvBC,EAAAA,EAAE,EAAE,IAFmB;AAGvBC,EAAAA,GAAG,EAAE;AAHkB,CAA3B;AAMA;AACA;AACA;;AACA,MAAMC,qBAAqB,GAAG;AAC1B,KAAG,GADuB;AAE1B,KAAG,GAFuB;AAG1B,KAAG;AAHuB,CAA9B;AAMA;AACA;AACA;;AACA,MAAMC,iBAAiB,GAAG;AACtBC,EAAAA,IAAI,EAAE,MADgB;AAEtBC,EAAAA,QAAQ,EAAE;AAFY,CAA1B;AAKA;AACA;AACA;AACA;;AACA,MAAMC,cAAc,GAAG,CACnB;AACIZ,EAAAA,SAAS,EAAE,OADf;AAEIC,EAAAA,IAAI,EAAE,OAFV;AAGIE,EAAAA,IAAI,EAAE,IAHV;AAIIU,EAAAA,SAAS,EAAEC,IAAI,IAAIV,kBAAkB,CAACU,IAAD,CAJzC;AAKIC,EAAAA,MAAM,EAAEpB,YAAY,CAAC;AACjBqB,IAAAA,OAAO,EAAEZ;AADQ,GAAD;AALxB,CADmB,EAUnB;AACIJ,EAAAA,SAAS,EAAE,UADf;AAEIC,EAAAA,IAAI,EAAE,UAFV;AAGIE,EAAAA,IAAI,EAAE,IAHV;AAIIU,EAAAA,SAAS,EAAEC,IAAI,IAAIN,qBAAqB,CAACM,IAAD,CAJ5C;AAKIC,EAAAA,MAAM,EAAEpB,YAAY,CAAC;AACjBqB,IAAAA,OAAO,EAAER;AADQ,GAAD;AALxB,CAVmB,EAmBnB;AACIR,EAAAA,SAAS,EAAE,MADf;AAEIC,EAAAA,IAAI,EAAE,MAFV;AAGIE,EAAAA,IAAI,EAAE,IAHV;AAIIU,EAAAA,SAAS,EAAEC,IAAI,IAAIL,iBAAiB,CAACK,IAAD,CAJxC;AAKIC,EAAAA,MAAM,EAAEpB,YAAY,CAAC;AACjBqB,IAAAA,OAAO,EAAEP;AADQ,GAAD;AALxB,CAnBmB,EA4BnB;AAAET,EAAAA,SAAS,EAAE,YAAb;AAA2BC,EAAAA,IAAI,EAAE,aAAjC;AAAgDE,EAAAA,IAAI,EAAE;AAAtD,CA5BmB,EA6BnB;AAAEH,EAAAA,SAAS,EAAE,aAAb;AAA4BC,EAAAA,IAAI,EAAE,cAAlC;AAAkDE,EAAAA,IAAI,EAAE;AAAxD,CA7BmB,CAAvB;AAgCA;AACA;AACA;;AACA,MAAMc,aAAa,GAAG,CAAC;AACnBjB,EAAAA,SAAS,EAAE,MADQ;AAEnBkB,EAAAA,KAAK,EAAE;AAFY,CAAD,CAAtB;AAKA,MAAMC,aAAa,GAAG,CAAC;AACnBnB,EAAAA,SAAS,EAAE,OADQ;AAEnBkB,EAAAA,KAAK,EAAE;AAFY,CAAD,CAAtB;AAKA;AACA;AACA;;AACA,MAAMF,OAAO,GAAG;AACZI,EAAAA,MAAM,EAAE,IADI;AAEZC,EAAAA,cAAc,EAAE,CAFJ;AAGZC,EAAAA,cAAc,EAAE,CAHJ;AAIZC,EAAAA,aAAa,EAAE,OAJH;AAKZC,EAAAA,WAAW,EAAE,MALD;AAMZC,EAAAA,YAAY,EAAE,MANF;AAOZC,EAAAA,YAAY,EAAE,MAPF;AAQZC,EAAAA,WAAW,EAAE;AARD,CAAhB;AAWA,MAAMC,aAAa,GAAG;AAClBD,EAAAA,WAAW,EAAE,CADK;AAElBE,EAAAA,eAAe,EAAE,IAFC;AAGlBC,EAAAA,uBAAuB,EAAE;AAHP,CAAtB;AAMA,MAAM;AAAEC,EAAAA,SAAF;AAAaC,EAAAA;AAAb,IAAoCxC,MAA1C;AAEA;AACA;AACA;;AACA,SAASyC,eAAT,CAAyB;AAACC,EAAAA,UAAD;AAAaC,EAAAA;AAAb,CAAzB,EAAgD;AAAA;;AAE5C;AACJ;AACA;AACA;AACA;AACA;AACI,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBpD,QAAQ,CAAC,KAAD,CAAhC;;AACA,QAAMqD,UAAU,GAAG,MAAMD,OAAO,CAAC,IAAD,CAAhC;;AACA,QAAME,WAAW,GAAG,MAAMF,OAAO,CAAC,KAAD,CAAjC;AAEA;AACJ;AACA;AACA;AACA;;;AACI,QAAM,CAACG,aAAD,EAAgBC,gBAAhB,IAAoCxD,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACyD,gBAAD,EAAmBC,mBAAnB,IAA0C1D,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM,CAAC2D,cAAD,EAAiBC,iBAAjB,IAAsC5D,QAAQ,CAAC,IAAD,CAApD;AAEA;AACJ;AACA;;AACI,QAAM6D,SAAS,GAAG;AACdC,IAAAA,OAAO,EAAE,CAACC,CAAD,EAAIC,GAAJ,EAASC,QAAT,KAAsB;AAC3BT,MAAAA,gBAAgB,CAACQ,GAAG,CAACE,IAAL,CAAhB;AACAC,MAAAA,mBAAmB,CAACH,GAAG,CAACI,EAAL,CAAnB;AACH;AAJa,GAAlB;AAOA;AACJ;AACA;;AACI,iBAAeD,mBAAf,CAAmCC,EAAnC,EAAuC;AACnC,QAAI;AACAhB,MAAAA,OAAO,CAAC,IAAD,CAAP;AACAM,MAAAA,mBAAmB,CAAC,EAAD,CAAnB;AACAE,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AAEA,YAAMS,GAAG,GAAG,MAAMC,KAAK,CAAC,iCAAiCF,EAAlC,EAAsC;AAC7DG,QAAAA,MAAM,EAAE;AADqD,OAAtC,CAAvB;AAGA,YAAMC,SAAS,GAAG,MAAMH,GAAG,CAACI,IAAJ,EAAxB;AACAf,MAAAA,mBAAmB,CAACc,SAAD,CAAnB;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYH,SAAS,CAACI,IAAtB;AACAhB,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;AAGH,KAdD,CAcE,OAAOiB,GAAP,EAAY;AACVH,MAAAA,OAAO,CAACI,KAAR,CAAcD,GAAG,CAACE,OAAlB;AACH;AACJ;AAED;AACJ;AACA;;;AACI,QAAMC,KAAK,GAAG,CAAC;AAAEC,IAAAA,eAAF;AAAmBC,IAAAA;AAAnB,GAAD,kBACV;AAAA,4BACI,QAAC,eAAD;AACQ,MAAA,QAAQ,EAAC,MADjB;AAEQ,MAAA,IAAI,EAAGjC,UAFf;AAGQ,MAAA,OAAO,EAAGnC,OAHlB;AAIQ,MAAA,MAAM,MAJd;AAAA,gBAOQqE,KAAK,iBACL;AAAA,gCACI,QAAC,SAAD,OAAgBA,KAAK,CAACC;AAAtB;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI,QAAC,iBAAD,OAAwBD,KAAK,CAACC;AAA9B;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAGI,QAAC,cAAD,OAAqBD,KAAK,CAACE,SAA3B;AAAA,aAA4CH,oBAA5C;AAAmE,UAAA,aAAa,EAAGlD,aAAnF;AAAmG,UAAA,SAAS,EAAG6B,SAA/G;AAA2H,UAAA,KAAK;AAAhI;AAAA;AAAA;AAAA;AAAA,gBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AARR;AAAA;AAAA;AAAA;AAAA,YADJ,eAiBI,QAAC,wBAAD,OAA+BoB;AAA/B;AAAA;AAAA;AAAA;AAAA,YAjBJ;AAAA,kBADJ;;AAsBA,sBACI;AAAA,eACK/B,OAAO,gBACR;AAAK,MAAA,KAAK,EAAC,+BAAX;AAAA,6BACI;AAAK,QAAA,KAAK,EAAC,6BAAX;AAAyC,QAAA,IAAI,EAAC,QAA9C;AAAA,+BACA;AAAM,UAAA,KAAK,EAAC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADQ,gBAOR,QAAC,kBAAD;AAAoB,MAAA,UAAU,EAAE/C,iBAAiB,CAAC4B,OAAD,CAAjD;AAAA,gBACMiD;AADN;AAAA;AAAA;AAAA;AAAA,YARJ,eAaI,QAAC,KAAD;AAAO,MAAA,IAAI,EAAE7B,IAAb;AAAmB,MAAA,MAAM,EAAEG,WAA3B;AAAwC,MAAA,IAAI,EAAC,IAA7C;AAAA,8BACE,QAAC,KAAD,CAAO,MAAP;AAAc,QAAA,WAAW,MAAzB;AAAA,+BACI,QAAC,KAAD,CAAO,KAAP;AAAA,oBAAcC;AAAd;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADF,eAKE,QAAC,KAAD,CAAO,IAAP;AAAA,kBACGI,cAAc,gBACf;AAAK,UAAA,KAAK,EAAC,+BAAX;AAAA,iCACI;AAAK,YAAA,KAAK,EAAC,6BAAX;AAAyC,YAAA,IAAI,EAAC,QAA9C;AAAA,mCACA;AAAM,cAAA,KAAK,EAAC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADe,gBAQf,QAAC,eAAD;AACI,UAAA,QAAQ,EAAC,YADb;AAEI,UAAA,IAAI,EAAGF,gBAFX;AAGI,UAAA,OAAO,EAAG9B,cAHd;AAII,UAAA,MAAM,MAJV;AAAA,oBAOQwD,KAAK,iBACL;AAAA,oCACI,QAAC,SAAD,OAAgBA,KAAK,CAACC;AAAtB;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,iBAAD,OAAwBD,KAAK,CAACC;AAA9B;AAAA;AAAA;AAAA;AAAA,oBAFJ,eAGI,QAAC,cAAD,OACKD,KAAK,CAACE,SADX;AACuB,cAAA,UAAU,EAAGlF,iBAAiB,CAACwC,aAAD,CADrD;AACuE,cAAA,aAAa,EAAGT,aADvF;AACuG,cAAA,MAAM,EAAGzB,aAAa;AAD7H;AAAA;AAAA;AAAA;AAAA,oBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AARR;AAAA;AAAA;AAAA;AAAA;AATF;AAAA;AAAA;AAAA;AAAA,cALF;AAAA;AAAA;AAAA;AAAA;AAAA,YAbJ;AAAA,kBADJ;AA4DH;;GA3IQuC,e;;KAAAA,e;AA6IT,eAAeA,eAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport paginationFactory, { PaginationProvider, PaginationListStandalone} from 'react-bootstrap-table2-paginator';\nimport ToolkitProvider, { Search, CSVExport } from 'react-bootstrap-table2-toolkit';\nimport filterFactory, { selectFilter  } from 'react-bootstrap-table2-filter';\nimport { Modal, Tabs, Tab } from \"react-bootstrap\";\n\n//TABLE SETUP\n\n/*\n    columns is used to display specific columns of the data on the table.\n*/\nconst columns = [\n    { dataField: 'name', text: 'Programme', csvText: 'name', sort: true },\n]\n\n/*\n    selectLevelOptions allows you to filter the level table column\n*/\nconst selectLevelOptions = {\n    I: 'I',\n    II: 'II',\n    III: 'III'\n};\n\n/*\n    selectSemesterOptions allows you to filter the semester table column\n*/\nconst selectSemesterOptions = {\n    1: '1',\n    2: '2',\n    3: '3'\n};\n\n/*\n    selectTypeOptions allows you to filter the type table column\n*/\nconst selectTypeOptions = {\n    Core: 'Core',\n    Elective: 'Elective'\n};\n\n/*\n    coursesColumns is used to display specific columns of the data on the courses table in the modal.\n    It also contains code that enables the columns to be filtered.\n*/\nconst coursesColumns = [\n    { \n        dataField: 'level', \n        text: 'Level', \n        sort: true,\n        formatter: cell => selectLevelOptions[cell],\n        filter: selectFilter({\n            options: selectLevelOptions,\n        })\n    },\n    { \n        dataField: 'semester', \n        text: 'Semester', \n        sort: true,\n        formatter: cell => selectSemesterOptions[cell],\n        filter: selectFilter({\n            options: selectSemesterOptions,\n        })\n    },\n    { \n        dataField: 'type', \n        text: 'Type', \n        sort: true,\n        formatter: cell => selectTypeOptions[cell],\n        filter: selectFilter({\n            options: selectTypeOptions,\n        })\n    },\n    { dataField: 'courseCode', text: 'Course Code', sort: true },\n    { dataField: 'courseTitle', text: 'Course Title', sort: true },\n]\n\n/*\n    defaultSorted and coursesSorted sorts the tables is ascending order based on the name column and level column respectively.\n*/\nconst defaultSorted = [{\n    dataField: 'name',\n    order: 'asec'\n}];\n\nconst coursesSorted = [{\n    dataField: 'level',\n    order: 'asec'\n}];\n\n/*\n    options and courseOptions is used to configure the tables pagination.\n*/\nconst options = {\n    custom: true,\n    paginationSize: 5,\n    pageStartIndex: 1,\n    firstPageText: 'First',\n    prePageText: 'Back',\n    nextPageText: 'Next',\n    lastPageText: 'Last',\n    sizePerPage: 8,\n};\n\nconst courseOptions = {\n    sizePerPage: 8,\n    hideSizePerPage: true,\n    hidePageListOnlyOnePage: true\n};\n\nconst { SearchBar, ClearSearchButton  } = Search;\n\n/*\n    ProgrammesTable is a component that displays the programmes in the system in a table.\n*/\nfunction ProgrammesTable({programmes, loading}) {\n\n    /*\n        The show state is used to keep track of the visibility of the view programme courses modal.\n        It's initial state is false.\n        handleShow sets the show state to true, which displays the modal.\n        handleClose sets the show state to false, which closes the modal.\n    */ \n    const [show, setShow] = useState(false);\n    const handleShow = () => setShow(true);\n    const handleClose = () => setShow(false);\n\n    /*\n        The programmeName state is used to keep track of the selected programme name.\n        The programmeCourses state is used to store the courses of the selected programme.\n        The loadingCourses state is used to keep track of getting the courses from the server. \n    */    \n    const [programmeName, setprogrammeName] = useState([]);\n    const [programmeCourses, setProgrammeCourses] = useState([]);\n    const [loadingCourses, setLoadingCourses] = useState(true);\n\n    /*\n        rowEvents is used to get the programme name of the selected row and get the courses of that programme.\n    */      \n    const rowEvents = {\n        onClick: (e, row, rowIndex) => {\n            setprogrammeName(row.name);\n            getProgrammeCourses(row.id);\n        }\n    };    \n\n    /*\n        getProgrammeCourses creates a get request to the server that gets all the courses of this specified programme on the system and stores it in the programmeCourses state.\n    */\n    async function getProgrammeCourses(id) {\n        try {\n            setShow(true);\n            setProgrammeCourses([]);\n            setLoadingCourses(true);\n\n            const res = await fetch(\"/programmes/offered-courses/\" + id, {\n            method: \"GET\",\n        });\n            const parseData = await res.json();\n            setProgrammeCourses(parseData);\n            console.log(parseData.type);\n            setLoadingCourses(false);\n            \n            \n        } catch (err) {\n            console.error(err.message);\n        }\n    }\n\n    /*\n        ToolkitProvider is a wrapper for the BootstrapTable context and the related search, export csv and clear search react contexts.  \n    */ \n    const table = ({ paginationProps, paginationTableProps }) => (\n        <>\n            <ToolkitProvider\n                    keyField=\"name\"\n                    data={ programmes }\n                    columns={ columns }\n                    search\n                >\n                {\n                    props => (\n                    <div>\n                        <SearchBar { ...props.searchProps } />\n                        <ClearSearchButton { ...props.searchProps } />\n                        <BootstrapTable { ...props.baseProps } { ...paginationTableProps } defaultSorted={ defaultSorted } rowEvents={ rowEvents } hover/>\n                    </div>\n                    )\n                }\n            </ToolkitProvider>\n            <PaginationListStandalone { ...paginationProps } />\n        </>\n    );\n\n    return (\n        <>\n            {loading ? (\n            <div class=\"d-flex justify-content-center\">\n                <div class=\"spinner-border text-primary\" role=\"status\">\n                <span class=\"sr-only\">Loading...</span>\n                </div>\n            </div>\n            ) : (\n            <PaginationProvider pagination={paginationFactory(options)}>\n                { table }\n            </PaginationProvider>\n            )}\n\n            <Modal show={show} onHide={handleClose} size=\"xl\">\n              <Modal.Header closeButton>\n                  <Modal.Title>{programmeName}</Modal.Title>\n              </Modal.Header>\n\n              <Modal.Body>\n                {loadingCourses ? (\n                <div class=\"d-flex justify-content-center\">\n                    <div class=\"spinner-border text-primary\" role=\"status\">\n                    <span class=\"sr-only\">Loading...</span>\n                    </div>\n                </div>\n                ) : (\n                \n                <ToolkitProvider\n                    keyField=\"courseCode\"\n                    data={ programmeCourses }\n                    columns={ coursesColumns }\n                    search\n                    >\n                    {\n                        props => (\n                        <div>\n                            <SearchBar { ...props.searchProps } />\n                            <ClearSearchButton { ...props.searchProps } />\n                            <BootstrapTable\n                            { ...props.baseProps } pagination={ paginationFactory(courseOptions) } defaultSorted={ coursesSorted } filter={ filterFactory() }\n                            />\n                            \n                        </div>\n                        )\n                    }\n                </ToolkitProvider>\n                )}                           \n              </Modal.Body>\n                \n            </Modal>  \n\n            \n\n\n\n        </>\n    );\n\n\n}\n\nexport default ProgrammesTable;\n"]},"metadata":{},"sourceType":"module"}