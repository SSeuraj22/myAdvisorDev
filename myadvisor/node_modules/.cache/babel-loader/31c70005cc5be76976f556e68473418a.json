{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/ubuntu/myAdvisorDev/myadvisor/src/components/Staff/StudentsTable.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport paginationFactory, { PaginationProvider, PaginationListStandalone } from 'react-bootstrap-table2-paginator';\nimport ToolkitProvider, { Search, CSVExport } from 'react-bootstrap-table2-toolkit';\nimport { Modal, Tabs, Tab } from \"react-bootstrap\"; //TABLE SETUP\n\n/*\n    columns, coursesColumns and inprogressCoursesColumns are used to display specific columns of the data on the tables.\n*/\n\nconst columns = [{\n  dataField: 'studentId',\n  text: 'Student ID',\n  csvText: 'Student ID',\n  sort: true\n}, {\n  dataField: 'name',\n  text: 'Name',\n  csvText: 'Name',\n  sort: true\n}, {\n  dataField: 'gpa',\n  text: 'GPA',\n  csvText: 'GPA',\n  sort: true\n}, {\n  dataField: 'degree',\n  text: 'Degree',\n  csvText: 'Degree',\n  sort: true\n}, {\n  dataField: 'credits',\n  text: 'Credits',\n  csvText: 'Credits',\n  sort: true\n}];\nconst coursesColumns = [{\n  dataField: 'courseCode',\n  text: 'Course Code',\n  sort: true\n}, {\n  dataField: 'courseTitle',\n  text: 'Course Title',\n  sort: true\n}, {\n  dataField: 'grade',\n  text: 'Grade',\n  sort: true\n}];\nconst inprogressCoursesColumns = [{\n  dataField: 'courseCode',\n  text: 'Course Code',\n  sort: true\n}, {\n  dataField: 'courseTitle',\n  text: 'Course Title',\n  sort: true\n}];\n/*\n    defaultSorted sorts the table is ascending order based on the name column.\n*/\n\nconst defaultSorted = [{\n  dataField: 'name',\n  order: 'asc'\n}];\n/*\n    options and courseOptions is used to configure the table pagination.\n*/\n\nconst options = {\n  custom: true,\n  paginationSize: 5,\n  pageStartIndex: 1,\n  firstPageText: 'First',\n  prePageText: 'Back',\n  nextPageText: 'Next',\n  lastPageText: 'Last',\n  sizePerPage: 8\n};\nconst courseOptions = {\n  sizePerPage: 8,\n  hideSizePerPage: true,\n  hidePageListOnlyOnePage: true\n};\nconst {\n  SearchBar,\n  ClearSearchButton\n} = Search;\nconst {\n  ExportCSVButton\n} = CSVExport;\n/*\n    StudentsTable is a component that displays the students in the system in a table.\n*/\n\nfunction StudentsTable({\n  students,\n  loading\n}) {\n  _s();\n\n  /*\n      The show state is used to keep track of the visibility of the student details modal.\n      It's initial state is false.\n      handleShow sets the show state to true, which displays the modal.\n      handleShow sets the show state to false, which closes the modal.\n  */\n  const [show, setShow] = useState(false);\n\n  const handleShow = () => setShow(true);\n\n  const handleClose = () => setShow(false);\n  /*\n      The studentName state is used to store the currently selected student's name.\n      The studentCourses state is used to store the currently selected student's courses.\n      The completedCourses state is used to store the currently selected student's completed courses.\n      The inprogressCourses state is used to store the currently selected student's inprogress courses.        \n  */\n\n\n  const [studentName, setStudentName] = useState([]);\n  const [studentCourses, setStudentCourses] = useState([]);\n  const [completedCourses, setCompletedCourses] = useState([]);\n  const [inprogressCourses, setInprogressCourses] = useState([]);\n  /*\n      rowEvents is used to get the currently selected student's name and store it in the studentName state.\n      It also gets the courses of that student.\n  */\n\n  const rowEvents = {\n    onClick: (e, row, rowIndex) => {\n      setStudentName(row.name);\n      getStudentCourses(row.studentId);\n    }\n  };\n  /*\n      getStudentCourses creates a get request to the server that gets all the courses of this specified student.\n      It also used the getCompleted and getInprogress functions to separate the courses based on if they are inprogress or completed.\n  */\n\n  async function getStudentCourses(studentId) {\n    try {\n      const res = await fetch(\"/transcript/courses/viewAll/\" + studentId, {\n        method: \"GET\"\n      });\n      const parseData = await res.json();\n      setStudentCourses(parseData);\n      getCompleted(parseData);\n      getInprogress(parseData);\n      setShow(true);\n    } catch (err) {\n      console.error(err.message);\n    }\n  }\n\n  function getCompleted(data) {\n    let arr = [];\n\n    for (var key in data) {\n      if (data[key].grade != 'IP') {\n        arr.push(data[key]);\n      }\n    }\n\n    setCompletedCourses(arr);\n  }\n\n  function getInprogress(data) {\n    let arr = [];\n\n    for (var key in data) {\n      if (data[key].grade == 'IP') {\n        arr.push(data[key]);\n      }\n    }\n\n    setInprogressCourses(arr);\n  }\n\n  useEffect(() => {//getStudentCourses();\n  }, []);\n  /*\n      ToolkitProvider is a wrapper for the BootstrapTable context and the related search, export csv and clear search react contexts.  \n  */\n\n  const table = ({\n    paginationProps,\n    paginationTableProps\n  }) => /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ToolkitProvider, {\n      keyField: \"studentID\",\n      data: students,\n      columns: columns,\n      search: true,\n      exportCSV: {\n        fileName: 'students.csv'\n      },\n      children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(SearchBar, { ...props.searchProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(ClearSearchButton, { ...props.searchProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(ExportCSVButton, { ...props.csvProps,\n          children: \"Export CSV\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(BootstrapTable, { ...props.baseProps,\n          ...paginationTableProps,\n          defaultSorted: defaultSorted,\n          rowEvents: rowEvents,\n          hover: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PaginationListStandalone, { ...paginationProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"d-flex justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"spinner-border text-primary\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          class: \"sr-only\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(PaginationProvider, {\n      pagination: paginationFactory(options),\n      children: table\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: handleClose,\n      size: \"lg\",\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: studentName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Tabs, {\n          defaultActiveKey: \"completed\",\n          id: \"uncontrolled-tab-example\",\n          children: [/*#__PURE__*/_jsxDEV(Tab, {\n            eventKey: \"completed\",\n            title: \"Completed\",\n            children: /*#__PURE__*/_jsxDEV(ToolkitProvider, {\n              keyField: \"courseCode\",\n              data: completedCourses,\n              columns: coursesColumns,\n              search: true,\n              children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(SearchBar, { ...props.searchProps\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(BootstrapTable, { ...props.baseProps,\n                  pagination: paginationFactory(courseOptions),\n                  hover: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            eventKey: \"incomplete\",\n            title: \"Inprogress\",\n            children: /*#__PURE__*/_jsxDEV(ToolkitProvider, {\n              keyField: \"courseCode\",\n              data: inprogressCourses,\n              columns: inprogressCoursesColumns,\n              search: true,\n              children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(SearchBar, { ...props.searchProps\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(BootstrapTable, { ...props.baseProps,\n                  pagination: paginationFactory(courseOptions),\n                  hover: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(StudentsTable, \"cMCN7pkLBgK0238sYyRiKo0P5jY=\");\n\n_c = StudentsTable;\nexport default StudentsTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"StudentsTable\");","map":{"version":3,"sources":["/home/ubuntu/myAdvisorDev/myadvisor/src/components/Staff/StudentsTable.js"],"names":["React","useState","useEffect","BootstrapTable","paginationFactory","PaginationProvider","PaginationListStandalone","ToolkitProvider","Search","CSVExport","Modal","Tabs","Tab","columns","dataField","text","csvText","sort","coursesColumns","inprogressCoursesColumns","defaultSorted","order","options","custom","paginationSize","pageStartIndex","firstPageText","prePageText","nextPageText","lastPageText","sizePerPage","courseOptions","hideSizePerPage","hidePageListOnlyOnePage","SearchBar","ClearSearchButton","ExportCSVButton","StudentsTable","students","loading","show","setShow","handleShow","handleClose","studentName","setStudentName","studentCourses","setStudentCourses","completedCourses","setCompletedCourses","inprogressCourses","setInprogressCourses","rowEvents","onClick","e","row","rowIndex","name","getStudentCourses","studentId","res","fetch","method","parseData","json","getCompleted","getInprogress","err","console","error","message","data","arr","key","grade","push","table","paginationProps","paginationTableProps","fileName","props","searchProps","csvProps","baseProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport paginationFactory, { PaginationProvider, PaginationListStandalone} from 'react-bootstrap-table2-paginator';\nimport ToolkitProvider, { Search, CSVExport } from 'react-bootstrap-table2-toolkit';\nimport { Modal, Tabs, Tab } from \"react-bootstrap\";\n\n//TABLE SETUP\n\n/*\n    columns, coursesColumns and inprogressCoursesColumns are used to display specific columns of the data on the tables.\n*/\nconst columns = [\n    { dataField: 'studentId', text: 'Student ID', csvText: 'Student ID', sort: true },\n    { dataField: 'name', text: 'Name', csvText: 'Name', sort: true },\n    { dataField: 'gpa', text: 'GPA', csvText: 'GPA', sort: true },\n    { dataField: 'degree', text: 'Degree', csvText: 'Degree', sort: true },\n    { dataField: 'credits', text: 'Credits', csvText: 'Credits', sort: true },\n]\n\nconst coursesColumns = [\n    { dataField: 'courseCode', text: 'Course Code', sort: true },\n    { dataField: 'courseTitle', text: 'Course Title', sort: true },\n    { dataField: 'grade', text: 'Grade', sort: true },\n]\n\nconst inprogressCoursesColumns = [\n    { dataField: 'courseCode', text: 'Course Code', sort: true },\n    { dataField: 'courseTitle', text: 'Course Title', sort: true },\n]\n\n/*\n    defaultSorted sorts the table is ascending order based on the name column.\n*/\nconst defaultSorted = [{\n    dataField: 'name',\n    order: 'asc'\n}];\n\n/*\n    options and courseOptions is used to configure the table pagination.\n*/\nconst options = {\n    custom: true,\n    paginationSize: 5,\n    pageStartIndex: 1,\n    firstPageText: 'First',\n    prePageText: 'Back',\n    nextPageText: 'Next',\n    lastPageText: 'Last',\n    sizePerPage: 8,\n};\n\nconst courseOptions = {\n    sizePerPage: 8,\n    hideSizePerPage: true,\n    hidePageListOnlyOnePage: true\n};\n\nconst { SearchBar, ClearSearchButton  } = Search;\nconst { ExportCSVButton } = CSVExport;\n\n/*\n    StudentsTable is a component that displays the students in the system in a table.\n*/\nfunction StudentsTable({students, loading}) {\n    /*\n        The show state is used to keep track of the visibility of the student details modal.\n        It's initial state is false.\n        handleShow sets the show state to true, which displays the modal.\n        handleShow sets the show state to false, which closes the modal.\n    */ \n    const [show, setShow] = useState(false);\n    const handleShow = () => setShow(true);\n    const handleClose = () => setShow(false);\n\n    /*\n        The studentName state is used to store the currently selected student's name.\n        The studentCourses state is used to store the currently selected student's courses.\n        The completedCourses state is used to store the currently selected student's completed courses.\n        The inprogressCourses state is used to store the currently selected student's inprogress courses.        \n    */ \n    const [studentName, setStudentName] = useState([]);\n    const [studentCourses, setStudentCourses] = useState([]);\n    const [completedCourses, setCompletedCourses] = useState([]);\n    const [inprogressCourses, setInprogressCourses] = useState([]);\n\n    /*\n        rowEvents is used to get the currently selected student's name and store it in the studentName state.\n        It also gets the courses of that student.\n    */\n    const rowEvents = {\n        onClick: (e, row, rowIndex) => {\n            setStudentName(row.name);\n            getStudentCourses(row.studentId);\n        }\n    };\n\n    /*\n        getStudentCourses creates a get request to the server that gets all the courses of this specified student.\n        It also used the getCompleted and getInprogress functions to separate the courses based on if they are inprogress or completed.\n    */\n    async function getStudentCourses(studentId) {\n        try {\n            const res = await fetch(\"/transcript/courses/viewAll/\" + studentId, {\n            method: \"GET\",\n        });\n            const parseData = await res.json();\n            setStudentCourses(parseData);\n            getCompleted(parseData);\n            getInprogress(parseData);\n            setShow(true);\n            \n        } catch (err) {\n            console.error(err.message);\n        }\n    }\n\n    function getCompleted(data){\n        let arr = []\n\n        for (var key in data){\n            if(data[key].grade != 'IP'){\n                arr.push(data[key])\n            }\n        }\n\n        setCompletedCourses(arr);\n    }\n\n    function getInprogress(data){\n        let arr = []\n\n        for (var key in data){\n            if(data[key].grade == 'IP'){\n                arr.push(data[key])\n            }\n        }\n\n        setInprogressCourses(arr);\n    }\n\n    useEffect(() => {\n        //getStudentCourses();\n    }, []);   \n     \n\n    /*\n        ToolkitProvider is a wrapper for the BootstrapTable context and the related search, export csv and clear search react contexts.  \n    */ \n    const table = ({ paginationProps, paginationTableProps }) => (\n        <>\n            <ToolkitProvider\n                    keyField=\"studentID\"\n                    data={ students }\n                    columns={ columns }\n                    search\n                    exportCSV={{\n                        fileName: 'students.csv',\n                    }}\n                >\n                {\n                    props => (\n                    <div>\n                        <SearchBar { ...props.searchProps } />\n                        <ClearSearchButton { ...props.searchProps } />\n                        <ExportCSVButton { ...props.csvProps }>Export CSV</ExportCSVButton>\n                        <BootstrapTable { ...props.baseProps } { ...paginationTableProps } defaultSorted={ defaultSorted } rowEvents={ rowEvents } hover/>\n                    </div>\n                    )\n                }\n            </ToolkitProvider>\n            <PaginationListStandalone { ...paginationProps } />\n        </>\n    );\n\n    return (\n        <>\n            {loading ? (\n            <div class=\"d-flex justify-content-center\">\n                <div class=\"spinner-border text-primary\" role=\"status\">\n                <span class=\"sr-only\">Loading...</span>\n                </div>\n            </div>\n            ) : (\n            <PaginationProvider pagination={paginationFactory(options)}>\n                { table }\n            </PaginationProvider>\n            )}\n\n            <Modal show={show} onHide={handleClose} size=\"lg\">\n              <Modal.Header closeButton>\n                  <Modal.Title>{studentName}</Modal.Title>\n              </Modal.Header>\n\n              <Modal.Body>\n                <Tabs defaultActiveKey=\"completed\" id=\"uncontrolled-tab-example\">\n                    <Tab eventKey=\"completed\" title=\"Completed\">\n                        <ToolkitProvider\n                        keyField=\"courseCode\"\n                        data={ completedCourses }\n                        columns={ coursesColumns }\n                        search\n                        >\n                        {\n                            props => (\n                            <div>\n                                <br/>\n                                <SearchBar { ...props.searchProps } />\n                                <BootstrapTable\n                                { ...props.baseProps } pagination={ paginationFactory(courseOptions) } hover\n                                />\n                            </div>\n                            )\n                        }\n                        </ToolkitProvider>                           \n                    </Tab>\n                    <Tab eventKey=\"incomplete\" title=\"Inprogress\">\n                        <ToolkitProvider\n                        keyField=\"courseCode\"\n                        data={ inprogressCourses }\n                        columns={ inprogressCoursesColumns }\n                        search\n                        >\n                        {\n                            props => (\n                            <div>\n                                <br/>\n                                <SearchBar { ...props.searchProps } />\n                                <BootstrapTable\n                                { ...props.baseProps } pagination={ paginationFactory(courseOptions) } hover\n                                />\n                            </div>\n                            )\n                        }\n                        </ToolkitProvider>  \n                    </Tab>\n                </Tabs>\n              </Modal.Body>\n          </Modal>            \n        </>\n    );\n}\n\nexport default StudentsTable;\n\n"]},"metadata":{},"sourceType":"module"}