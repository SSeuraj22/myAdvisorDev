"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _reactRedux = require("react-redux");

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireWildcard(require("react"));

var _simpleUpdateIn = _interopRequireDefault(require("simple-update-in"));

var _createCustomEvent = _interopRequireDefault(require("../utils/createCustomEvent"));

var _ErrorBoundary = _interopRequireDefault(require("./utils/ErrorBoundary"));

var _getAllLocalizedStrings = _interopRequireDefault(require("../localization/getAllLocalizedStrings"));

var _isObject = _interopRequireDefault(require("../utils/isObject"));

var _normalizeLanguage = _interopRequireDefault(require("../utils/normalizeLanguage"));

var _PrecompiledGlobalize = _interopRequireDefault(require("../external/PrecompiledGlobalize"));

var _botframeworkWebchatCore = require("botframework-webchat-core");

var _createDefaultCardActionMiddleware = _interopRequireDefault(require("./middleware/createDefaultCardActionMiddleware"));

var _createDefaultGroupActivitiesMiddleware = _interopRequireDefault(require("./middleware/createDefaultGroupActivitiesMiddleware"));

var _defaultSelectVoice = _interopRequireDefault(require("./internal/defaultSelectVoice"));

var _mapMap = _interopRequireDefault(require("../utils/mapMap"));

var _observableToPromise = _interopRequireDefault(require("./utils/observableToPromise"));

var _Tracker = _interopRequireDefault(require("./internal/Tracker"));

var _WebChatReduxContext = _interopRequireWildcard(require("./internal/WebChatReduxContext"));

var _WebChatAPIContext = _interopRequireDefault(require("./internal/WebChatAPIContext"));

var _applyMiddleware = _interopRequireWildcard(require("./middleware/applyMiddleware"));

var _normalizeStyleOptions = _interopRequireDefault(require("../normalizeStyleOptions"));

var _patchStyleOptionsFromDeprecatedProps = _interopRequireDefault(require("../patchStyleOptionsFromDeprecatedProps"));

var _singleToArray = _interopRequireDefault(require("./utils/singleToArray"));

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

// List of Redux actions factory we are hoisting as Web Chat functions
var DISPATCHERS = {
  clearSuggestedActions: _botframeworkWebchatCore.clearSuggestedActions,
  dismissNotification: _botframeworkWebchatCore.dismissNotification,
  emitTypingIndicator: _botframeworkWebchatCore.emitTypingIndicator,
  markActivity: _botframeworkWebchatCore.markActivity,
  postActivity: _botframeworkWebchatCore.postActivity,
  sendEvent: _botframeworkWebchatCore.sendEvent,
  sendFiles: _botframeworkWebchatCore.sendFiles,
  sendMessage: _botframeworkWebchatCore.sendMessage,
  sendMessageBack: _botframeworkWebchatCore.sendMessageBack,
  sendPostBack: _botframeworkWebchatCore.sendPostBack,
  setDictateInterims: _botframeworkWebchatCore.setDictateInterims,
  setDictateState: _botframeworkWebchatCore.setDictateState,
  setNotification: _botframeworkWebchatCore.setNotification,
  setSendBox: _botframeworkWebchatCore.setSendBox,
  setSendTimeout: _botframeworkWebchatCore.setSendTimeout,
  startDictate: _botframeworkWebchatCore.startDictate,
  startSpeakingActivity: _botframeworkWebchatCore.startSpeakingActivity,
  stopDictate: _botframeworkWebchatCore.stopDictate,
  stopSpeakingActivity: _botframeworkWebchatCore.stopSpeakingActivity,
  submitSendBox: _botframeworkWebchatCore.submitSendBox
};

function createCardActionContext(_ref) {
  var cardActionMiddleware = _ref.cardActionMiddleware,
      directLine = _ref.directLine,
      dispatch = _ref.dispatch;

  var runMiddleware = _applyMiddleware.default.apply(void 0, ['card action'].concat(_toConsumableArray((0, _singleToArray.default)(cardActionMiddleware)), [(0, _createDefaultCardActionMiddleware.default)()]))({
    dispatch: dispatch
  });

  return {
    onCardAction: function onCardAction(cardAction) {
      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          target = _ref2.target;

      return runMiddleware({
        cardAction: cardAction,
        getSignInUrl: cardAction.type === 'signin' ? function () {
          var value = cardAction.value;

          if (directLine.getSessionId) {
            /**
             * @todo TODO: [P3] We should change this one to async/await.
             *       This is the first place in this project to use async.
             *       Thus, we need to add @babel/plugin-transform-runtime and @babel/runtime.
             */
            return (0, _observableToPromise.default)(directLine.getSessionId()).then(function (sessionId) {
              return "".concat(value).concat(encodeURIComponent("&code_challenge=".concat(sessionId)));
            });
          }

          console.warn('botframework-webchat: OAuth is not supported on this Direct Line adapter.');
          return value;
        } : null,
        target: target
      });
    }
  };
}

function createGroupActivitiesContext(_ref3) {
  var groupActivitiesMiddleware = _ref3.groupActivitiesMiddleware,
      groupTimestamp = _ref3.groupTimestamp;

  var runMiddleware = _applyMiddleware.default.apply(void 0, ['group activities'].concat(_toConsumableArray((0, _singleToArray.default)(groupActivitiesMiddleware)), [(0, _createDefaultGroupActivitiesMiddleware.default)({
    groupTimestamp: groupTimestamp
  })]));

  return {
    groupActivities: runMiddleware({})
  };
}

function mergeStringsOverrides(localizedStrings, language, overrideLocalizedStrings) {
  if (!overrideLocalizedStrings) {
    return localizedStrings;
  } else if (typeof overrideLocalizedStrings === 'function') {
    var merged = overrideLocalizedStrings(localizedStrings, language);

    if (!(0, _isObject.default)(merged)) {
      throw new Error('botframework-webchat: overrideLocalizedStrings function must return an object.');
    }

    return merged;
  }

  if (!(0, _isObject.default)(overrideLocalizedStrings)) {
    throw new Error('botframework-webchat: overrideLocalizedStrings must be either a function, an object, or falsy.');
  }

  return _objectSpread(_objectSpread({}, localizedStrings), overrideLocalizedStrings);
}

var Composer = function Composer(_ref4) {
  var activityMiddleware = _ref4.activityMiddleware,
      activityRenderer = _ref4.activityRenderer,
      activityStatusMiddleware = _ref4.activityStatusMiddleware,
      activityStatusRenderer = _ref4.activityStatusRenderer,
      attachmentMiddleware = _ref4.attachmentMiddleware,
      attachmentForScreenReaderMiddleware = _ref4.attachmentForScreenReaderMiddleware,
      attachmentRenderer = _ref4.attachmentRenderer,
      avatarMiddleware = _ref4.avatarMiddleware,
      avatarRenderer = _ref4.avatarRenderer,
      cardActionMiddleware = _ref4.cardActionMiddleware,
      children = _ref4.children,
      dir = _ref4.dir,
      directLine = _ref4.directLine,
      disabled = _ref4.disabled,
      downscaleImageToDataURL = _ref4.downscaleImageToDataURL,
      grammars = _ref4.grammars,
      groupActivitiesMiddleware = _ref4.groupActivitiesMiddleware,
      groupTimestamp = _ref4.groupTimestamp,
      internalErrorBoxClass = _ref4.internalErrorBoxClass,
      locale = _ref4.locale,
      onTelemetry = _ref4.onTelemetry,
      overrideLocalizedStrings = _ref4.overrideLocalizedStrings,
      renderMarkdown = _ref4.renderMarkdown,
      selectVoice = _ref4.selectVoice,
      sendTimeout = _ref4.sendTimeout,
      sendTypingIndicator = _ref4.sendTypingIndicator,
      styleOptions = _ref4.styleOptions,
      toastMiddleware = _ref4.toastMiddleware,
      toastRenderer = _ref4.toastRenderer,
      typingIndicatorMiddleware = _ref4.typingIndicatorMiddleware,
      typingIndicatorRenderer = _ref4.typingIndicatorRenderer,
      userID = _ref4.userID,
      username = _ref4.username;
  var dispatch = (0, _WebChatReduxContext.useDispatch)();
  var telemetryDimensionsRef = (0, _react.useRef)({});
  var patchedDir = (0, _react.useMemo)(function () {
    return dir === 'ltr' || dir === 'rtl' ? dir : 'auto';
  }, [dir]);
  var patchedGrammars = (0, _react.useMemo)(function () {
    return grammars || [];
  }, [grammars]);
  var patchedStyleOptions = (0, _react.useMemo)(function () {
    return (0, _normalizeStyleOptions.default)((0, _patchStyleOptionsFromDeprecatedProps.default)(styleOptions, {
      groupTimestamp: groupTimestamp,
      sendTimeout: sendTimeout
    }));
  }, [groupTimestamp, sendTimeout, styleOptions]);
  (0, _react.useEffect)(function () {
    dispatch((0, _botframeworkWebchatCore.setLanguage)(locale));
  }, [dispatch, locale]);
  (0, _react.useEffect)(function () {
    typeof sendTimeout === 'number' && dispatch((0, _botframeworkWebchatCore.setSendTimeout)(sendTimeout));
  }, [dispatch, sendTimeout]);
  (0, _react.useEffect)(function () {
    dispatch((0, _botframeworkWebchatCore.setSendTypingIndicator)(!!sendTypingIndicator));
  }, [dispatch, sendTypingIndicator]);
  (0, _react.useEffect)(function () {
    dispatch((0, _botframeworkWebchatCore.connect)({
      directLine: directLine,
      userID: userID,
      username: username
    }));
    return function () {
      /**
       * @todo TODO: [P3] disconnect() is an async call (pending -> fulfilled), we need to wait, or change it to reconnect()
       */
      dispatch((0, _botframeworkWebchatCore.disconnect)());
    };
  }, [dispatch, directLine, userID, username]);
  var cardActionContext = (0, _react.useMemo)(function () {
    return createCardActionContext({
      cardActionMiddleware: cardActionMiddleware,
      directLine: directLine,
      dispatch: dispatch
    });
  }, [cardActionMiddleware, directLine, dispatch]);
  var patchedSelectVoice = (0, _react.useMemo)(function () {
    return selectVoice || _defaultSelectVoice.default.bind(null, {
      language: locale
    });
  }, [locale, selectVoice]);
  var groupActivitiesContext = (0, _react.useMemo)(function () {
    return createGroupActivitiesContext({
      groupActivitiesMiddleware: groupActivitiesMiddleware,
      groupTimestamp: patchedStyleOptions.groupTimestamp
    });
  }, [groupActivitiesMiddleware, patchedStyleOptions.groupTimestamp]);
  var hoistedDispatchers = (0, _react.useMemo)(function () {
    return (0, _mapMap.default)(DISPATCHERS, function (dispatcher) {
      return function () {
        return dispatch(dispatcher.apply(void 0, arguments));
      };
    });
  }, [dispatch]);
  var patchedLocalizedStrings = (0, _react.useMemo)(function () {
    return mergeStringsOverrides((0, _getAllLocalizedStrings.default)()[(0, _normalizeLanguage.default)(locale)], locale, overrideLocalizedStrings);
  }, [locale, overrideLocalizedStrings]);
  var localizedGlobalize = (0, _react.useMemo)(function () {
    var _ref5 = patchedLocalizedStrings || {},
        GLOBALIZE = _ref5.GLOBALIZE,
        GLOBALIZE_LANGUAGE = _ref5.GLOBALIZE_LANGUAGE;

    return GLOBALIZE || GLOBALIZE_LANGUAGE && (0, _PrecompiledGlobalize.default)(GLOBALIZE_LANGUAGE) || (0, _PrecompiledGlobalize.default)('en');
  }, [patchedLocalizedStrings]);
  var trackDimension = (0, _react.useCallback)(function (name, data) {
    if (!name || typeof name !== 'string') {
      return console.warn('botframework-webchat: Telemetry dimension name must be a string.');
    }

    var type = _typeof(data);

    if (type !== 'string' && type !== 'undefined') {
      return console.warn('botframework-webchat: Telemetry dimension data must be a string or undefined.');
    }

    telemetryDimensionsRef.current = (0, _simpleUpdateIn.default)(telemetryDimensionsRef.current, [name], type === 'undefined' ? data : function () {
      return data;
    });
  }, [telemetryDimensionsRef]);
  var patchedActivityRenderer = (0, _react.useMemo)(function () {
    activityRenderer && console.warn('Web Chat: "activityRenderer" is deprecated and will be removed on 2022-06-15, please use "activityMiddleware" instead.');
    return activityRenderer || _applyMiddleware.forRenderer.apply(void 0, ['activity', {
      strict: false
    }].concat(_toConsumableArray((0, _singleToArray.default)(activityMiddleware)), [function () {
      return function () {
        return function (_ref6) {
          var activity = _ref6.activity;

          if (activity) {
            throw new Error("No renderer for activity of type \"".concat(activity.type, "\""));
          } else {
            throw new Error('No activity to render');
          }
        };
      };
    }]))({});
  }, [activityMiddleware, activityRenderer]);
  var patchedActivityStatusRenderer = (0, _react.useMemo)(function () {
    activityStatusRenderer && console.warn('Web Chat: "activityStatusRenderer" is deprecated and will be removed on 2022-06-15, please use "activityStatusMiddleware" instead.');
    return activityStatusRenderer || _applyMiddleware.forRenderer.apply(void 0, ['activity status', {
      strict: false
    }].concat(_toConsumableArray((0, _singleToArray.default)(activityStatusMiddleware)), [function () {
      return function () {
        return function () {
          return false;
        };
      };
    }]))({});
  }, [activityStatusMiddleware, activityStatusRenderer]);
  var patchedAttachmentForScreenReaderRenderer = (0, _react.useMemo)(function () {
    return _applyMiddleware.forRenderer.apply(void 0, ['attachment for screen reader', {
      strict: true
    }].concat(_toConsumableArray((0, _singleToArray.default)(attachmentForScreenReaderMiddleware)), [function () {
      return function () {
        return function (_ref7) {
          var attachment = _ref7.attachment;

          if (attachment) {
            console.warn("No renderer for attachment for screen reader of type \"".concat(attachment.contentType, "\""));
            return false;
          }

          return function () {
            /**
             * @todo TODO: [P4] Might be able to throw without returning a function -- investigate and possibly fix
             */
            throw new Error('No attachment to render');
          };
        };
      };
    }]))({});
  }, [attachmentForScreenReaderMiddleware]);
  var patchedAttachmentRenderer = (0, _react.useMemo)(function () {
    if (attachmentRenderer) {
      console.warn('Web Chat: "attachmentRenderer" is deprecated and will be removed on 2022-06-15, please use "attachmentMiddleware" instead.');
      return attachmentRenderer;
    } // Attachment renderer


    return _applyMiddleware.forLegacyRenderer.apply(void 0, ['attachment'].concat(_toConsumableArray((0, _singleToArray.default)(attachmentMiddleware)), [function () {
      return function () {
        return function (_ref8) {
          var attachment = _ref8.attachment;

          if (attachment) {
            throw new Error("No renderer for attachment of type \"".concat(attachment.contentType, "\""));
          } else {
            throw new Error('No attachment to render');
          }
        };
      };
    }]))({});
  }, [attachmentMiddleware, attachmentRenderer]);
  var patchedAvatarRenderer = (0, _react.useMemo)(function () {
    avatarRenderer && console.warn('Web Chat: "avatarRenderer" is deprecated and will be removed on 2022-06-15, please use "avatarMiddleware" instead.');
    return avatarRenderer || _applyMiddleware.forRenderer.apply(void 0, ['avatar', {
      strict: false
    }].concat(_toConsumableArray((0, _singleToArray.default)(avatarMiddleware)), [function () {
      return function () {
        return function () {
          return false;
        };
      };
    }]))({});
  }, [avatarMiddleware, avatarRenderer]);
  var patchedToastRenderer = (0, _react.useMemo)(function () {
    toastRenderer && console.warn('Web Chat: "toastRenderer" is deprecated and will be removed on 2022-06-15, please use "toastMiddleware" instead.');
    return toastRenderer || _applyMiddleware.forRenderer.apply(void 0, ['toast', {
      strict: false
    }].concat(_toConsumableArray((0, _singleToArray.default)(toastMiddleware)), [function () {
      return function () {
        return function (_ref9) {
          var notification = _ref9.notification;

          if (notification) {
            throw new Error("No renderer for notification of type \"".concat(notification.contentType, "\""));
          } else {
            throw new Error('No notification to render');
          }
        };
      };
    }]))({});
  }, [toastMiddleware, toastRenderer]);
  var patchedTypingIndicatorRenderer = (0, _react.useMemo)(function () {
    typingIndicatorRenderer && console.warn('Web Chat: "typingIndicatorRenderer" is deprecated and will be removed on 2022-06-15, please use "typingIndicatorMiddleware" instead.');
    return typingIndicatorRenderer || _applyMiddleware.forRenderer.apply(void 0, ['typing indicator', {
      strict: false
    }].concat(_toConsumableArray((0, _singleToArray.default)(typingIndicatorMiddleware)), [function () {
      return function () {
        return function () {
          return false;
        };
      };
    }]))({});
  }, [typingIndicatorMiddleware, typingIndicatorRenderer]);
  /**
   * This is a heavy function, and it is expected to be only called when there is a need to recreate business logic, e.g.
   * - User ID changed, causing all send* functions to be updated
   * - send
   * @todo TODO: [P3] We should think about if we allow the user to change onSendBoxValueChanged/sendBoxValue, e.g.
   * 1. Turns text into UPPERCASE
   * 2. Filter out profanity
   * @todo TODO: [P4] Revisit all members of context
   *       This context should consist of members that are not in the Redux store
   *       i.e. members that are not interested in other types of UIs
   */

  var context = (0, _react.useMemo)(function () {
    return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, cardActionContext), groupActivitiesContext), hoistedDispatchers), {}, {
      activityRenderer: patchedActivityRenderer,
      activityStatusRenderer: patchedActivityStatusRenderer,
      attachmentForScreenReaderRenderer: patchedAttachmentForScreenReaderRenderer,
      attachmentRenderer: patchedAttachmentRenderer,
      avatarRenderer: patchedAvatarRenderer,
      dir: patchedDir,
      directLine: directLine,
      disabled: disabled,
      downscaleImageToDataURL: downscaleImageToDataURL,
      grammars: patchedGrammars,
      internalErrorBoxClass: internalErrorBoxClass,
      language: locale,
      localizedGlobalizeState: [localizedGlobalize],
      localizedStrings: patchedLocalizedStrings,
      onTelemetry: onTelemetry,
      renderMarkdown: renderMarkdown,
      selectVoice: patchedSelectVoice,
      sendTypingIndicator: sendTypingIndicator,
      styleOptions: patchedStyleOptions,
      telemetryDimensionsRef: telemetryDimensionsRef,
      toastRenderer: patchedToastRenderer,
      trackDimension: trackDimension,
      typingIndicatorRenderer: patchedTypingIndicatorRenderer,
      userID: userID,
      username: username
    });
  }, [cardActionContext, directLine, disabled, downscaleImageToDataURL, groupActivitiesContext, hoistedDispatchers, internalErrorBoxClass, locale, localizedGlobalize, onTelemetry, patchedActivityRenderer, patchedActivityStatusRenderer, patchedAttachmentForScreenReaderRenderer, patchedAttachmentRenderer, patchedAvatarRenderer, patchedDir, patchedGrammars, patchedLocalizedStrings, patchedSelectVoice, patchedStyleOptions, patchedToastRenderer, patchedTypingIndicatorRenderer, renderMarkdown, sendTypingIndicator, telemetryDimensionsRef, trackDimension, userID, username]);
  return /*#__PURE__*/_react.default.createElement(_WebChatAPIContext.default.Provider, {
    value: context
  }, typeof children === 'function' ? children(context) : children, onTelemetry && /*#__PURE__*/_react.default.createElement(_Tracker.default, null));
}; // We will create a Redux store if it was not passed in


var ComposeWithStore = function ComposeWithStore(_ref10) {
  var internalRenderErrorBox = _ref10.internalRenderErrorBox,
      onTelemetry = _ref10.onTelemetry,
      store = _ref10.store,
      props = _objectWithoutProperties(_ref10, ["internalRenderErrorBox", "onTelemetry", "store"]);

  var _useState = (0, _react.useState)(),
      _useState2 = _slicedToArray(_useState, 2),
      error = _useState2[0],
      setError = _useState2[1];

  var handleError = (0, _react.useCallback)(function (error) {
    console.error('botframework-webchat: Uncaught exception', {
      error: error
    });
    onTelemetry && onTelemetry((0, _createCustomEvent.default)('exception', {
      error: error,
      fatal: true
    }));
    setError(error);
  }, [onTelemetry, setError]);
  var memoizedStore = (0, _react.useMemo)(function () {
    return store || (0, _botframeworkWebchatCore.createStore)();
  }, [store]);
  return error ? !!internalRenderErrorBox && internalRenderErrorBox({
    error: error,
    type: 'uncaught exception'
  }) : /*#__PURE__*/_react.default.createElement(_ErrorBoundary.default, {
    onError: handleError
  }, /*#__PURE__*/_react.default.createElement(_reactRedux.Provider, {
    context: _WebChatReduxContext.default,
    store: memoizedStore
  }, /*#__PURE__*/_react.default.createElement(Composer, _extends({
    internalRenderErrorBox: internalRenderErrorBox,
    onTelemetry: onTelemetry
  }, props))));
};

ComposeWithStore.defaultProps = {
  internalRenderErrorBox: undefined,
  onTelemetry: undefined,
  store: undefined
};
ComposeWithStore.propTypes = {
  internalRenderErrorBox: _propTypes.default.any,
  onTelemetry: _propTypes.default.func,
  store: _propTypes.default.any
};
var _default = ComposeWithStore;
/**
 * @todo TODO: [P3] We should consider moving some data from Redux store to props
 *       Although we use `connectToWebChat` to hide the details of accessor of Redux store,
 *       we should clean up the responsibility between Context and Redux store
 *       We should decide which data is needed for React but not in other environment such as CLI/VSCode
 */

exports.default = _default;
Composer.defaultProps = {
  activityMiddleware: undefined,
  activityRenderer: undefined,
  activityStatusMiddleware: undefined,
  activityStatusRenderer: undefined,
  attachmentForScreenReaderMiddleware: undefined,
  attachmentMiddleware: undefined,
  attachmentRenderer: undefined,
  avatarMiddleware: undefined,
  avatarRenderer: undefined,
  cardActionMiddleware: undefined,
  children: undefined,
  dir: 'auto',
  disabled: false,
  downscaleImageToDataURL: undefined,
  grammars: [],
  groupActivitiesMiddleware: undefined,
  groupTimestamp: undefined,
  internalErrorBoxClass: undefined,
  locale: window.navigator.language || 'en-US',
  onTelemetry: undefined,
  overrideLocalizedStrings: undefined,
  renderMarkdown: undefined,
  selectVoice: undefined,
  sendTimeout: undefined,
  sendTypingIndicator: false,
  styleOptions: {},
  toastMiddleware: undefined,
  toastRenderer: undefined,
  typingIndicatorMiddleware: undefined,
  typingIndicatorRenderer: undefined,
  userID: '',
  username: ''
};
Composer.propTypes = {
  activityMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  activityRenderer: _propTypes.default.func,
  activityStatusMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  activityStatusRenderer: _propTypes.default.func,
  attachmentForScreenReaderMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  attachmentMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  attachmentRenderer: _propTypes.default.func,
  avatarMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  avatarRenderer: _propTypes.default.func,
  cardActionMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  children: _propTypes.default.any,
  dir: _propTypes.default.oneOf(['auto', 'ltr', 'rtl']),
  directLine: _propTypes.default.shape({
    activity$: _propTypes.default.shape({
      subscribe: _propTypes.default.func.isRequired
    }).isRequired,
    connectionStatus$: _propTypes.default.shape({
      subscribe: _propTypes.default.func.isRequired
    }).isRequired,
    end: _propTypes.default.func,
    getSessionId: _propTypes.default.func,
    postActivity: _propTypes.default.func.isRequired,
    referenceGrammarID: _propTypes.default.string,
    token: _propTypes.default.string
  }).isRequired,
  disabled: _propTypes.default.bool,
  downscaleImageToDataURL: _propTypes.default.func,
  grammars: _propTypes.default.arrayOf(_propTypes.default.string),
  groupActivitiesMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  groupTimestamp: _propTypes.default.oneOfType([_propTypes.default.bool, _propTypes.default.number]),
  internalErrorBoxClass: _propTypes.default.func,
  // This is for internal use only. We don't allow customization of error box.
  locale: _propTypes.default.string,
  onTelemetry: _propTypes.default.func,
  overrideLocalizedStrings: _propTypes.default.oneOfType([_propTypes.default.any, _propTypes.default.func]),
  renderMarkdown: _propTypes.default.func,
  selectVoice: _propTypes.default.func,
  sendTimeout: _propTypes.default.number,
  sendTypingIndicator: _propTypes.default.bool,
  styleOptions: _propTypes.default.any,
  toastMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  toastRenderer: _propTypes.default.func,
  typingIndicatorMiddleware: _propTypes.default.oneOfType([_propTypes.default.arrayOf(_propTypes.default.func), _propTypes.default.func]),
  typingIndicatorRenderer: _propTypes.default.func,
  userID: _propTypes.default.string,
  username: _propTypes.default.string
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ob29rcy9Db21wb3Nlci50c3giXSwibmFtZXMiOlsiRElTUEFUQ0hFUlMiLCJjbGVhclN1Z2dlc3RlZEFjdGlvbnMiLCJkaXNtaXNzTm90aWZpY2F0aW9uIiwiZW1pdFR5cGluZ0luZGljYXRvciIsIm1hcmtBY3Rpdml0eSIsInBvc3RBY3Rpdml0eSIsInNlbmRFdmVudCIsInNlbmRGaWxlcyIsInNlbmRNZXNzYWdlIiwic2VuZE1lc3NhZ2VCYWNrIiwic2VuZFBvc3RCYWNrIiwic2V0RGljdGF0ZUludGVyaW1zIiwic2V0RGljdGF0ZVN0YXRlIiwic2V0Tm90aWZpY2F0aW9uIiwic2V0U2VuZEJveCIsInNldFNlbmRUaW1lb3V0Iiwic3RhcnREaWN0YXRlIiwic3RhcnRTcGVha2luZ0FjdGl2aXR5Iiwic3RvcERpY3RhdGUiLCJzdG9wU3BlYWtpbmdBY3Rpdml0eSIsInN1Ym1pdFNlbmRCb3giLCJjcmVhdGVDYXJkQWN0aW9uQ29udGV4dCIsImNhcmRBY3Rpb25NaWRkbGV3YXJlIiwiZGlyZWN0TGluZSIsImRpc3BhdGNoIiwicnVuTWlkZGxld2FyZSIsImFwcGx5TWlkZGxld2FyZSIsIm9uQ2FyZEFjdGlvbiIsImNhcmRBY3Rpb24iLCJ0YXJnZXQiLCJnZXRTaWduSW5VcmwiLCJ0eXBlIiwidmFsdWUiLCJnZXRTZXNzaW9uSWQiLCJ0aGVuIiwic2Vzc2lvbklkIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY29uc29sZSIsIndhcm4iLCJjcmVhdGVHcm91cEFjdGl2aXRpZXNDb250ZXh0IiwiZ3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSIsImdyb3VwVGltZXN0YW1wIiwiZ3JvdXBBY3Rpdml0aWVzIiwibWVyZ2VTdHJpbmdzT3ZlcnJpZGVzIiwibG9jYWxpemVkU3RyaW5ncyIsImxhbmd1YWdlIiwib3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzIiwibWVyZ2VkIiwiRXJyb3IiLCJDb21wb3NlciIsImFjdGl2aXR5TWlkZGxld2FyZSIsImFjdGl2aXR5UmVuZGVyZXIiLCJhY3Rpdml0eVN0YXR1c01pZGRsZXdhcmUiLCJhY3Rpdml0eVN0YXR1c1JlbmRlcmVyIiwiYXR0YWNobWVudE1pZGRsZXdhcmUiLCJhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSIsImF0dGFjaG1lbnRSZW5kZXJlciIsImF2YXRhck1pZGRsZXdhcmUiLCJhdmF0YXJSZW5kZXJlciIsImNoaWxkcmVuIiwiZGlyIiwiZGlzYWJsZWQiLCJkb3duc2NhbGVJbWFnZVRvRGF0YVVSTCIsImdyYW1tYXJzIiwiaW50ZXJuYWxFcnJvckJveENsYXNzIiwibG9jYWxlIiwib25UZWxlbWV0cnkiLCJyZW5kZXJNYXJrZG93biIsInNlbGVjdFZvaWNlIiwic2VuZFRpbWVvdXQiLCJzZW5kVHlwaW5nSW5kaWNhdG9yIiwic3R5bGVPcHRpb25zIiwidG9hc3RNaWRkbGV3YXJlIiwidG9hc3RSZW5kZXJlciIsInR5cGluZ0luZGljYXRvck1pZGRsZXdhcmUiLCJ0eXBpbmdJbmRpY2F0b3JSZW5kZXJlciIsInVzZXJJRCIsInVzZXJuYW1lIiwidGVsZW1ldHJ5RGltZW5zaW9uc1JlZiIsInBhdGNoZWREaXIiLCJwYXRjaGVkR3JhbW1hcnMiLCJwYXRjaGVkU3R5bGVPcHRpb25zIiwiY2FyZEFjdGlvbkNvbnRleHQiLCJwYXRjaGVkU2VsZWN0Vm9pY2UiLCJkZWZhdWx0U2VsZWN0Vm9pY2UiLCJiaW5kIiwiZ3JvdXBBY3Rpdml0aWVzQ29udGV4dCIsImhvaXN0ZWREaXNwYXRjaGVycyIsImRpc3BhdGNoZXIiLCJwYXRjaGVkTG9jYWxpemVkU3RyaW5ncyIsImxvY2FsaXplZEdsb2JhbGl6ZSIsIkdMT0JBTElaRSIsIkdMT0JBTElaRV9MQU5HVUFHRSIsInRyYWNrRGltZW5zaW9uIiwibmFtZSIsImRhdGEiLCJjdXJyZW50IiwicGF0Y2hlZEFjdGl2aXR5UmVuZGVyZXIiLCJhcHBseU1pZGRsZXdhcmVGb3JSZW5kZXJlciIsInN0cmljdCIsImFjdGl2aXR5IiwicGF0Y2hlZEFjdGl2aXR5U3RhdHVzUmVuZGVyZXIiLCJwYXRjaGVkQXR0YWNobWVudEZvclNjcmVlblJlYWRlclJlbmRlcmVyIiwiYXR0YWNobWVudCIsImNvbnRlbnRUeXBlIiwicGF0Y2hlZEF0dGFjaG1lbnRSZW5kZXJlciIsImFwcGx5TWlkZGxld2FyZUZvckxlZ2FjeVJlbmRlcmVyIiwicGF0Y2hlZEF2YXRhclJlbmRlcmVyIiwicGF0Y2hlZFRvYXN0UmVuZGVyZXIiLCJub3RpZmljYXRpb24iLCJwYXRjaGVkVHlwaW5nSW5kaWNhdG9yUmVuZGVyZXIiLCJjb250ZXh0IiwiYXR0YWNobWVudEZvclNjcmVlblJlYWRlclJlbmRlcmVyIiwibG9jYWxpemVkR2xvYmFsaXplU3RhdGUiLCJDb21wb3NlV2l0aFN0b3JlIiwiaW50ZXJuYWxSZW5kZXJFcnJvckJveCIsInN0b3JlIiwicHJvcHMiLCJlcnJvciIsInNldEVycm9yIiwiaGFuZGxlRXJyb3IiLCJmYXRhbCIsIm1lbW9pemVkU3RvcmUiLCJXZWJDaGF0UmVkdXhDb250ZXh0IiwiZGVmYXVsdFByb3BzIiwidW5kZWZpbmVkIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiYW55IiwiZnVuYyIsIndpbmRvdyIsIm5hdmlnYXRvciIsIm9uZU9mVHlwZSIsImFycmF5T2YiLCJvbmVPZiIsInNoYXBlIiwiYWN0aXZpdHkkIiwic3Vic2NyaWJlIiwiaXNSZXF1aXJlZCIsImNvbm5lY3Rpb25TdGF0dXMkIiwiZW5kIiwicmVmZXJlbmNlR3JhbW1hcklEIiwic3RyaW5nIiwidG9rZW4iLCJib29sIiwibnVtYmVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBR0E7O0FBNEJBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUtBOztBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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RUFBQUEsV0FBVyxFQUFFMEQsbUJBQVVrQixNQXJDSjtBQXNDbkIzRSxFQUFBQSxtQkFBbUIsRUFBRXlELG1CQUFVaUIsSUF0Q1o7QUF1Q25CekUsRUFBQUEsWUFBWSxFQUFFd0QsbUJBQVVDLEdBdkNMO0FBd0NuQnhELEVBQUFBLGVBQWUsRUFBRXVELG1CQUFVSyxTQUFWLENBQW9CLENBQUNMLG1CQUFVTSxPQUFWLENBQWtCTixtQkFBVUUsSUFBNUIsQ0FBRCxFQUFvQ0YsbUJBQVVFLElBQTlDLENBQXBCLENBeENFO0FBeUNuQnhELEVBQUFBLGFBQWEsRUFBRXNELG1CQUFVRSxJQXpDTjtBQTBDbkJ2RCxFQUFBQSx5QkFBeUIsRUFBRXFELG1CQUFVSyxTQUFWLENBQW9CLENBQUNMLG1CQUFVTSxPQUFWLENBQWtCTixtQkFBVUUsSUFBNUIsQ0FBRCxFQUFvQ0YsbUJBQVVFLElBQTlDLENBQXBCLENBMUNSO0FBMkNuQnRELEVBQUFBLHVCQUF1QixFQUFFb0QsbUJBQVVFLElBM0NoQjtBQTRDbkJyRCxFQUFBQSxNQUFNLEVBQUVtRCxtQkFBVWUsTUE1Q0M7QUE2Q25CakUsRUFBQUEsUUFBUSxFQUFFa0QsbUJBQVVlO0FBN0NELENBQXJCIiwic291cmNlUm9vdCI6ImNvbXBvbmVudDovLy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm92aWRlciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QsIHsgRkMsIFJlYWN0Tm9kZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1cGRhdGVJbiBmcm9tICdzaW1wbGUtdXBkYXRlLWluJztcblxuaW1wb3J0IGNyZWF0ZUN1c3RvbUV2ZW50IGZyb20gJy4uL3V0aWxzL2NyZWF0ZUN1c3RvbUV2ZW50JztcbmltcG9ydCBFcnJvckJvdW5kYXJ5IGZyb20gJy4vdXRpbHMvRXJyb3JCb3VuZGFyeSc7XG5pbXBvcnQgZ2V0QWxsTG9jYWxpemVkU3RyaW5ncyBmcm9tICcuLi9sb2NhbGl6YXRpb24vZ2V0QWxsTG9jYWxpemVkU3RyaW5ncyc7XG5pbXBvcnQgaXNPYmplY3QgZnJvbSAnLi4vdXRpbHMvaXNPYmplY3QnO1xuaW1wb3J0IG5vcm1hbGl6ZUxhbmd1YWdlIGZyb20gJy4uL3V0aWxzL25vcm1hbGl6ZUxhbmd1YWdlJztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCBQcmVjb21waWxlZEdsb2JhbGl6ZSBmcm9tICcuLi9leHRlcm5hbC9QcmVjb21waWxlZEdsb2JhbGl6ZSc7XG5pbXBvcnQgU3R5bGVPcHRpb25zIGZyb20gJy4uL1N0eWxlT3B0aW9ucyc7XG5cbmltcG9ydCB7XG4gIGNsZWFyU3VnZ2VzdGVkQWN0aW9ucyxcbiAgY29ubmVjdCBhcyBjcmVhdGVDb25uZWN0QWN0aW9uLFxuICBjcmVhdGVTdG9yZSxcbiAgZGlzY29ubmVjdCxcbiAgZGlzbWlzc05vdGlmaWNhdGlvbixcbiAgZW1pdFR5cGluZ0luZGljYXRvcixcbiAgbWFya0FjdGl2aXR5LFxuICBwb3N0QWN0aXZpdHksXG4gIHNlbmRFdmVudCxcbiAgc2VuZEZpbGVzLFxuICBzZW5kTWVzc2FnZSxcbiAgc2VuZE1lc3NhZ2VCYWNrLFxuICBzZW5kUG9zdEJhY2ssXG4gIHNldERpY3RhdGVJbnRlcmltcyxcbiAgc2V0RGljdGF0ZVN0YXRlLFxuICBzZXRMYW5ndWFnZSxcbiAgc2V0Tm90aWZpY2F0aW9uLFxuICBzZXRTZW5kQm94LFxuICBzZXRTZW5kVGltZW91dCxcbiAgc2V0U2VuZFR5cGluZ0luZGljYXRvcixcbiAgc3RhcnREaWN0YXRlLFxuICBzdGFydFNwZWFraW5nQWN0aXZpdHksXG4gIHN0b3BEaWN0YXRlLFxuICBzdG9wU3BlYWtpbmdBY3Rpdml0eSxcbiAgc3VibWl0U2VuZEJveFxufSBmcm9tICdib3RmcmFtZXdvcmstd2ViY2hhdC1jb3JlJztcblxuaW1wb3J0IGNyZWF0ZURlZmF1bHRDYXJkQWN0aW9uTWlkZGxld2FyZSBmcm9tICcuL21pZGRsZXdhcmUvY3JlYXRlRGVmYXVsdENhcmRBY3Rpb25NaWRkbGV3YXJlJztcbmltcG9ydCBjcmVhdGVEZWZhdWx0R3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSBmcm9tICcuL21pZGRsZXdhcmUvY3JlYXRlRGVmYXVsdEdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmUnO1xuaW1wb3J0IGRlZmF1bHRTZWxlY3RWb2ljZSBmcm9tICcuL2ludGVybmFsL2RlZmF1bHRTZWxlY3RWb2ljZSc7XG5pbXBvcnQgbWFwTWFwIGZyb20gJy4uL3V0aWxzL21hcE1hcCc7XG5pbXBvcnQgb2JzZXJ2YWJsZVRvUHJvbWlzZSBmcm9tICcuL3V0aWxzL29ic2VydmFibGVUb1Byb21pc2UnO1xuaW1wb3J0IFRyYWNrZXIgZnJvbSAnLi9pbnRlcm5hbC9UcmFja2VyJztcbmltcG9ydCBXZWJDaGF0UmVkdXhDb250ZXh0LCB7IHVzZURpc3BhdGNoIH0gZnJvbSAnLi9pbnRlcm5hbC9XZWJDaGF0UmVkdXhDb250ZXh0JztcbmltcG9ydCB7IGRlZmF1bHQgYXMgV2ViQ2hhdEFQSUNvbnRleHQgfSBmcm9tICcuL2ludGVybmFsL1dlYkNoYXRBUElDb250ZXh0JztcblxuaW1wb3J0IGFwcGx5TWlkZGxld2FyZSwge1xuICBmb3JMZWdhY3lSZW5kZXJlciBhcyBhcHBseU1pZGRsZXdhcmVGb3JMZWdhY3lSZW5kZXJlcixcbiAgZm9yUmVuZGVyZXIgYXMgYXBwbHlNaWRkbGV3YXJlRm9yUmVuZGVyZXJcbn0gZnJvbSAnLi9taWRkbGV3YXJlL2FwcGx5TWlkZGxld2FyZSc7XG5cbmltcG9ydCBub3JtYWxpemVTdHlsZU9wdGlvbnMgZnJvbSAnLi4vbm9ybWFsaXplU3R5bGVPcHRpb25zJztcbmltcG9ydCBwYXRjaFN0eWxlT3B0aW9uc0Zyb21EZXByZWNhdGVkUHJvcHMgZnJvbSAnLi4vcGF0Y2hTdHlsZU9wdGlvbnNGcm9tRGVwcmVjYXRlZFByb3BzJztcbmltcG9ydCBzaW5nbGVUb0FycmF5IGZyb20gJy4vdXRpbHMvc2luZ2xlVG9BcnJheSc7XG5cbi8vIExpc3Qgb2YgUmVkdXggYWN0aW9ucyBmYWN0b3J5IHdlIGFyZSBob2lzdGluZyBhcyBXZWIgQ2hhdCBmdW5jdGlvbnNcbmNvbnN0IERJU1BBVENIRVJTID0ge1xuICBjbGVhclN1Z2dlc3RlZEFjdGlvbnMsXG4gIGRpc21pc3NOb3RpZmljYXRpb24sXG4gIGVtaXRUeXBpbmdJbmRpY2F0b3IsXG4gIG1hcmtBY3Rpdml0eSxcbiAgcG9zdEFjdGl2aXR5LFxuICBzZW5kRXZlbnQsXG4gIHNlbmRGaWxlcyxcbiAgc2VuZE1lc3NhZ2UsXG4gIHNlbmRNZXNzYWdlQmFjayxcbiAgc2VuZFBvc3RCYWNrLFxuICBzZXREaWN0YXRlSW50ZXJpbXMsXG4gIHNldERpY3RhdGVTdGF0ZSxcbiAgc2V0Tm90aWZpY2F0aW9uLFxuICBzZXRTZW5kQm94LFxuICBzZXRTZW5kVGltZW91dCxcbiAgc3RhcnREaWN0YXRlLFxuICBzdGFydFNwZWFraW5nQWN0aXZpdHksXG4gIHN0b3BEaWN0YXRlLFxuICBzdG9wU3BlYWtpbmdBY3Rpdml0eSxcbiAgc3VibWl0U2VuZEJveFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZEFjdGlvbkNvbnRleHQoeyBjYXJkQWN0aW9uTWlkZGxld2FyZSwgZGlyZWN0TGluZSwgZGlzcGF0Y2ggfSkge1xuICBjb25zdCBydW5NaWRkbGV3YXJlID0gYXBwbHlNaWRkbGV3YXJlKFxuICAgICdjYXJkIGFjdGlvbicsXG4gICAgLi4uc2luZ2xlVG9BcnJheShjYXJkQWN0aW9uTWlkZGxld2FyZSksXG4gICAgY3JlYXRlRGVmYXVsdENhcmRBY3Rpb25NaWRkbGV3YXJlKClcbiAgKSh7IGRpc3BhdGNoIH0pO1xuXG4gIHJldHVybiB7XG4gICAgb25DYXJkQWN0aW9uOiAoY2FyZEFjdGlvbiwgeyB0YXJnZXQgfTogeyB0YXJnZXQ/OiBhbnkgfSA9IHt9KSA9PlxuICAgICAgcnVuTWlkZGxld2FyZSh7XG4gICAgICAgIGNhcmRBY3Rpb24sXG4gICAgICAgIGdldFNpZ25JblVybDpcbiAgICAgICAgICBjYXJkQWN0aW9uLnR5cGUgPT09ICdzaWduaW4nXG4gICAgICAgICAgICA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBjYXJkQWN0aW9uO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdExpbmUuZ2V0U2Vzc2lvbklkKSB7XG4gICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAqIEB0b2RvIFRPRE86IFtQM10gV2Ugc2hvdWxkIGNoYW5nZSB0aGlzIG9uZSB0byBhc3luYy9hd2FpdC5cbiAgICAgICAgICAgICAgICAgICAqICAgICAgIFRoaXMgaXMgdGhlIGZpcnN0IHBsYWNlIGluIHRoaXMgcHJvamVjdCB0byB1c2UgYXN5bmMuXG4gICAgICAgICAgICAgICAgICAgKiAgICAgICBUaHVzLCB3ZSBuZWVkIHRvIGFkZCBAYmFiZWwvcGx1Z2luLXRyYW5zZm9ybS1ydW50aW1lIGFuZCBAYmFiZWwvcnVudGltZS5cbiAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmFibGVUb1Byb21pc2UoZGlyZWN0TGluZS5nZXRTZXNzaW9uSWQoKSkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkID0+IGAke3ZhbHVlfSR7ZW5jb2RlVVJJQ29tcG9uZW50KGAmY29kZV9jaGFsbGVuZ2U9JHtzZXNzaW9uSWR9YCl9YFxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2JvdGZyYW1ld29yay13ZWJjaGF0OiBPQXV0aCBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgRGlyZWN0IExpbmUgYWRhcHRlci4nKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICB0YXJnZXRcbiAgICAgIH0pXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdyb3VwQWN0aXZpdGllc0NvbnRleHQoeyBncm91cEFjdGl2aXRpZXNNaWRkbGV3YXJlLCBncm91cFRpbWVzdGFtcCB9KSB7XG4gIGNvbnN0IHJ1bk1pZGRsZXdhcmUgPSBhcHBseU1pZGRsZXdhcmUoXG4gICAgJ2dyb3VwIGFjdGl2aXRpZXMnLFxuICAgIC4uLnNpbmdsZVRvQXJyYXkoZ3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSksXG4gICAgY3JlYXRlRGVmYXVsdEdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmUoeyBncm91cFRpbWVzdGFtcCB9KVxuICApO1xuXG4gIHJldHVybiB7XG4gICAgZ3JvdXBBY3Rpdml0aWVzOiBydW5NaWRkbGV3YXJlKHt9KVxuICB9O1xufVxuXG5mdW5jdGlvbiBtZXJnZVN0cmluZ3NPdmVycmlkZXMobG9jYWxpemVkU3RyaW5ncywgbGFuZ3VhZ2UsIG92ZXJyaWRlTG9jYWxpemVkU3RyaW5ncykge1xuICBpZiAoIW92ZXJyaWRlTG9jYWxpemVkU3RyaW5ncykge1xuICAgIHJldHVybiBsb2NhbGl6ZWRTdHJpbmdzO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvdmVycmlkZUxvY2FsaXplZFN0cmluZ3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zdCBtZXJnZWQgPSBvdmVycmlkZUxvY2FsaXplZFN0cmluZ3MobG9jYWxpemVkU3RyaW5ncywgbGFuZ3VhZ2UpO1xuXG4gICAgaWYgKCFpc09iamVjdChtZXJnZWQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2JvdGZyYW1ld29yay13ZWJjaGF0OiBvdmVycmlkZUxvY2FsaXplZFN0cmluZ3MgZnVuY3Rpb24gbXVzdCByZXR1cm4gYW4gb2JqZWN0LicpO1xuICAgIH1cblxuICAgIHJldHVybiBtZXJnZWQ7XG4gIH1cblxuICBpZiAoIWlzT2JqZWN0KG92ZXJyaWRlTG9jYWxpemVkU3RyaW5ncykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2JvdGZyYW1ld29yay13ZWJjaGF0OiBvdmVycmlkZUxvY2FsaXplZFN0cmluZ3MgbXVzdCBiZSBlaXRoZXIgYSBmdW5jdGlvbiwgYW4gb2JqZWN0LCBvciBmYWxzeS4nKTtcbiAgfVxuXG4gIHJldHVybiB7IC4uLmxvY2FsaXplZFN0cmluZ3MsIC4uLm92ZXJyaWRlTG9jYWxpemVkU3RyaW5ncyB9O1xufVxuXG50eXBlIENvbXBvc2VyUHJvcHMgPSB7XG4gIGFjdGl2aXR5TWlkZGxld2FyZTogYW55O1xuICBhY3Rpdml0eVJlbmRlcmVyOiBhbnk7XG4gIGFjdGl2aXR5U3RhdHVzTWlkZGxld2FyZTogYW55O1xuICBhY3Rpdml0eVN0YXR1c1JlbmRlcmVyOiBhbnk7XG4gIGF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlOiBhbnk7XG4gIGF0dGFjaG1lbnRNaWRkbGV3YXJlOiBhbnk7XG4gIGF0dGFjaG1lbnRSZW5kZXJlcjogYW55O1xuICBhdmF0YXJNaWRkbGV3YXJlOiBhbnk7XG4gIGF2YXRhclJlbmRlcmVyOiBhbnk7XG4gIGNhcmRBY3Rpb25NaWRkbGV3YXJlOiBhbnk7XG4gIGNoaWxkcmVuOiBSZWFjdE5vZGU7XG4gIGRpcjogc3RyaW5nO1xuICBkaXJlY3RMaW5lOiBhbnk7XG4gIGRpc2FibGVkOiBib29sZWFuO1xuICBkb3duc2NhbGVJbWFnZVRvRGF0YVVSTDogYW55O1xuICBncmFtbWFyczogYW55O1xuICBncm91cEFjdGl2aXRpZXNNaWRkbGV3YXJlOiBhbnk7XG4gIGdyb3VwVGltZXN0YW1wOiBib29sZWFuIHwgbnVtYmVyO1xuICBpbnRlcm5hbEVycm9yQm94Q2xhc3M6IGFueTtcbiAgaW50ZXJuYWxSZW5kZXJFcnJvckJveDogYW55O1xuICBsb2NhbGU6IHN0cmluZztcbiAgb25UZWxlbWV0cnk6IGFueTtcbiAgb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzOiBhbnk7XG4gIHJlbmRlck1hcmtkb3duOiBhbnk7XG4gIHNlbGVjdFZvaWNlOiBhbnk7XG4gIHNlbmRUaW1lb3V0OiBudW1iZXI7XG4gIHNlbmRUeXBpbmdJbmRpY2F0b3I6IGFueTtcbiAgc3R5bGVPcHRpb25zOiBTdHlsZU9wdGlvbnM7XG4gIHRvYXN0TWlkZGxld2FyZTogYW55O1xuICB0b2FzdFJlbmRlcmVyOiBhbnk7XG4gIHR5cGluZ0luZGljYXRvck1pZGRsZXdhcmU6IGFueTtcbiAgdHlwaW5nSW5kaWNhdG9yUmVuZGVyZXI6IGFueTtcbiAgdXNlcklEOiBzdHJpbmc7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG59O1xuXG5jb25zdCBDb21wb3NlcjogRkM8Q29tcG9zZXJQcm9wcz4gPSAoe1xuICBhY3Rpdml0eU1pZGRsZXdhcmUsXG4gIGFjdGl2aXR5UmVuZGVyZXIsXG4gIGFjdGl2aXR5U3RhdHVzTWlkZGxld2FyZSxcbiAgYWN0aXZpdHlTdGF0dXNSZW5kZXJlcixcbiAgYXR0YWNobWVudE1pZGRsZXdhcmUsXG4gIGF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlLFxuICBhdHRhY2htZW50UmVuZGVyZXIsXG4gIGF2YXRhck1pZGRsZXdhcmUsXG4gIGF2YXRhclJlbmRlcmVyLFxuICBjYXJkQWN0aW9uTWlkZGxld2FyZSxcbiAgY2hpbGRyZW4sXG4gIGRpcixcbiAgZGlyZWN0TGluZSxcbiAgZGlzYWJsZWQsXG4gIGRvd25zY2FsZUltYWdlVG9EYXRhVVJMLFxuICBncmFtbWFycyxcbiAgZ3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSxcbiAgZ3JvdXBUaW1lc3RhbXAsXG4gIGludGVybmFsRXJyb3JCb3hDbGFzcyxcbiAgbG9jYWxlLFxuICBvblRlbGVtZXRyeSxcbiAgb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzLFxuICByZW5kZXJNYXJrZG93bixcbiAgc2VsZWN0Vm9pY2UsXG4gIHNlbmRUaW1lb3V0LFxuICBzZW5kVHlwaW5nSW5kaWNhdG9yLFxuICBzdHlsZU9wdGlvbnMsXG4gIHRvYXN0TWlkZGxld2FyZSxcbiAgdG9hc3RSZW5kZXJlcixcbiAgdHlwaW5nSW5kaWNhdG9yTWlkZGxld2FyZSxcbiAgdHlwaW5nSW5kaWNhdG9yUmVuZGVyZXIsXG4gIHVzZXJJRCxcbiAgdXNlcm5hbWVcbn0pID0+IHtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICBjb25zdCB0ZWxlbWV0cnlEaW1lbnNpb25zUmVmID0gdXNlUmVmKHt9KTtcblxuICBjb25zdCBwYXRjaGVkRGlyID0gdXNlTWVtbygoKSA9PiAoZGlyID09PSAnbHRyJyB8fCBkaXIgPT09ICdydGwnID8gZGlyIDogJ2F1dG8nKSwgW2Rpcl0pO1xuICBjb25zdCBwYXRjaGVkR3JhbW1hcnMgPSB1c2VNZW1vKCgpID0+IGdyYW1tYXJzIHx8IFtdLCBbZ3JhbW1hcnNdKTtcbiAgY29uc3QgcGF0Y2hlZFN0eWxlT3B0aW9ucyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gbm9ybWFsaXplU3R5bGVPcHRpb25zKHBhdGNoU3R5bGVPcHRpb25zRnJvbURlcHJlY2F0ZWRQcm9wcyhzdHlsZU9wdGlvbnMsIHsgZ3JvdXBUaW1lc3RhbXAsIHNlbmRUaW1lb3V0IH0pKSxcbiAgICBbZ3JvdXBUaW1lc3RhbXAsIHNlbmRUaW1lb3V0LCBzdHlsZU9wdGlvbnNdXG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBkaXNwYXRjaChzZXRMYW5ndWFnZShsb2NhbGUpKTtcbiAgfSwgW2Rpc3BhdGNoLCBsb2NhbGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHR5cGVvZiBzZW5kVGltZW91dCA9PT0gJ251bWJlcicgJiYgZGlzcGF0Y2goc2V0U2VuZFRpbWVvdXQoc2VuZFRpbWVvdXQpKTtcbiAgfSwgW2Rpc3BhdGNoLCBzZW5kVGltZW91dF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGlzcGF0Y2goc2V0U2VuZFR5cGluZ0luZGljYXRvcighIXNlbmRUeXBpbmdJbmRpY2F0b3IpKTtcbiAgfSwgW2Rpc3BhdGNoLCBzZW5kVHlwaW5nSW5kaWNhdG9yXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBkaXNwYXRjaChcbiAgICAgIGNyZWF0ZUNvbm5lY3RBY3Rpb24oe1xuICAgICAgICBkaXJlY3RMaW5lLFxuICAgICAgICB1c2VySUQsXG4gICAgICAgIHVzZXJuYW1lXG4gICAgICB9KVxuICAgICk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgLyoqXG4gICAgICAgKiBAdG9kbyBUT0RPOiBbUDNdIGRpc2Nvbm5lY3QoKSBpcyBhbiBhc3luYyBjYWxsIChwZW5kaW5nIC0+IGZ1bGZpbGxlZCksIHdlIG5lZWQgdG8gd2FpdCwgb3IgY2hhbmdlIGl0IHRvIHJlY29ubmVjdCgpXG4gICAgICAgKi9cbiAgICAgIGRpc3BhdGNoKGRpc2Nvbm5lY3QoKSk7XG4gICAgfTtcbiAgfSwgW2Rpc3BhdGNoLCBkaXJlY3RMaW5lLCB1c2VySUQsIHVzZXJuYW1lXSk7XG5cbiAgY29uc3QgY2FyZEFjdGlvbkNvbnRleHQgPSB1c2VNZW1vKCgpID0+IGNyZWF0ZUNhcmRBY3Rpb25Db250ZXh0KHsgY2FyZEFjdGlvbk1pZGRsZXdhcmUsIGRpcmVjdExpbmUsIGRpc3BhdGNoIH0pLCBbXG4gICAgY2FyZEFjdGlvbk1pZGRsZXdhcmUsXG4gICAgZGlyZWN0TGluZSxcbiAgICBkaXNwYXRjaFxuICBdKTtcblxuICBjb25zdCBwYXRjaGVkU2VsZWN0Vm9pY2UgPSB1c2VNZW1vKCgpID0+IHNlbGVjdFZvaWNlIHx8IGRlZmF1bHRTZWxlY3RWb2ljZS5iaW5kKG51bGwsIHsgbGFuZ3VhZ2U6IGxvY2FsZSB9KSwgW1xuICAgIGxvY2FsZSxcbiAgICBzZWxlY3RWb2ljZVxuICBdKTtcblxuICBjb25zdCBncm91cEFjdGl2aXRpZXNDb250ZXh0ID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgY3JlYXRlR3JvdXBBY3Rpdml0aWVzQ29udGV4dCh7XG4gICAgICAgIGdyb3VwQWN0aXZpdGllc01pZGRsZXdhcmUsXG4gICAgICAgIGdyb3VwVGltZXN0YW1wOiBwYXRjaGVkU3R5bGVPcHRpb25zLmdyb3VwVGltZXN0YW1wXG4gICAgICB9KSxcbiAgICBbZ3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZSwgcGF0Y2hlZFN0eWxlT3B0aW9ucy5ncm91cFRpbWVzdGFtcF1cbiAgKTtcblxuICBjb25zdCBob2lzdGVkRGlzcGF0Y2hlcnMgPSB1c2VNZW1vKFxuICAgICgpID0+IG1hcE1hcChESVNQQVRDSEVSUywgZGlzcGF0Y2hlciA9PiAoLi4uYXJncykgPT4gZGlzcGF0Y2goZGlzcGF0Y2hlciguLi5hcmdzKSkpLFxuICAgIFtkaXNwYXRjaF1cbiAgKTtcblxuICBjb25zdCBwYXRjaGVkTG9jYWxpemVkU3RyaW5ncyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gbWVyZ2VTdHJpbmdzT3ZlcnJpZGVzKGdldEFsbExvY2FsaXplZFN0cmluZ3MoKVtub3JtYWxpemVMYW5ndWFnZShsb2NhbGUpXSwgbG9jYWxlLCBvdmVycmlkZUxvY2FsaXplZFN0cmluZ3MpLFxuICAgIFtsb2NhbGUsIG92ZXJyaWRlTG9jYWxpemVkU3RyaW5nc11cbiAgKTtcblxuICBjb25zdCBsb2NhbGl6ZWRHbG9iYWxpemUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB7IEdMT0JBTElaRSwgR0xPQkFMSVpFX0xBTkdVQUdFIH0gPSBwYXRjaGVkTG9jYWxpemVkU3RyaW5ncyB8fCB7fTtcblxuICAgIHJldHVybiBHTE9CQUxJWkUgfHwgKEdMT0JBTElaRV9MQU5HVUFHRSAmJiBQcmVjb21waWxlZEdsb2JhbGl6ZShHTE9CQUxJWkVfTEFOR1VBR0UpKSB8fCBQcmVjb21waWxlZEdsb2JhbGl6ZSgnZW4nKTtcbiAgfSwgW3BhdGNoZWRMb2NhbGl6ZWRTdHJpbmdzXSk7XG5cbiAgY29uc3QgdHJhY2tEaW1lbnNpb24gPSB1c2VDYWxsYmFjayhcbiAgICAobmFtZSwgZGF0YSkgPT4ge1xuICAgICAgaWYgKCFuYW1lIHx8IHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKCdib3RmcmFtZXdvcmstd2ViY2hhdDogVGVsZW1ldHJ5IGRpbWVuc2lvbiBuYW1lIG11c3QgYmUgYSBzdHJpbmcuJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgZGF0YTtcblxuICAgICAgaWYgKHR5cGUgIT09ICdzdHJpbmcnICYmIHR5cGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLndhcm4oJ2JvdGZyYW1ld29yay13ZWJjaGF0OiBUZWxlbWV0cnkgZGltZW5zaW9uIGRhdGEgbXVzdCBiZSBhIHN0cmluZyBvciB1bmRlZmluZWQuJyk7XG4gICAgICB9XG5cbiAgICAgIHRlbGVtZXRyeURpbWVuc2lvbnNSZWYuY3VycmVudCA9IHVwZGF0ZUluKFxuICAgICAgICB0ZWxlbWV0cnlEaW1lbnNpb25zUmVmLmN1cnJlbnQsXG4gICAgICAgIFtuYW1lXSxcbiAgICAgICAgdHlwZSA9PT0gJ3VuZGVmaW5lZCcgPyBkYXRhIDogKCkgPT4gZGF0YVxuICAgICAgKTtcbiAgICB9LFxuICAgIFt0ZWxlbWV0cnlEaW1lbnNpb25zUmVmXVxuICApO1xuXG4gIGNvbnN0IHBhdGNoZWRBY3Rpdml0eVJlbmRlcmVyID0gdXNlTWVtbygoKSA9PiB7XG4gICAgYWN0aXZpdHlSZW5kZXJlciAmJlxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnV2ViIENoYXQ6IFwiYWN0aXZpdHlSZW5kZXJlclwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBvbiAyMDIyLTA2LTE1LCBwbGVhc2UgdXNlIFwiYWN0aXZpdHlNaWRkbGV3YXJlXCIgaW5zdGVhZC4nXG4gICAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIGFjdGl2aXR5UmVuZGVyZXIgfHxcbiAgICAgIGFwcGx5TWlkZGxld2FyZUZvclJlbmRlcmVyKFxuICAgICAgICAnYWN0aXZpdHknLFxuICAgICAgICB7IHN0cmljdDogZmFsc2UgfSxcbiAgICAgICAgLi4uc2luZ2xlVG9BcnJheShhY3Rpdml0eU1pZGRsZXdhcmUpLFxuICAgICAgICAoKSA9PiAoKSA9PiAoeyBhY3Rpdml0eSB9KSA9PiB7XG4gICAgICAgICAgaWYgKGFjdGl2aXR5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHJlbmRlcmVyIGZvciBhY3Rpdml0eSBvZiB0eXBlIFwiJHthY3Rpdml0eS50eXBlfVwiYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYWN0aXZpdHkgdG8gcmVuZGVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApKHt9KVxuICAgICk7XG4gIH0sIFthY3Rpdml0eU1pZGRsZXdhcmUsIGFjdGl2aXR5UmVuZGVyZXJdKTtcblxuICBjb25zdCBwYXRjaGVkQWN0aXZpdHlTdGF0dXNSZW5kZXJlciA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGFjdGl2aXR5U3RhdHVzUmVuZGVyZXIgJiZcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1dlYiBDaGF0OiBcImFjdGl2aXR5U3RhdHVzUmVuZGVyZXJcIiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgb24gMjAyMi0wNi0xNSwgcGxlYXNlIHVzZSBcImFjdGl2aXR5U3RhdHVzTWlkZGxld2FyZVwiIGluc3RlYWQuJ1xuICAgICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICBhY3Rpdml0eVN0YXR1c1JlbmRlcmVyIHx8XG4gICAgICBhcHBseU1pZGRsZXdhcmVGb3JSZW5kZXJlcihcbiAgICAgICAgJ2FjdGl2aXR5IHN0YXR1cycsXG4gICAgICAgIHsgc3RyaWN0OiBmYWxzZSB9LFxuICAgICAgICAuLi5zaW5nbGVUb0FycmF5KGFjdGl2aXR5U3RhdHVzTWlkZGxld2FyZSksXG4gICAgICAgICgpID0+ICgpID0+ICgpID0+IGZhbHNlXG4gICAgICApKHt9KVxuICAgICk7XG4gIH0sIFthY3Rpdml0eVN0YXR1c01pZGRsZXdhcmUsIGFjdGl2aXR5U3RhdHVzUmVuZGVyZXJdKTtcblxuICBjb25zdCBwYXRjaGVkQXR0YWNobWVudEZvclNjcmVlblJlYWRlclJlbmRlcmVyID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgYXBwbHlNaWRkbGV3YXJlRm9yUmVuZGVyZXIoXG4gICAgICAgICdhdHRhY2htZW50IGZvciBzY3JlZW4gcmVhZGVyJyxcbiAgICAgICAgeyBzdHJpY3Q6IHRydWUgfSxcbiAgICAgICAgLi4uc2luZ2xlVG9BcnJheShhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyTWlkZGxld2FyZSksXG4gICAgICAgICgpID0+ICgpID0+ICh7IGF0dGFjaG1lbnQgfSkgPT4ge1xuICAgICAgICAgIGlmIChhdHRhY2htZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYE5vIHJlbmRlcmVyIGZvciBhdHRhY2htZW50IGZvciBzY3JlZW4gcmVhZGVyIG9mIHR5cGUgXCIke2F0dGFjaG1lbnQuY29udGVudFR5cGV9XCJgKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAdG9kbyBUT0RPOiBbUDRdIE1pZ2h0IGJlIGFibGUgdG8gdGhyb3cgd2l0aG91dCByZXR1cm5pbmcgYSBmdW5jdGlvbiAtLSBpbnZlc3RpZ2F0ZSBhbmQgcG9zc2libHkgZml4XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYXR0YWNobWVudCB0byByZW5kZXInKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICApKHt9KSxcbiAgICBbYXR0YWNobWVudEZvclNjcmVlblJlYWRlck1pZGRsZXdhcmVdXG4gICk7XG5cbiAgY29uc3QgcGF0Y2hlZEF0dGFjaG1lbnRSZW5kZXJlciA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChhdHRhY2htZW50UmVuZGVyZXIpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1dlYiBDaGF0OiBcImF0dGFjaG1lbnRSZW5kZXJlclwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBvbiAyMDIyLTA2LTE1LCBwbGVhc2UgdXNlIFwiYXR0YWNobWVudE1pZGRsZXdhcmVcIiBpbnN0ZWFkLidcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBhdHRhY2htZW50UmVuZGVyZXI7XG4gICAgfVxuXG4gICAgLy8gQXR0YWNobWVudCByZW5kZXJlclxuICAgIHJldHVybiBhcHBseU1pZGRsZXdhcmVGb3JMZWdhY3lSZW5kZXJlcihcbiAgICAgICdhdHRhY2htZW50JyxcbiAgICAgIC4uLnNpbmdsZVRvQXJyYXkoYXR0YWNobWVudE1pZGRsZXdhcmUpLFxuICAgICAgKCkgPT4gKCkgPT4gKHsgYXR0YWNobWVudCB9KSA9PiB7XG4gICAgICAgIGlmIChhdHRhY2htZW50KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyByZW5kZXJlciBmb3IgYXR0YWNobWVudCBvZiB0eXBlIFwiJHthdHRhY2htZW50LmNvbnRlbnRUeXBlfVwiYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhdHRhY2htZW50IHRvIHJlbmRlcicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKSh7fSk7XG4gIH0sIFthdHRhY2htZW50TWlkZGxld2FyZSwgYXR0YWNobWVudFJlbmRlcmVyXSk7XG5cbiAgY29uc3QgcGF0Y2hlZEF2YXRhclJlbmRlcmVyID0gdXNlTWVtbygoKSA9PiB7XG4gICAgYXZhdGFyUmVuZGVyZXIgJiZcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1dlYiBDaGF0OiBcImF2YXRhclJlbmRlcmVyXCIgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIG9uIDIwMjItMDYtMTUsIHBsZWFzZSB1c2UgXCJhdmF0YXJNaWRkbGV3YXJlXCIgaW5zdGVhZC4nXG4gICAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIGF2YXRhclJlbmRlcmVyIHx8XG4gICAgICBhcHBseU1pZGRsZXdhcmVGb3JSZW5kZXJlcignYXZhdGFyJywgeyBzdHJpY3Q6IGZhbHNlIH0sIC4uLnNpbmdsZVRvQXJyYXkoYXZhdGFyTWlkZGxld2FyZSksICgpID0+ICgpID0+ICgpID0+XG4gICAgICAgIGZhbHNlXG4gICAgICApKHt9KVxuICAgICk7XG4gIH0sIFthdmF0YXJNaWRkbGV3YXJlLCBhdmF0YXJSZW5kZXJlcl0pO1xuXG4gIGNvbnN0IHBhdGNoZWRUb2FzdFJlbmRlcmVyID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdG9hc3RSZW5kZXJlciAmJlxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnV2ViIENoYXQ6IFwidG9hc3RSZW5kZXJlclwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBvbiAyMDIyLTA2LTE1LCBwbGVhc2UgdXNlIFwidG9hc3RNaWRkbGV3YXJlXCIgaW5zdGVhZC4nXG4gICAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIHRvYXN0UmVuZGVyZXIgfHxcbiAgICAgIGFwcGx5TWlkZGxld2FyZUZvclJlbmRlcmVyKFxuICAgICAgICAndG9hc3QnLFxuICAgICAgICB7IHN0cmljdDogZmFsc2UgfSxcbiAgICAgICAgLi4uc2luZ2xlVG9BcnJheSh0b2FzdE1pZGRsZXdhcmUpLFxuICAgICAgICAoKSA9PiAoKSA9PiAoeyBub3RpZmljYXRpb24gfSkgPT4ge1xuICAgICAgICAgIGlmIChub3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gcmVuZGVyZXIgZm9yIG5vdGlmaWNhdGlvbiBvZiB0eXBlIFwiJHtub3RpZmljYXRpb24uY29udGVudFR5cGV9XCJgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBub3RpZmljYXRpb24gdG8gcmVuZGVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApKHt9KVxuICAgICk7XG4gIH0sIFt0b2FzdE1pZGRsZXdhcmUsIHRvYXN0UmVuZGVyZXJdKTtcblxuICBjb25zdCBwYXRjaGVkVHlwaW5nSW5kaWNhdG9yUmVuZGVyZXIgPSB1c2VNZW1vKCgpID0+IHtcbiAgICB0eXBpbmdJbmRpY2F0b3JSZW5kZXJlciAmJlxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnV2ViIENoYXQ6IFwidHlwaW5nSW5kaWNhdG9yUmVuZGVyZXJcIiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgb24gMjAyMi0wNi0xNSwgcGxlYXNlIHVzZSBcInR5cGluZ0luZGljYXRvck1pZGRsZXdhcmVcIiBpbnN0ZWFkLidcbiAgICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgdHlwaW5nSW5kaWNhdG9yUmVuZGVyZXIgfHxcbiAgICAgIGFwcGx5TWlkZGxld2FyZUZvclJlbmRlcmVyKFxuICAgICAgICAndHlwaW5nIGluZGljYXRvcicsXG4gICAgICAgIHsgc3RyaWN0OiBmYWxzZSB9LFxuICAgICAgICAuLi5zaW5nbGVUb0FycmF5KHR5cGluZ0luZGljYXRvck1pZGRsZXdhcmUpLFxuICAgICAgICAoKSA9PiAoKSA9PiAoKSA9PiBmYWxzZVxuICAgICAgKSh7fSlcbiAgICApO1xuICB9LCBbdHlwaW5nSW5kaWNhdG9yTWlkZGxld2FyZSwgdHlwaW5nSW5kaWNhdG9yUmVuZGVyZXJdKTtcblxuICAvKipcbiAgICogVGhpcyBpcyBhIGhlYXZ5IGZ1bmN0aW9uLCBhbmQgaXQgaXMgZXhwZWN0ZWQgdG8gYmUgb25seSBjYWxsZWQgd2hlbiB0aGVyZSBpcyBhIG5lZWQgdG8gcmVjcmVhdGUgYnVzaW5lc3MgbG9naWMsIGUuZy5cbiAgICogLSBVc2VyIElEIGNoYW5nZWQsIGNhdXNpbmcgYWxsIHNlbmQqIGZ1bmN0aW9ucyB0byBiZSB1cGRhdGVkXG4gICAqIC0gc2VuZFxuICAgKiBAdG9kbyBUT0RPOiBbUDNdIFdlIHNob3VsZCB0aGluayBhYm91dCBpZiB3ZSBhbGxvdyB0aGUgdXNlciB0byBjaGFuZ2Ugb25TZW5kQm94VmFsdWVDaGFuZ2VkL3NlbmRCb3hWYWx1ZSwgZS5nLlxuICAgKiAxLiBUdXJucyB0ZXh0IGludG8gVVBQRVJDQVNFXG4gICAqIDIuIEZpbHRlciBvdXQgcHJvZmFuaXR5XG4gICAqIEB0b2RvIFRPRE86IFtQNF0gUmV2aXNpdCBhbGwgbWVtYmVycyBvZiBjb250ZXh0XG4gICAqICAgICAgIFRoaXMgY29udGV4dCBzaG91bGQgY29uc2lzdCBvZiBtZW1iZXJzIHRoYXQgYXJlIG5vdCBpbiB0aGUgUmVkdXggc3RvcmVcbiAgICogICAgICAgaS5lLiBtZW1iZXJzIHRoYXQgYXJlIG5vdCBpbnRlcmVzdGVkIGluIG90aGVyIHR5cGVzIG9mIFVJc1xuICAgKi9cbiAgY29uc3QgY29udGV4dCA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIC4uLmNhcmRBY3Rpb25Db250ZXh0LFxuICAgICAgLi4uZ3JvdXBBY3Rpdml0aWVzQ29udGV4dCxcbiAgICAgIC4uLmhvaXN0ZWREaXNwYXRjaGVycyxcbiAgICAgIGFjdGl2aXR5UmVuZGVyZXI6IHBhdGNoZWRBY3Rpdml0eVJlbmRlcmVyLFxuICAgICAgYWN0aXZpdHlTdGF0dXNSZW5kZXJlcjogcGF0Y2hlZEFjdGl2aXR5U3RhdHVzUmVuZGVyZXIsXG4gICAgICBhdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyUmVuZGVyZXI6IHBhdGNoZWRBdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyUmVuZGVyZXIsXG4gICAgICBhdHRhY2htZW50UmVuZGVyZXI6IHBhdGNoZWRBdHRhY2htZW50UmVuZGVyZXIsXG4gICAgICBhdmF0YXJSZW5kZXJlcjogcGF0Y2hlZEF2YXRhclJlbmRlcmVyLFxuICAgICAgZGlyOiBwYXRjaGVkRGlyLFxuICAgICAgZGlyZWN0TGluZSxcbiAgICAgIGRpc2FibGVkLFxuICAgICAgZG93bnNjYWxlSW1hZ2VUb0RhdGFVUkwsXG4gICAgICBncmFtbWFyczogcGF0Y2hlZEdyYW1tYXJzLFxuICAgICAgaW50ZXJuYWxFcnJvckJveENsYXNzLFxuICAgICAgbGFuZ3VhZ2U6IGxvY2FsZSxcbiAgICAgIGxvY2FsaXplZEdsb2JhbGl6ZVN0YXRlOiBbbG9jYWxpemVkR2xvYmFsaXplXSxcbiAgICAgIGxvY2FsaXplZFN0cmluZ3M6IHBhdGNoZWRMb2NhbGl6ZWRTdHJpbmdzLFxuICAgICAgb25UZWxlbWV0cnksXG4gICAgICByZW5kZXJNYXJrZG93bixcbiAgICAgIHNlbGVjdFZvaWNlOiBwYXRjaGVkU2VsZWN0Vm9pY2UsXG4gICAgICBzZW5kVHlwaW5nSW5kaWNhdG9yLFxuICAgICAgc3R5bGVPcHRpb25zOiBwYXRjaGVkU3R5bGVPcHRpb25zLFxuICAgICAgdGVsZW1ldHJ5RGltZW5zaW9uc1JlZixcbiAgICAgIHRvYXN0UmVuZGVyZXI6IHBhdGNoZWRUb2FzdFJlbmRlcmVyLFxuICAgICAgdHJhY2tEaW1lbnNpb24sXG4gICAgICB0eXBpbmdJbmRpY2F0b3JSZW5kZXJlcjogcGF0Y2hlZFR5cGluZ0luZGljYXRvclJlbmRlcmVyLFxuICAgICAgdXNlcklELFxuICAgICAgdXNlcm5hbWVcbiAgICB9KSxcbiAgICBbXG4gICAgICBjYXJkQWN0aW9uQ29udGV4dCxcbiAgICAgIGRpcmVjdExpbmUsXG4gICAgICBkaXNhYmxlZCxcbiAgICAgIGRvd25zY2FsZUltYWdlVG9EYXRhVVJMLFxuICAgICAgZ3JvdXBBY3Rpdml0aWVzQ29udGV4dCxcbiAgICAgIGhvaXN0ZWREaXNwYXRjaGVycyxcbiAgICAgIGludGVybmFsRXJyb3JCb3hDbGFzcyxcbiAgICAgIGxvY2FsZSxcbiAgICAgIGxvY2FsaXplZEdsb2JhbGl6ZSxcbiAgICAgIG9uVGVsZW1ldHJ5LFxuICAgICAgcGF0Y2hlZEFjdGl2aXR5UmVuZGVyZXIsXG4gICAgICBwYXRjaGVkQWN0aXZpdHlTdGF0dXNSZW5kZXJlcixcbiAgICAgIHBhdGNoZWRBdHRhY2htZW50Rm9yU2NyZWVuUmVhZGVyUmVuZGVyZXIsXG4gICAgICBwYXRjaGVkQXR0YWNobWVudFJlbmRlcmVyLFxuICAgICAgcGF0Y2hlZEF2YXRhclJlbmRlcmVyLFxuICAgICAgcGF0Y2hlZERpcixcbiAgICAgIHBhdGNoZWRHcmFtbWFycyxcbiAgICAgIHBhdGNoZWRMb2NhbGl6ZWRTdHJpbmdzLFxuICAgICAgcGF0Y2hlZFNlbGVjdFZvaWNlLFxuICAgICAgcGF0Y2hlZFN0eWxlT3B0aW9ucyxcbiAgICAgIHBhdGNoZWRUb2FzdFJlbmRlcmVyLFxuICAgICAgcGF0Y2hlZFR5cGluZ0luZGljYXRvclJlbmRlcmVyLFxuICAgICAgcmVuZGVyTWFya2Rvd24sXG4gICAgICBzZW5kVHlwaW5nSW5kaWNhdG9yLFxuICAgICAgdGVsZW1ldHJ5RGltZW5zaW9uc1JlZixcbiAgICAgIHRyYWNrRGltZW5zaW9uLFxuICAgICAgdXNlcklELFxuICAgICAgdXNlcm5hbWVcbiAgICBdXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8V2ViQ2hhdEFQSUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHR9PlxuICAgICAge3R5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkcmVuKGNvbnRleHQpIDogY2hpbGRyZW59XG4gICAgICB7b25UZWxlbWV0cnkgJiYgPFRyYWNrZXIgLz59XG4gICAgPC9XZWJDaGF0QVBJQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn07XG5cbi8vIFdlIHdpbGwgY3JlYXRlIGEgUmVkdXggc3RvcmUgaWYgaXQgd2FzIG5vdCBwYXNzZWQgaW5cbmNvbnN0IENvbXBvc2VXaXRoU3RvcmU6IEZDPENvbXBvc2VyUHJvcHMgJiB7IHN0b3JlOiBhbnkgfT4gPSAoe1xuICBpbnRlcm5hbFJlbmRlckVycm9yQm94LFxuICBvblRlbGVtZXRyeSxcbiAgc3RvcmUsXG4gIC4uLnByb3BzXG59KSA9PiB7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoKTtcblxuICBjb25zdCBoYW5kbGVFcnJvciA9IHVzZUNhbGxiYWNrKFxuICAgIGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2JvdGZyYW1ld29yay13ZWJjaGF0OiBVbmNhdWdodCBleGNlcHRpb24nLCB7IGVycm9yIH0pO1xuXG4gICAgICBvblRlbGVtZXRyeSAmJiBvblRlbGVtZXRyeShjcmVhdGVDdXN0b21FdmVudCgnZXhjZXB0aW9uJywgeyBlcnJvciwgZmF0YWw6IHRydWUgfSkpO1xuICAgICAgc2V0RXJyb3IoZXJyb3IpO1xuICAgIH0sXG4gICAgW29uVGVsZW1ldHJ5LCBzZXRFcnJvcl1cbiAgKTtcblxuICBjb25zdCBtZW1vaXplZFN0b3JlID0gdXNlTWVtbygoKSA9PiBzdG9yZSB8fCBjcmVhdGVTdG9yZSgpLCBbc3RvcmVdKTtcblxuICByZXR1cm4gZXJyb3IgPyAoXG4gICAgISFpbnRlcm5hbFJlbmRlckVycm9yQm94ICYmIGludGVybmFsUmVuZGVyRXJyb3JCb3goeyBlcnJvciwgdHlwZTogJ3VuY2F1Z2h0IGV4Y2VwdGlvbicgfSlcbiAgKSA6IChcbiAgICA8RXJyb3JCb3VuZGFyeSBvbkVycm9yPXtoYW5kbGVFcnJvcn0+XG4gICAgICA8UHJvdmlkZXIgY29udGV4dD17V2ViQ2hhdFJlZHV4Q29udGV4dH0gc3RvcmU9e21lbW9pemVkU3RvcmV9PlxuICAgICAgICA8Q29tcG9zZXIgaW50ZXJuYWxSZW5kZXJFcnJvckJveD17aW50ZXJuYWxSZW5kZXJFcnJvckJveH0gb25UZWxlbWV0cnk9e29uVGVsZW1ldHJ5fSB7Li4ucHJvcHN9IC8+XG4gICAgICA8L1Byb3ZpZGVyPlxuICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgKTtcbn07XG5cbkNvbXBvc2VXaXRoU3RvcmUuZGVmYXVsdFByb3BzID0ge1xuICBpbnRlcm5hbFJlbmRlckVycm9yQm94OiB1bmRlZmluZWQsXG4gIG9uVGVsZW1ldHJ5OiB1bmRlZmluZWQsXG4gIHN0b3JlOiB1bmRlZmluZWRcbn07XG5cbkNvbXBvc2VXaXRoU3RvcmUucHJvcFR5cGVzID0ge1xuICBpbnRlcm5hbFJlbmRlckVycm9yQm94OiBQcm9wVHlwZXMuYW55LFxuICBvblRlbGVtZXRyeTogUHJvcFR5cGVzLmZ1bmMsXG4gIHN0b3JlOiBQcm9wVHlwZXMuYW55XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDb21wb3NlV2l0aFN0b3JlO1xuXG4vKipcbiAqIEB0b2RvIFRPRE86IFtQM10gV2Ugc2hvdWxkIGNvbnNpZGVyIG1vdmluZyBzb21lIGRhdGEgZnJvbSBSZWR1eCBzdG9yZSB0byBwcm9wc1xuICogICAgICAgQWx0aG91Z2ggd2UgdXNlIGBjb25uZWN0VG9XZWJDaGF0YCB0byBoaWRlIHRoZSBkZXRhaWxzIG9mIGFjY2Vzc29yIG9mIFJlZHV4IHN0b3JlLFxuICogICAgICAgd2Ugc2hvdWxkIGNsZWFuIHVwIHRoZSByZXNwb25zaWJpbGl0eSBiZXR3ZWVuIENvbnRleHQgYW5kIFJlZHV4IHN0b3JlXG4gKiAgICAgICBXZSBzaG91bGQgZGVjaWRlIHdoaWNoIGRhdGEgaXMgbmVlZGVkIGZvciBSZWFjdCBidXQgbm90IGluIG90aGVyIGVudmlyb25tZW50IHN1Y2ggYXMgQ0xJL1ZTQ29kZVxuICovXG5Db21wb3Nlci5kZWZhdWx0UHJvcHMgPSB7XG4gIGFjdGl2aXR5TWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICBhY3Rpdml0eVJlbmRlcmVyOiB1bmRlZmluZWQsXG4gIGFjdGl2aXR5U3RhdHVzTWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICBhY3Rpdml0eVN0YXR1c1JlbmRlcmVyOiB1bmRlZmluZWQsXG4gIGF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlOiB1bmRlZmluZWQsXG4gIGF0dGFjaG1lbnRNaWRkbGV3YXJlOiB1bmRlZmluZWQsXG4gIGF0dGFjaG1lbnRSZW5kZXJlcjogdW5kZWZpbmVkLFxuICBhdmF0YXJNaWRkbGV3YXJlOiB1bmRlZmluZWQsXG4gIGF2YXRhclJlbmRlcmVyOiB1bmRlZmluZWQsXG4gIGNhcmRBY3Rpb25NaWRkbGV3YXJlOiB1bmRlZmluZWQsXG4gIGNoaWxkcmVuOiB1bmRlZmluZWQsXG4gIGRpcjogJ2F1dG8nLFxuICBkaXNhYmxlZDogZmFsc2UsXG4gIGRvd25zY2FsZUltYWdlVG9EYXRhVVJMOiB1bmRlZmluZWQsXG4gIGdyYW1tYXJzOiBbXSxcbiAgZ3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICBncm91cFRpbWVzdGFtcDogdW5kZWZpbmVkLFxuICBpbnRlcm5hbEVycm9yQm94Q2xhc3M6IHVuZGVmaW5lZCxcbiAgbG9jYWxlOiB3aW5kb3cubmF2aWdhdG9yLmxhbmd1YWdlIHx8ICdlbi1VUycsXG4gIG9uVGVsZW1ldHJ5OiB1bmRlZmluZWQsXG4gIG92ZXJyaWRlTG9jYWxpemVkU3RyaW5nczogdW5kZWZpbmVkLFxuICByZW5kZXJNYXJrZG93bjogdW5kZWZpbmVkLFxuICBzZWxlY3RWb2ljZTogdW5kZWZpbmVkLFxuICBzZW5kVGltZW91dDogdW5kZWZpbmVkLFxuICBzZW5kVHlwaW5nSW5kaWNhdG9yOiBmYWxzZSxcbiAgc3R5bGVPcHRpb25zOiB7fSxcbiAgdG9hc3RNaWRkbGV3YXJlOiB1bmRlZmluZWQsXG4gIHRvYXN0UmVuZGVyZXI6IHVuZGVmaW5lZCxcbiAgdHlwaW5nSW5kaWNhdG9yTWlkZGxld2FyZTogdW5kZWZpbmVkLFxuICB0eXBpbmdJbmRpY2F0b3JSZW5kZXJlcjogdW5kZWZpbmVkLFxuICB1c2VySUQ6ICcnLFxuICB1c2VybmFtZTogJydcbn07XG5cbkNvbXBvc2VyLnByb3BUeXBlcyA9IHtcbiAgYWN0aXZpdHlNaWRkbGV3YXJlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZnVuYyksIFByb3BUeXBlcy5mdW5jXSksXG4gIGFjdGl2aXR5UmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICBhY3Rpdml0eVN0YXR1c01pZGRsZXdhcmU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5mdW5jKSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgYWN0aXZpdHlTdGF0dXNSZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsXG4gIGF0dGFjaG1lbnRGb3JTY3JlZW5SZWFkZXJNaWRkbGV3YXJlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZnVuYyksIFByb3BUeXBlcy5mdW5jXSksXG4gIGF0dGFjaG1lbnRNaWRkbGV3YXJlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZnVuYyksIFByb3BUeXBlcy5mdW5jXSksXG4gIGF0dGFjaG1lbnRSZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsXG4gIGF2YXRhck1pZGRsZXdhcmU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5mdW5jKSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgYXZhdGFyUmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICBjYXJkQWN0aW9uTWlkZGxld2FyZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmZ1bmMpLCBQcm9wVHlwZXMuZnVuY10pLFxuICBjaGlsZHJlbjogUHJvcFR5cGVzLmFueSxcbiAgZGlyOiBQcm9wVHlwZXMub25lT2YoWydhdXRvJywgJ2x0cicsICdydGwnXSksXG4gIGRpcmVjdExpbmU6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgYWN0aXZpdHkkOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgc3Vic2NyaWJlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXG4gICAgfSkuaXNSZXF1aXJlZCxcbiAgICBjb25uZWN0aW9uU3RhdHVzJDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgIHN1YnNjcmliZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuICAgIH0pLmlzUmVxdWlyZWQsXG4gICAgZW5kOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBnZXRTZXNzaW9uSWQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIHBvc3RBY3Rpdml0eTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICByZWZlcmVuY2VHcmFtbWFySUQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdG9rZW46IFByb3BUeXBlcy5zdHJpbmdcbiAgfSkuaXNSZXF1aXJlZCxcbiAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICBkb3duc2NhbGVJbWFnZVRvRGF0YVVSTDogUHJvcFR5cGVzLmZ1bmMsXG4gIGdyYW1tYXJzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcbiAgZ3JvdXBBY3Rpdml0aWVzTWlkZGxld2FyZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmZ1bmMpLCBQcm9wVHlwZXMuZnVuY10pLFxuICBncm91cFRpbWVzdGFtcDogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmJvb2wsIFByb3BUeXBlcy5udW1iZXJdKSxcbiAgaW50ZXJuYWxFcnJvckJveENsYXNzOiBQcm9wVHlwZXMuZnVuYywgLy8gVGhpcyBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuIFdlIGRvbid0IGFsbG93IGN1c3RvbWl6YXRpb24gb2YgZXJyb3IgYm94LlxuICBsb2NhbGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIG9uVGVsZW1ldHJ5OiBQcm9wVHlwZXMuZnVuYyxcbiAgb3ZlcnJpZGVMb2NhbGl6ZWRTdHJpbmdzOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYW55LCBQcm9wVHlwZXMuZnVuY10pLFxuICByZW5kZXJNYXJrZG93bjogUHJvcFR5cGVzLmZ1bmMsXG4gIHNlbGVjdFZvaWNlOiBQcm9wVHlwZXMuZnVuYyxcbiAgc2VuZFRpbWVvdXQ6IFByb3BUeXBlcy5udW1iZXIsXG4gIHNlbmRUeXBpbmdJbmRpY2F0b3I6IFByb3BUeXBlcy5ib29sLFxuICBzdHlsZU9wdGlvbnM6IFByb3BUeXBlcy5hbnksXG4gIHRvYXN0TWlkZGxld2FyZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmZ1bmMpLCBQcm9wVHlwZXMuZnVuY10pLFxuICB0b2FzdFJlbmRlcmVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgdHlwaW5nSW5kaWNhdG9yTWlkZGxld2FyZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmZ1bmMpLCBQcm9wVHlwZXMuZnVuY10pLFxuICB0eXBpbmdJbmRpY2F0b3JSZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsXG4gIHVzZXJJRDogUHJvcFR5cGVzLnN0cmluZyxcbiAgdXNlcm5hbWU6IFByb3BUeXBlcy5zdHJpbmdcbn07XG4iXX0=